(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function noop$1(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return typeof e=="function"}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function is_empty(e){return Object.keys(e).length===0}function subscribe(e,...t){if(e==null)return noop$1;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function get_store_value(e){let t;return subscribe(e,r=>t=r)(),t}function component_subscribe(e,t,r){e.$$.on_destroy.push(subscribe(t,r))}function append(e,t){e.appendChild(t)}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode.removeChild(e)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,r,i){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=t==null?"":t}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){const e=current_component;do{for(;flushidx<dirty_components.length;){const t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const r=render_callbacks[t];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(e.fragment!==null){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,i){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push(()=>{outroing.delete(e),i&&(r&&e.d(1),i())}),e.o(t)}else i&&i()}function create_component(e){e&&e.c()}function mount_component(e,t,r,i){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,r),i||add_render_callback(()=>{const l=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...l):run_all(l),e.$$.on_mount=[]}),o.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;r.fragment!==null&&(run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){e.$$.dirty[0]===-1&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,r,i,n,o,l,u=[-1]){const s=current_component;set_current_component(e);const a=e.$$={fragment:null,ctx:[],props:o,update:noop$1,not_equal:n,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:blank_object(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};l&&l(a.root);let c=!1;if(a.ctx=r?r(e,t.props||{},(d,f,...h)=>{const m=h.length?h[0]:f;return a.ctx&&n(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),c&&make_dirty(e,d)),f}):[],a.update(),c=!0,run_all(a.before_update),a.fragment=i?i(a.ctx):!1,t.target){if(t.hydrate){const d=children(t.target);a.fragment&&a.fragment.l(d),d.forEach(detach)}else a.fragment&&a.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(s)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(t,r){if(!is_function(r))return noop$1;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(r),()=>{const n=i.indexOf(r);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!is_empty(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(e,t=noop$1){let r;const i=new Set;function n(u){if(safe_not_equal(e,u)&&(e=u,r)){const s=!subscriber_queue.length;for(const a of i)a[1](),subscriber_queue.push(a,e);if(s){for(let a=0;a<subscriber_queue.length;a+=2)subscriber_queue[a][0](subscriber_queue[a+1]);subscriber_queue.length=0}}}function o(u){n(u(e))}function l(u,s=noop$1){const a=[u,s];return i.add(a),i.size===1&&(r=t(n)||noop$1),u(e),()=>{i.delete(a),i.size===0&&(r(),r=null)}}return{set:n,update:o,subscribe:l}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(u,s){r[i]=function(c){if(o)if(o=!1,c)s(c);else{for(var d=new Array(arguments.length-1),f=0;f<d.length;)d[f++]=arguments[f];u.apply(null,d)}};try{e.apply(t||null,r)}catch(a){o&&(o=!1,s(a))}})}var base64$1={};(function(e){var t=e;t.length=function(u){var s=u.length;if(!s)return 0;for(var a=0;--s%4>1&&u.charAt(s)==="=";)++a;return Math.ceil(u.length*3)/4-a};for(var r=new Array(64),i=new Array(123),n=0;n<64;)i[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;t.encode=function(u,s,a){for(var c=null,d=[],f=0,h=0,m;s<a;){var p=u[s++];switch(h){case 0:d[f++]=r[p>>2],m=(p&3)<<4,h=1;break;case 1:d[f++]=r[m|p>>4],m=(p&15)<<2,h=2;break;case 2:d[f++]=r[m|p>>6],d[f++]=r[p&63],h=0;break}f>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,d)),f=0)}return h&&(d[f++]=r[m],d[f++]=61,h===1&&(d[f++]=61)),c?(f&&c.push(String.fromCharCode.apply(String,d.slice(0,f))),c.join("")):String.fromCharCode.apply(String,d.slice(0,f))};var o="invalid encoding";t.decode=function(u,s,a){for(var c=a,d=0,f,h=0;h<u.length;){var m=u.charCodeAt(h++);if(m===61&&d>1)break;if((m=i[m])===void 0)throw Error(o);switch(d){case 0:f=m,d=1;break;case 1:s[a++]=f<<2|(m&48)>>4,f=m,d=2;break;case 2:s[a++]=(f&15)<<4|(m&60)>>2,f=m,d=3;break;case 3:s[a++]=(f&3)<<6|m,d=0;break}}if(d===1)throw Error(o);return a-c},t.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,r,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:i||this}),this};EventEmitter.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var i=this._listeners[t],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};EventEmitter.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this};var float=factory(factory);function factory(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=r[3]===128;function n(s,a,c){t[0]=s,a[c]=r[0],a[c+1]=r[1],a[c+2]=r[2],a[c+3]=r[3]}function o(s,a,c){t[0]=s,a[c]=r[3],a[c+1]=r[2],a[c+2]=r[1],a[c+3]=r[0]}e.writeFloatLE=i?n:o,e.writeFloatBE=i?o:n;function l(s,a){return r[0]=s[a],r[1]=s[a+1],r[2]=s[a+2],r[3]=s[a+3],t[0]}function u(s,a){return r[3]=s[a],r[2]=s[a+1],r[1]=s[a+2],r[0]=s[a+3],t[0]}e.readFloatLE=i?l:u,e.readFloatBE=i?u:l}():function(){function t(i,n,o,l){var u=n<0?1:0;if(u&&(n=-n),n===0)i(1/n>0?0:2147483648,o,l);else if(isNaN(n))i(2143289344,o,l);else if(n>34028234663852886e22)i((u<<31|2139095040)>>>0,o,l);else if(n<11754943508222875e-54)i((u<<31|Math.round(n/1401298464324817e-60))>>>0,o,l);else{var s=Math.floor(Math.log(n)/Math.LN2),a=Math.round(n*Math.pow(2,-s)*8388608)&8388607;i((u<<31|s+127<<23|a)>>>0,o,l)}}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE);function r(i,n,o){var l=i(n,o),u=(l>>31)*2+1,s=l>>>23&255,a=l&8388607;return s===255?a?NaN:u*(1/0):s===0?u*1401298464324817e-60*a:u*Math.pow(2,s-150)*(a+8388608)}e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=r[7]===128;function n(s,a,c){t[0]=s,a[c]=r[0],a[c+1]=r[1],a[c+2]=r[2],a[c+3]=r[3],a[c+4]=r[4],a[c+5]=r[5],a[c+6]=r[6],a[c+7]=r[7]}function o(s,a,c){t[0]=s,a[c]=r[7],a[c+1]=r[6],a[c+2]=r[5],a[c+3]=r[4],a[c+4]=r[3],a[c+5]=r[2],a[c+6]=r[1],a[c+7]=r[0]}e.writeDoubleLE=i?n:o,e.writeDoubleBE=i?o:n;function l(s,a){return r[0]=s[a],r[1]=s[a+1],r[2]=s[a+2],r[3]=s[a+3],r[4]=s[a+4],r[5]=s[a+5],r[6]=s[a+6],r[7]=s[a+7],t[0]}function u(s,a){return r[7]=s[a],r[6]=s[a+1],r[5]=s[a+2],r[4]=s[a+3],r[3]=s[a+4],r[2]=s[a+5],r[1]=s[a+6],r[0]=s[a+7],t[0]}e.readDoubleLE=i?l:u,e.readDoubleBE=i?u:l}():function(){function t(i,n,o,l,u,s){var a=l<0?1:0;if(a&&(l=-l),l===0)i(0,u,s+n),i(1/l>0?0:2147483648,u,s+o);else if(isNaN(l))i(0,u,s+n),i(2146959360,u,s+o);else if(l>17976931348623157e292)i(0,u,s+n),i((a<<31|2146435072)>>>0,u,s+o);else{var c;if(l<22250738585072014e-324)c=l/5e-324,i(c>>>0,u,s+n),i((a<<31|c/4294967296)>>>0,u,s+o);else{var d=Math.floor(Math.log(l)/Math.LN2);d===1024&&(d=1023),c=l*Math.pow(2,-d),i(c*4503599627370496>>>0,u,s+n),i((a<<31|d+1023<<20|c*1048576&1048575)>>>0,u,s+o)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function r(i,n,o,l,u){var s=i(l,u+n),a=i(l,u+o),c=(a>>31)*2+1,d=a>>>20&2047,f=4294967296*(a&1048575)+s;return d===2047?f?NaN:c*(1/0):d===0?c*5e-324*f:c*Math.pow(2,d-1075)*(f+4503599627370496)}e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var t=e;t.length=function(i){for(var n=0,o=0,l=0;l<i.length;++l)o=i.charCodeAt(l),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(i.charCodeAt(l+1)&64512)===56320?(++l,n+=4):n+=3;return n},t.read=function(i,n,o){var l=o-n;if(l<1)return"";for(var u=null,s=[],a=0,c;n<o;)c=i[n++],c<128?s[a++]=c:c>191&&c<224?s[a++]=(c&31)<<6|i[n++]&63:c>239&&c<365?(c=((c&7)<<18|(i[n++]&63)<<12|(i[n++]&63)<<6|i[n++]&63)-65536,s[a++]=55296+(c>>10),s[a++]=56320+(c&1023)):s[a++]=(c&15)<<12|(i[n++]&63)<<6|i[n++]&63,a>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),a=0);return u?(a&&u.push(String.fromCharCode.apply(String,s.slice(0,a))),u.join("")):String.fromCharCode.apply(String,s.slice(0,a))},t.write=function(i,n,o){for(var l=o,u,s,a=0;a<i.length;++a)u=i.charCodeAt(a),u<128?n[o++]=u:u<2048?(n[o++]=u>>6|192,n[o++]=u&63|128):(u&64512)===55296&&((s=i.charCodeAt(a+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++a,n[o++]=u>>18|240,n[o++]=u>>12&63|128,n[o++]=u>>6&63|128,n[o++]=u&63|128):(n[o++]=u>>12|224,n[o++]=u>>6&63|128,n[o++]=u&63|128);return o-l}})(utf8$2);var pool_1=pool;function pool(e,t,r){var i=r||8192,n=i>>>1,o=null,l=i;return function(s){if(s<1||s>n)return e(s);l+s>i&&(o=e(i),l=0);var a=t.call(o,l,l+=s);return l&7&&(l=(l|7)+1),a}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal();function t(o,l){this.lo=o>>>0,this.hi=l>>>0}var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var i=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(l){if(l===0)return r;var u=l<0;u&&(l=-l);var s=l>>>0,a=(l-s)/4294967296>>>0;return u&&(a=~a>>>0,s=~s>>>0,++s>4294967295&&(s=0,++a>4294967295&&(a=0))),new t(s,a)},t.from=function(l){if(typeof l=="number")return t.fromNumber(l);if(e.isString(l))if(e.Long)l=e.Long.fromString(l);else return t.fromNumber(parseInt(l,10));return l.low||l.high?new t(l.low>>>0,l.high>>>0):r},t.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var u=~this.lo+1>>>0,s=~this.hi>>>0;return u||(s=s+1>>>0),-(u+s*4294967296)}return this.lo+this.hi*4294967296},t.prototype.toLong=function(l){return e.Long?new e.Long(this.lo|0,this.hi|0,Boolean(l)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(l)}};var n=String.prototype.charCodeAt;return t.fromHash=function(l){return l===i?r:new t((n.call(l,0)|n.call(l,1)<<8|n.call(l,2)<<16|n.call(l,3)<<24)>>>0,(n.call(l,4)|n.call(l,5)<<8|n.call(l,6)<<16|n.call(l,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},t.prototype.zzDecode=function(){var l=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},t.prototype.length=function(){var l=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?u===0?l<16384?l<128?1:2:l<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:s<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var t=e;t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=requireLongbits(),t.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},t.isString=function(o){return typeof o=="string"||o instanceof String},t.isObject=function(o){return o&&typeof o=="object"},t.isset=t.isSet=function(o,l){var u=o[l];return u!=null&&o.hasOwnProperty(l)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},t.Buffer=function(){try{var n=t.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(o){return typeof o=="number"?t.Buffer?t._Buffer_allocUnsafe(o):new t.Array(o):t.Buffer?t._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(o){return o?t.LongBits.from(o).toHash():t.LongBits.zeroHash},t.longFromHash=function(o,l){var u=t.LongBits.fromHash(o);return t.Long?t.Long.fromBits(u.lo,u.hi,l):u.toNumber(Boolean(l))};function r(n,o,l){for(var u=Object.keys(o),s=0;s<u.length;++s)(n[u[s]]===void 0||!l)&&(n[u[s]]=o[u[s]]);return n}t.merge=r,t.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function i(n){function o(l,u){if(!(this instanceof o))return new o(l,u);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&r(this,u)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(o){for(var l={},u=0;u<o.length;++u)l[o[u]]=1;return function(){for(var s=Object.keys(this),a=s.length-1;a>-1;--a)if(l[s[a]]===1&&this[s[a]]!==void 0&&this[s[a]]!==null)return s[a]}},t.oneOfSetter=function(o){return function(l){for(var u=0;u<o.length;++u)o[u]!==l&&delete this[o[u]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var n=t.Buffer;if(!n){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=n.from!==Uint8Array.from&&n.from||function(l,u){return new n(l,u)},t._Buffer_allocUnsafe=n.allocUnsafe||function(l){return new n(l)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function e(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function e(t){return new util$4.Array(t)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function e(t,r,i){return this.tail=this.tail.next=new Op(t,r,i),this.len+=r,this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Writer$1.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer$1.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Writer$1.prototype.uint64=function e(t){var r=LongBits$1.from(t);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(t){var r=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(t){var r=LongBits$1.from(t);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(t){return this._push(util$4.float.writeFloatLE,4,t)};Writer$1.prototype.double=function e(t){return this._push(util$4.float.writeDoubleLE,8,t)};var writeBytes=util$4.Array.prototype.set?function e(t,r,i){r.set(t,i)}:function e(t,r,i){for(var n=0;n<t.length;++n)r[i+n]=t[n]};Writer$1.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(t)){var i=Writer$1.alloc(r=base64.length(t));base64.decode(t,i,0),t=i}return this.uint32(r)._push(writeBytes,r,t)};Writer$1.prototype.string=function e(t){var r=utf8$1.length(t);return r?this.uint32(r)._push(utf8$1.write,r,t):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function e(){var t=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=r,this.len+=i),this};Writer$1.prototype.finish=function e(){for(var t=this.head.next,r=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,r,i),i+=t.len,t=t.next;return r};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(t,r,i){r.set(t,i)}:function(t,r,i){if(t.copy)t.copy(r,i,0,t.length);else for(var n=0;n<t.length;)r[i++]=t[n++]}};BufferWriter.prototype.bytes=function e(t){util$3.isString(t)&&(t=util$3._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,t),this};function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter.prototype.string=function e(t){var r=util$3.Buffer.byteLength(t);return this.uint32(r),r&&this._push(writeStringBuffer,r,t),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")},create=function e(){return util$2.Buffer?function(r){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(r)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Reader$1.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Reader$1.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader$1.prototype.skip=function e(t){if(typeof t=="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function e(t,r,i,n,o){if(!n)throw TypeError("request must be specified");var l=this;if(!o)return util.asPromise(e,l,t,r,i,n);if(!l.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return l.rpcImpl(t,r[l.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(s,a){if(s)return l.emit("error",s,t),o(s);if(a===null){l.end(!0);return}if(!(a instanceof i))try{a=i[l.responseDelimited?"decodeDelimited":"decode"](a)}catch(c){return l.emit("error",c,t),o(c)}return l.emit("data",a,t),o(null,a)})}catch(u){l.emit("error",u,t),setTimeout(function(){o(u)},0);return}};Service.prototype.end=function e(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var t=e;t.Service=service})(rpc);var roots={};(function(e){var t=e;t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=requireMinimal(),t.rpc=rpc,t.roots=roots,t.configure=r;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}r()})(indexMinimal);(function(e){e.exports=indexMinimal})(minimal$1);var ClientMsgType;(function(e){e[e.join_lobby=0]="join_lobby",e[e.lobby_msg=1]="lobby_msg",e[e.join_lobby_game=2]="join_lobby_game",e[e.leave_lobby_game=3]="leave_lobby_game",e[e.player_move=4]="player_move",e[e.leave_game=5]="leave_game",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientMsgType||(ClientMsgType={}));var ServerMsgType;(function(e){e[e.lobby_games=0]="lobby_games",e[e.player_msg=1]="player_msg",e[e.player_join_lobby=2]="player_join_lobby",e[e.player_leave_lobby=3]="player_leave_lobby",e[e.lobby_game_updated=4]="lobby_game_updated",e[e.player_join=5]="player_join",e[e.game_start=6]="game_start",e[e.game_end=7]="game_end",e[e.tick=8]="tick",e[e.player_left=9]="player_left",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerMsgType||(ServerMsgType={}));var GameStatus;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.PLAYER_WON=2]="PLAYER_WON",e[e.AI_WON=3]="AI_WON",e[e.TIE=4]="TIE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GameStatus||(GameStatus={}));function gameStatusFromJSON(e){switch(e){case 0:case"WAITING":return GameStatus.WAITING;case 1:case"RUNNING":return GameStatus.RUNNING;case 2:case"PLAYER_WON":return GameStatus.PLAYER_WON;case 3:case"AI_WON":return GameStatus.AI_WON;case 4:case"TIE":return GameStatus.TIE;case-1:case"UNRECOGNIZED":default:return GameStatus.UNRECOGNIZED}}function gameStatusToJSON(e){switch(e){case GameStatus.WAITING:return"WAITING";case GameStatus.RUNNING:return"RUNNING";case GameStatus.PLAYER_WON:return"PLAYER_WON";case GameStatus.AI_WON:return"AI_WON";case GameStatus.TIE:return"TIE";case GameStatus.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBasePlayer(){return{id:0,clientId:0,playerNumber:0,name:"",color:0,cursor:void 0,dead:!1}}const Player={encode(e,t=minimal$1.exports.Writer.create()){return e.id!==0&&t.uint32(8).uint32(e.id),e.clientId!==0&&t.uint32(16).uint32(e.clientId),e.playerNumber!==0&&t.uint32(24).uint32(e.playerNumber),e.name!==""&&t.uint32(34).string(e.name),e.color!==0&&t.uint32(40).uint32(e.color),e.cursor!==void 0&&Cursor.encode(e.cursor,t.uint32(50).fork()).ldelim(),e.dead===!0&&t.uint32(56).bool(e.dead),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayer();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.id=r.uint32();break;case 2:n.clientId=r.uint32();break;case 3:n.playerNumber=r.uint32();break;case 4:n.name=r.string();break;case 5:n.color=r.uint32();break;case 6:n.cursor=Cursor.decode(r,r.uint32());break;case 7:n.dead=r.bool();break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{id:isSet(e.id)?Number(e.id):0,clientId:isSet(e.clientId)?Number(e.clientId):0,playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?Number(e.color):0,cursor:isSet(e.cursor)?Cursor.fromJSON(e.cursor):void 0,dead:isSet(e.dead)?Boolean(e.dead):!1}},toJSON(e){const t={};return e.id!==void 0&&(t.id=Math.round(e.id)),e.clientId!==void 0&&(t.clientId=Math.round(e.clientId)),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=Math.round(e.color)),e.cursor!==void 0&&(t.cursor=e.cursor?Cursor.toJSON(e.cursor):void 0),e.dead!==void 0&&(t.dead=e.dead),t},fromPartial(e){var t,r,i,n,o,l;const u=createBasePlayer();return u.id=(t=e.id)!==null&&t!==void 0?t:0,u.clientId=(r=e.clientId)!==null&&r!==void 0?r:0,u.playerNumber=(i=e.playerNumber)!==null&&i!==void 0?i:0,u.name=(n=e.name)!==null&&n!==void 0?n:"",u.color=(o=e.color)!==null&&o!==void 0?o:0,u.cursor=e.cursor!==void 0&&e.cursor!==null?Cursor.fromPartial(e.cursor):void 0,u.dead=(l=e.dead)!==null&&l!==void 0?l:!1,u}};function createBaseCursor(){return{player:0,x:0,y:0}}const Cursor={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.x!==0&&t.uint32(16).uint32(e.x),e.y!==0&&t.uint32(24).uint32(e.y),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseCursor();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.player=r.uint32();break;case 2:n.x=r.uint32();break;case 3:n.y=r.uint32();break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.x!==void 0&&(t.x=Math.round(e.x)),e.y!==void 0&&(t.y=Math.round(e.y)),t},fromPartial(e){var t,r,i;const n=createBaseCursor();return n.player=(t=e.player)!==null&&t!==void 0?t:0,n.x=(r=e.x)!==null&&r!==void 0?r:0,n.y=(i=e.y)!==null&&i!==void 0?i:0,n}};function createBaseBall(){return{player:0,color:0,x:0,y:0}}const Ball={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.color!==0&&t.uint32(16).uint32(e.color),e.x!==0&&t.uint32(29).float(e.x),e.y!==0&&t.uint32(37).float(e.y),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseBall();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.player=r.uint32();break;case 2:n.color=r.uint32();break;case 3:n.x=r.float();break;case 4:n.y=r.float();break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,color:isSet(e.color)?Number(e.color):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.color!==void 0&&(t.color=Math.round(e.color)),e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),t},fromPartial(e){var t,r,i,n;const o=createBaseBall();return o.player=(t=e.player)!==null&&t!==void 0?t:0,o.color=(r=e.color)!==null&&r!==void 0?r:0,o.x=(i=e.x)!==null&&i!==void 0?i:0,o.y=(n=e.y)!==null&&n!==void 0?n:0,o}};function createBaseGameStart(){return{gameId:"",players:[],balls:[]}}const GameStart={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const r of e.players)Player.encode(r,t.uint32(18).fork()).ldelim();for(const r of e.balls)Ball.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameStart();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.gameId=r.string();break;case 2:n.players.push(Player.decode(r,r.uint32()));break;case 3:n.balls.push(Ball.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:Array.isArray(e==null?void 0:e.players)?e.players.map(t=>Player.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.players?t.players=e.players.map(r=>r?Player.toJSON(r):void 0):t.players=[],e.balls?t.balls=e.balls.map(r=>r?Ball.toJSON(r):void 0):t.balls=[],t},fromPartial(e){var t,r,i;const n=createBaseGameStart();return n.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",n.players=((r=e.players)===null||r===void 0?void 0:r.map(o=>Player.fromPartial(o)))||[],n.balls=((i=e.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseGameEnd(){return{gameId:"",result:0,winner:void 0}}const GameEnd={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.result!==0&&t.uint32(16).int32(e.result),e.winner!==void 0&&Player.encode(e.winner,t.uint32(26).fork()).ldelim(),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameEnd();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.gameId=r.string();break;case 2:n.result=r.int32();break;case 3:n.winner=Player.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",result:isSet(e.result)?gameStatusFromJSON(e.result):0,winner:isSet(e.winner)?Player.fromJSON(e.winner):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.result!==void 0&&(t.result=gameStatusToJSON(e.result)),e.winner!==void 0&&(t.winner=e.winner?Player.toJSON(e.winner):void 0),t},fromPartial(e){var t,r;const i=createBaseGameEnd();return i.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",i.result=(r=e.result)!==null&&r!==void 0?r:0,i.winner=e.winner!==void 0&&e.winner!==null?Player.fromPartial(e.winner):void 0,i}};function createBaseTick(){return{gameId:"",cursors:[],balls:[]}}const Tick={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const r of e.cursors)Cursor.encode(r,t.uint32(18).fork()).ldelim();for(const r of e.balls)Ball.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseTick();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.gameId=r.string();break;case 2:n.cursors.push(Cursor.decode(r,r.uint32()));break;case 3:n.balls.push(Ball.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",cursors:Array.isArray(e==null?void 0:e.cursors)?e.cursors.map(t=>Cursor.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.cursors?t.cursors=e.cursors.map(r=>r?Cursor.toJSON(r):void 0):t.cursors=[],e.balls?t.balls=e.balls.map(r=>r?Ball.toJSON(r):void 0):t.balls=[],t},fromPartial(e){var t,r,i;const n=createBaseTick();return n.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",n.cursors=((r=e.cursors)===null||r===void 0?void 0:r.map(o=>Cursor.fromPartial(o)))||[],n.balls=((i=e.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseGameOptions(){return{serverTickRate:0,liquidPerPlayer:0,cursorSpeed:0,players:0}}const GameOptions={encode(e,t=minimal$1.exports.Writer.create()){return e.serverTickRate!==0&&t.uint32(8).uint32(e.serverTickRate),e.liquidPerPlayer!==0&&t.uint32(16).uint32(e.liquidPerPlayer),e.cursorSpeed!==0&&t.uint32(24).uint32(e.cursorSpeed),e.players!==0&&t.uint32(32).uint32(e.players),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameOptions();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.serverTickRate=r.uint32();break;case 2:n.liquidPerPlayer=r.uint32();break;case 3:n.cursorSpeed=r.uint32();break;case 4:n.players=r.uint32();break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{serverTickRate:isSet(e.serverTickRate)?Number(e.serverTickRate):0,liquidPerPlayer:isSet(e.liquidPerPlayer)?Number(e.liquidPerPlayer):0,cursorSpeed:isSet(e.cursorSpeed)?Number(e.cursorSpeed):0,players:isSet(e.players)?Number(e.players):0}},toJSON(e){const t={};return e.serverTickRate!==void 0&&(t.serverTickRate=Math.round(e.serverTickRate)),e.liquidPerPlayer!==void 0&&(t.liquidPerPlayer=Math.round(e.liquidPerPlayer)),e.cursorSpeed!==void 0&&(t.cursorSpeed=Math.round(e.cursorSpeed)),e.players!==void 0&&(t.players=Math.round(e.players)),t},fromPartial(e){var t,r,i,n;const o=createBaseGameOptions();return o.serverTickRate=(t=e.serverTickRate)!==null&&t!==void 0?t:0,o.liquidPerPlayer=(r=e.liquidPerPlayer)!==null&&r!==void 0?r:0,o.cursorSpeed=(i=e.cursorSpeed)!==null&&i!==void 0?i:0,o.players=(n=e.players)!==null&&n!==void 0?n:0,o}};function createBasePlayerJoinGame(){return{gameId:void 0,playerId:0,name:"",color:"",options:void 0}}const PlayerJoinGame={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==void 0&&t.uint32(10).string(e.gameId),e.playerId!==0&&t.uint32(16).uint32(e.playerId),e.name!==""&&t.uint32(26).string(e.name),e.color!==""&&t.uint32(34).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,t.uint32(42).fork()).ldelim(),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerJoinGame();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.gameId=r.string();break;case 2:n.playerId=r.uint32();break;case 3:n.name=r.string();break;case 4:n.color=r.string();break;case 5:n.options=GameOptions.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):void 0,playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=e.color),e.options!==void 0&&(t.options=e.options?GameOptions.toJSON(e.options):void 0),t},fromPartial(e){var t,r,i,n;const o=createBasePlayerJoinGame();return o.gameId=(t=e.gameId)!==null&&t!==void 0?t:void 0,o.playerId=(r=e.playerId)!==null&&r!==void 0?r:0,o.name=(i=e.name)!==null&&i!==void 0?i:"",o.color=(n=e.color)!==null&&n!==void 0?n:"",o.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,o}};function createBasePlayerMove(){return{gameId:"",playerNumber:0,mouseX:0,mouseY:0}}const PlayerMove={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.playerNumber!==0&&t.uint32(16).uint32(e.playerNumber),e.mouseX!==0&&t.uint32(24).uint32(e.mouseX),e.mouseY!==0&&t.uint32(32).uint32(e.mouseY),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerMove();for(;r.pos<i;){const o=r.uint32();switch(o>>>3){case 1:n.gameId=r.string();break;case 2:n.playerNumber=r.uint32();break;case 3:n.mouseX=r.uint32();break;case 4:n.mouseY=r.uint32();break;default:r.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,mouseX:isSet(e.mouseX)?Number(e.mouseX):0,mouseY:isSet(e.mouseY)?Number(e.mouseY):0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.mouseX!==void 0&&(t.mouseX=Math.round(e.mouseX)),e.mouseY!==void 0&&(t.mouseY=Math.round(e.mouseY)),t},fromPartial(e){var t,r,i,n;const o=createBasePlayerMove();return o.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",o.playerNumber=(r=e.playerNumber)!==null&&r!==void 0?r:0,o.mouseX=(i=e.mouseX)!==null&&i!==void 0?i:0,o.mouseY=(n=e.mouseY)!==null&&n!==void 0?n:0,o}};function isSet(e){return e!=null}const globalCursors=writable([]),balls$1=writable([]),mouse=writable({x:0,y:0}),width=writable(window.innerWidth),height=writable(window.innerHeight),gfxActions={initGame(e,t){globalCursors.set(e.map(r=>({...r.cursor,color:r.color,targetX:r.cursor.x,targetY:r.cursor.y}))),balls$1.set(t.map(r=>({...r,targetX:r.x,targetY:r.y})))},destroy(){globalCursors.set([]),balls$1.set([])},updateSize(e,t){width.set(e),height.set(t)},updateMouse(e,t){mouse.set({x:e,y:t})},updateBalls(e){balls$1.update(t=>t.map((r,i)=>({...r,targetX:e[i].x,targetY:e[i].y,color:e[i].color})))}},getEnv=e=>{if(!e)throw new Error("Undefined environment variable!");return e},WS_URL=getEnv("wss://liquid-war.fly.dev");var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,r=t*60,i=r*24,n=i*7,o=i*365.25;ms=function(c,d){d=d||{};var f=typeof c;if(f==="string"&&c.length>0)return l(c);if(f==="number"&&isFinite(c))return d.long?s(c):u(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function l(c){if(c=String(c),!(c.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(!!d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function u(c){var d=Math.abs(c);return d>=i?Math.round(c/i)+"d":d>=r?Math.round(c/r)+"h":d>=t?Math.round(c/t)+"m":d>=e?Math.round(c/e)+"s":c+"ms"}function s(c){var d=Math.abs(c);return d>=i?a(c,d,i,"day"):d>=r?a(c,d,r,"hour"):d>=t?a(c,d,t,"minute"):d>=e?a(c,d,e,"second"):c+" ms"}function a(c,d,f,h){var m=d>=f*1.5;return Math.round(c/f)+" "+h+(m?"s":"")}return ms}function setup(e){r.debug=r,r.default=r,r.coerce=s,r.disable=o,r.enable=n,r.enabled=l,r.humanize=requireMs(),r.destroy=a,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,h,m;function p(...g){if(!p.enabled)return;const v=p,y=Number(new Date),_=y-(d||y);v.diff=_,v.prev=d,v.curr=y,d=y,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let b=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(B,C)=>{if(B==="%%")return"%";b++;const E=r.formatters[C];if(typeof E=="function"){const S=g[b];B=E.call(v,S),g.splice(b,1),b--}return B}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return p.namespace=c,p.useColors=r.useColors(),p.color=r.selectColor(c),p.extend=i,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(h!==r.namespaces&&(h=r.namespaces,m=r.enabled(c)),m),set:g=>{f=g}}),typeof r.init=="function"&&r.init(p),p}function i(c,d){const f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d;const f=(typeof c=="string"?c:"").split(/[\s,]+/),h=f.length;for(d=0;d<h;d++)!f[d]||(c=f[d].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function o(){const c=[...r.names.map(u),...r.skips.map(u).map(d=>"-"+d)].join(",");return r.enable(""),c}function l(c){if(c[c.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(c))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function s(c){return c instanceof Error?c.stack||c.message:c}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common=setup;(function(e,t){t.formatArgs=i,t.save=n,t.load=o,t.useColors=r,t.storage=l(),t.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;s.splice(1,0,a,"color: inherit");let c=0,d=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(c++,f==="%c"&&(d=c))}),s.splice(d,0,a)}t.log=console.debug||console.log||(()=>{});function n(s){try{s?t.storage.setItem("debug",s):t.storage.removeItem("debug")}catch{}}function o(){let s;try{s=t.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}function l(){try{return localStorage}catch{}}e.exports=common(t);const{formatters:u}=e.exports;u.j=function(s){try{return JSON.stringify(s)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}})(browser,browser.exports);const debug=browser.exports,logger=debug("game"),log={print(e,t,r,i){const n=e==="info"?r:`%c ${e.toUpperCase()} -> ${r}`;i&&e==="info"?logger(n,i):i?logger(n,`color: ${t}`,i):e==="info"?logger(n):logger(n,`color: ${t}`)},debug(e,t){return this.print("debug","#c563ff",e,t)},info(e,t){return this.print("info","",e,t)},warn(e,t){return this.print("warn","#f3f32c",e,t)},error(e,t){return this.print("error","#ff4242",e,t)}},enableDebug=e=>{e?debug.enable("game"):debug.disable()};let socket=null;const socketActions={connect(e){socket=new WebSocket(WS_URL),socket.binaryType="arraybuffer",socket.onopen=()=>{console.log("Connected"),e({e:"connected"})},socket.onerror=t=>{console.debug("Socket error",t),e({e:"error",err:t})},socket.onclose=()=>{console.log("Disconnected"),socket=null,e({e:"disconnected"})},socket.onmessage=t=>{const{data:r}=t,i=new Uint8Array(r),n=i.slice(1),o=i[0];switch(o){case ServerMsgType.lobby_games:case ServerMsgType.player_msg:case ServerMsgType.player_join_lobby:case ServerMsgType.player_leave_lobby:case ServerMsgType.lobby_game_updated:case ServerMsgType.player_join:log.debug(`Read type ${o}`);case ServerMsgType.game_start:{e({e:ServerMsgType.game_start,data:GameStart.decode(n)});break}case ServerMsgType.game_end:{e({e:ServerMsgType.game_end,data:GameEnd.decode(n)});break}case ServerMsgType.tick:{e({e:ServerMsgType.tick,data:Tick.decode(n)});break}default:log.error(`Unknown message type: ${o}`)}}},emitJoinGame(e){const t=PlayerJoinGame.encode(e).finish(),r=new Uint8Array(t.length+1);r.set([ClientMsgType.join_lobby_game],0),r.set(t,1),socket==null||socket.send(r)},emitMove(e){const t=PlayerMove.encode(e).finish(),r=new Uint8Array(t.length+1);r.set([ClientMsgType.player_move],0),r.set(t,1),socket==null||socket.send(r)}},gameState=writable("start-menu"),gameEnd=writable(void 0),gameId=writable(""),players=writable([]),balls=writable([]),playerId=Math.ceil(Math.random()*1e5),localPlayer=writable(void 0),gameActions={async runGame(e,t){gameState.set("connecting"),socketActions.connect(r=>{var i;switch(log.debug("Event:",r),r.e){case"connected":socketActions.emitJoinGame({playerId,name:e,color:":-D",options:t}),gameState.set("joining-lobby");break;case ServerMsgType.game_start:gameId.set(r.data.gameId),players.set(r.data.players),balls.set(r.data.balls),localPlayer.set(r.data.players.find(u=>u.id===playerId)),gfxActions.initGame(r.data.players,r.data.balls),gameState.set("game-running");break;case ServerMsgType.game_end:gameEnd.set(r.data),gfxActions.destroy(),gameState.set("game-ended");break;case ServerMsgType.tick:const n=r.data;players.update(u=>(n.cursors.forEach((s,a)=>{u[a].cursor=s}),u));const o=get_store_value(mouse);socketActions.emitMove({gameId:n.gameId,playerNumber:((i=get_store_value(localPlayer))==null?void 0:i.playerNumber)||0,mouseX:o.x,mouseY:o.y});const l=get_store_value(globalCursors);for(let u=0;u<n.cursors.length;u++){const s=n.cursors[u],a=l.find(c=>c.player===s.player);a.targetX=s.x,a.targetY=s.y}gfxActions.updateBalls(n.balls);break}})},openStartMenu(){gameState.set("start-menu")}},Canvas_svelte_svelte_type_style_lang="";function create_fragment$1(e){let t,r,i,n,o,l,u,s;return{c(){t=element("div"),r=element("canvas"),i=space(),n=svg_element("svg"),o=svg_element("defs"),l=svg_element("filter"),u=svg_element("feGaussianBlur"),s=svg_element("feColorMatrix"),attr(r,"class","svelte-4wirdw"),attr(t,"class","game svelte-4wirdw"),attr(u,"in","SourceGraphic"),attr(u,"stdDeviation","11"),attr(u,"result","blur"),attr(s,"in","blur"),attr(s,"mode","matrix"),attr(s,"values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 60 -9"),attr(l,"id","goo"),attr(n,"xmlns","http://www.w3.org/2000/svg"),attr(n,"version","1.1")},m(a,c){insert(a,t,c),append(t,r),e[4](r),insert(a,i,c),insert(a,n,c),append(n,o),append(o,l),append(l,u),append(l,s)},p:noop$1,i:noop$1,o:noop$1,d(a){a&&detach(t),e[4](null),a&&detach(i),a&&detach(n)}}}const ballDiameter=16;function instance$1(e,t,r){let i,n,o,l,u,s;component_subscribe(e,mouse,p=>r(8,n=p)),component_subscribe(e,height,p=>r(1,o=p)),component_subscribe(e,width,p=>r(2,l=p)),component_subscribe(e,gameState,p=>r(9,u=p)),component_subscribe(e,localPlayer,p=>r(3,s=p));let a,c=performance.now(),d=null;onMount(()=>{d=a.getContext("2d"),r(0,a.width=l,a),r(0,a.height=o,a),h()});const f=p=>"#"+p.toString(16).slice(2);function h(){if(u!=="game-running")return;if(i===void 0){console.error("undefined playerNumber!");return}const p=performance.now()-c;c=performance.now();const g=.01*p,v=Math.min(1,.01*p);d.clearRect(0,0,l,o),balls$1.update(y=>y.map(_=>(_.x+=(_.targetX-_.x)*g,_.y+=(_.targetY-_.y)*g,d.fillStyle=f(_.color),d.beginPath(),d.arc(_.x,_.y,ballDiameter/2,0,Math.PI*2,!1),d.fill(),_))),globalCursors.update(y=>y.map(_=>(_.player==i?(_.x=n.x,_.y=n.y):(_.x+=(_.targetX-_.x)*v,_.y+=(_.targetY-_.y)*v),_))),requestAnimationFrame(h)}function m(p){binding_callbacks[p?"unshift":"push"](()=>{a=p,r(0,a),r(2,l),r(1,o)})}return e.$$.update=()=>{e.$$.dirty&8&&(i=s==null?void 0:s.playerNumber),e.$$.dirty&7&&a&&(r(0,a.width=l,a),r(0,a.height=o,a))},[a,o,l,s,m]}class Canvas extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}const App_svelte_svelte_type_style_lang="";function create_if_block_3(e){let t,r,i,n,o,l,u,s,a,c,d,f,h,m,p,g,v,y,_,b,I,B,C,E,S,O,A,k,P,x,R,W,$,F,L;return{c(){t=element("div"),r=element("h1"),r.textContent="Liquid War",i=space(),n=element("form"),o=element("div"),l=element("label"),l.textContent="Name",u=space(),s=element("input"),a=space(),c=element("button"),c.textContent="Play",d=space(),f=element("details"),h=element("summary"),h.textContent="Custom game options",m=space(),p=element("div"),g=element("label"),g.textContent="Server tick rate",v=space(),y=element("input"),_=space(),b=element("div"),I=element("label"),I.textContent="Liquid per player",B=space(),C=element("input"),E=space(),S=element("div"),O=element("label"),O.textContent="Cursor speed",A=space(),k=element("input"),P=space(),x=element("div"),R=element("label"),R.textContent="Players",W=space(),$=element("input"),attr(r,"class","svelte-1ylc334"),attr(l,"for","name"),attr(l,"class","svelte-1ylc334"),attr(s,"id","name"),attr(s,"class","svelte-1ylc334"),attr(o,"class","field svelte-1ylc334"),attr(c,"class","svelte-1ylc334"),attr(h,"class","svelte-1ylc334"),attr(g,"for","serverTickRate"),attr(g,"class","svelte-1ylc334"),attr(y,"id","serverTickRate"),attr(y,"class","svelte-1ylc334"),attr(p,"class","field svelte-1ylc334"),attr(I,"for","liquid"),attr(I,"class","svelte-1ylc334"),attr(C,"id","liquid"),attr(C,"class","svelte-1ylc334"),attr(b,"class","field svelte-1ylc334"),attr(O,"for","cursor"),attr(O,"class","svelte-1ylc334"),attr(k,"id","cursor"),attr(k,"class","svelte-1ylc334"),attr(S,"class","field svelte-1ylc334"),attr(R,"for","players"),attr(R,"class","svelte-1ylc334"),attr($,"id","players"),attr($,"class","svelte-1ylc334"),attr(x,"class","field svelte-1ylc334"),f.open=!0,attr(f,"class","svelte-1ylc334"),attr(n,"id","join-form"),attr(n,"class","svelte-1ylc334"),attr(t,"class","start-menu svelte-1ylc334")},m(w,N){insert(w,t,N),append(t,r),append(t,i),append(t,n),append(n,o),append(o,l),append(o,u),append(o,s),set_input_value(s,e[1]),append(n,a),append(n,c),append(n,d),append(n,f),append(f,h),append(f,m),append(f,p),append(p,g),append(p,v),append(p,y),set_input_value(y,e[2]),append(f,_),append(f,b),append(b,I),append(b,B),append(b,C),set_input_value(C,e[3]),append(f,E),append(f,S),append(S,O),append(S,A),append(S,k),set_input_value(k,e[4]),append(f,P),append(f,x),append(x,R),append(x,W),append(x,$),set_input_value($,e[5]),F||(L=[listen(s,"input",e[10]),listen(y,"input",e[11]),listen(C,"input",e[12]),listen(k,"input",e[13]),listen($,"input",e[14]),listen(n,"submit",prevent_default(e[7]))],F=!0)},p(w,N){N&2&&s.value!==w[1]&&set_input_value(s,w[1]),N&4&&y.value!==w[2]&&set_input_value(y,w[2]),N&8&&C.value!==w[3]&&set_input_value(C,w[3]),N&16&&k.value!==w[4]&&set_input_value(k,w[4]),N&32&&$.value!==w[5]&&set_input_value($,w[5])},i:noop$1,o:noop$1,d(w){w&&detach(t),F=!1,run_all(L)}}}function create_if_block_2(e){let t,r;return t=new Canvas({}),{c(){create_component(t.$$.fragment)},m(i,n){mount_component(t,i,n),r=!0},p:noop$1,i(i){r||(transition_in(t.$$.fragment,i),r=!0)},o(i){transition_out(t.$$.fragment,i),r=!1},d(i){destroy_component(t,i)}}}function create_if_block_1(e){let t,r,i,n,o,l,u,s,a;return{c(){t=element("div"),r=element("marquee"),r.textContent="Game ended",i=space(),n=element("p"),o=text(e[0]),l=space(),u=element("button"),u.textContent="Play again",attr(r,"class","title svelte-1ylc334"),attr(r,"width","50%"),attr(n,"class","game-winner svelte-1ylc334"),attr(u,"class","svelte-1ylc334"),attr(t,"class","end-menu svelte-1ylc334")},m(c,d){insert(c,t,d),append(t,r),append(t,i),append(t,n),append(n,o),append(t,l),append(t,u),s||(a=listen(u,"click",e[8]),s=!0)},p(c,d){d&1&&set_data(o,c[0])},i:noop$1,o:noop$1,d(c){c&&detach(t),s=!1,a()}}}function create_if_block(e){let t;return{c(){t=element("div"),t.innerHTML="<h2>Waiting for players\u2026</h2>",attr(t,"class","loading-menu svelte-1ylc334")},m(r,i){insert(r,t,i)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(t)}}}function create_fragment(e){let t,r,i,n;const o=[create_if_block,create_if_block_1,create_if_block_2,create_if_block_3],l=[];function u(s,a){return s[6]==="joining-lobby"?0:s[6]==="game-ended"?1:s[6]==="game-running"?2:s[6]==="start-menu"?3:-1}return~(r=u(e))&&(i=l[r]=o[r](e)),{c(){t=element("main"),i&&i.c(),attr(t,"class","svelte-1ylc334")},m(s,a){insert(s,t,a),~r&&l[r].m(t,null),n=!0},p(s,[a]){let c=r;r=u(s),r===c?~r&&l[r].p(s,a):(i&&(group_outros(),transition_out(l[c],1,1,()=>{l[c]=null}),check_outros()),~r?(i=l[r],i?i.p(s,a):(i=l[r]=o[r](s),i.c()),transition_in(i,1),i.m(t,null)):i=null)},i(s){n||(transition_in(i),n=!0)},o(s){transition_out(i),n=!1},d(s){s&&detach(t),~r&&l[r].d()}}}function instance(e,t,r){let i,n;component_subscribe(e,gameEnd,y=>r(9,i=y)),component_subscribe(e,gameState,y=>r(6,n=y));let o="",l="unknown",u,s,a,c=2;onMount(()=>{window.location.search.includes("?autoplay")&&window.addEventListener("load",()=>{document.querySelector("button").click()}),window.onresize=()=>{gfxActions.updateSize(window.innerWidth,window.innerHeight)},window.addEventListener("mousemove",function(y){gfxActions.updateMouse(y.clientX,y.clientY)},!1),window.addEventListener("message",y=>{y.origin==="http://localhost:5174"&&y.data==="play"&&(document.querySelector("#players").value="12",document.querySelector("button").click())})});function d(){console.log("handleJoinSubmit"),gameActions.runGame(l,{serverTickRate:u,liquidPerPlayer:s,cursorSpeed:a,players:c})}function f(){gameActions.openStartMenu()}function h(){l=this.value,r(1,l)}function m(){u=this.value,r(2,u)}function p(){s=this.value,r(3,s)}function g(){a=this.value,r(4,a)}function v(){c=this.value,r(5,c)}return e.$$.update=()=>{var y,_;if(e.$$.dirty&512){const b=i;b&&(b.result===GameStatus.PLAYER_WON&&((y=b.winner)==null?void 0:y.id)===playerId?r(0,o="You won \u{1F3C6} :DD"):b.result===GameStatus.PLAYER_WON&&((_=b.winner)==null?void 0:_.id)!==playerId?r(0,o="You lost \u{1F635}"):b.result===GameStatus.TIE?r(0,o="Tie \u{1F926}\u200D\u2642\uFE0F"):b.result===GameStatus.AI_WON?r(0,o="Computer won \u{1F916}"):r(0,o=`Something weird happened: ${GameStatus}`))}},[o,l,u,s,a,c,n,d,f,i,h,m,p,g,v]}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}const index="";enableDebug(!1);const el=document.querySelector("#app");el&&new App({target:el});
