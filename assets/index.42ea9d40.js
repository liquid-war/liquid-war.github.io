(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function noop$1(){}function safe_not_equal(e,r){return e!=e?r==r:e!==r||e&&typeof e=="object"||typeof e=="function"}function subscribe(e,...r){if(e==null)return noop$1;const t=e.subscribe(...r);return t.unsubscribe?()=>t.unsubscribe():t}function get_store_value(e){let r;return subscribe(e,t=>r=t)(),r}Promise.resolve();const subscriber_queue=[];function writable(e,r=noop$1){let t;const i=new Set;function n(s){if(safe_not_equal(e,s)&&(e=s,t)){const u=!subscriber_queue.length;for(const l of i)l[1](),subscriber_queue.push(l,e);if(u){for(let l=0;l<subscriber_queue.length;l+=2)subscriber_queue[l][0](subscriber_queue[l+1]);subscriber_queue.length=0}}}function o(s){n(s(e))}function a(s,u=noop$1){const l=[s,u];return i.add(l),i.size===1&&(t=r(n)||noop$1),s(e),()=>{i.delete(l),i.size===0&&(t(),t=null)}}return{set:n,update:o,subscribe:a}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,r){for(var t=new Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)t[i++]=arguments[n++];return new Promise(function(s,u){t[i]=function(c){if(o)if(o=!1,c)u(c);else{for(var d=new Array(arguments.length-1),f=0;f<d.length;)d[f++]=arguments[f];s.apply(null,d)}};try{e.apply(r||null,t)}catch(l){o&&(o=!1,u(l))}})}var base64$1={};(function(e){var r=e;r.length=function(s){var u=s.length;if(!u)return 0;for(var l=0;--u%4>1&&s.charAt(u)==="=";)++l;return Math.ceil(s.length*3)/4-l};for(var t=new Array(64),i=new Array(123),n=0;n<64;)i[t[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;r.encode=function(s,u,l){for(var c=null,d=[],f=0,p=0,h;u<l;){var m=s[u++];switch(p){case 0:d[f++]=t[m>>2],h=(m&3)<<4,p=1;break;case 1:d[f++]=t[h|m>>4],h=(m&15)<<2,p=2;break;case 2:d[f++]=t[h|m>>6],d[f++]=t[m&63],p=0;break}f>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,d)),f=0)}return p&&(d[f++]=t[h],d[f++]=61,p===1&&(d[f++]=61)),c?(f&&c.push(String.fromCharCode.apply(String,d.slice(0,f))),c.join("")):String.fromCharCode.apply(String,d.slice(0,f))};var o="invalid encoding";r.decode=function(s,u,l){for(var c=l,d=0,f,p=0;p<s.length;){var h=s.charCodeAt(p++);if(h===61&&d>1)break;if((h=i[h])===void 0)throw Error(o);switch(d){case 0:f=h,d=1;break;case 1:u[l++]=f<<2|(h&48)>>4,f=h,d=2;break;case 2:u[l++]=(f&15)<<4|(h&60)>>2,f=h,d=3;break;case 3:u[l++]=(f&3)<<6|h,d=0;break}}if(d===1)throw Error(o);return l-c},r.test=function(s){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(r,t,i){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:t,ctx:i||this}),this};EventEmitter.prototype.off=function(r,t){if(r===void 0)this._listeners={};else if(t===void 0)this._listeners[r]=[];else for(var i=this._listeners[r],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this};EventEmitter.prototype.emit=function(r){var t=this._listeners[r];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this};var float=factory(factory);function factory(e){return typeof Float32Array<"u"?function(){var r=new Float32Array([-0]),t=new Uint8Array(r.buffer),i=t[3]===128;function n(u,l,c){r[0]=u,l[c]=t[0],l[c+1]=t[1],l[c+2]=t[2],l[c+3]=t[3]}function o(u,l,c){r[0]=u,l[c]=t[3],l[c+1]=t[2],l[c+2]=t[1],l[c+3]=t[0]}e.writeFloatLE=i?n:o,e.writeFloatBE=i?o:n;function a(u,l){return t[0]=u[l],t[1]=u[l+1],t[2]=u[l+2],t[3]=u[l+3],r[0]}function s(u,l){return t[3]=u[l],t[2]=u[l+1],t[1]=u[l+2],t[0]=u[l+3],r[0]}e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function r(i,n,o,a){var s=n<0?1:0;if(s&&(n=-n),n===0)i(1/n>0?0:2147483648,o,a);else if(isNaN(n))i(2143289344,o,a);else if(n>34028234663852886e22)i((s<<31|2139095040)>>>0,o,a);else if(n<11754943508222875e-54)i((s<<31|Math.round(n/1401298464324817e-60))>>>0,o,a);else{var u=Math.floor(Math.log(n)/Math.LN2),l=Math.round(n*Math.pow(2,-u)*8388608)&8388607;i((s<<31|u+127<<23|l)>>>0,o,a)}}e.writeFloatLE=r.bind(null,writeUintLE),e.writeFloatBE=r.bind(null,writeUintBE);function t(i,n,o){var a=i(n,o),s=(a>>31)*2+1,u=a>>>23&255,l=a&8388607;return u===255?l?NaN:s*(1/0):u===0?s*1401298464324817e-60*l:s*Math.pow(2,u-150)*(l+8388608)}e.readFloatLE=t.bind(null,readUintLE),e.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var r=new Float64Array([-0]),t=new Uint8Array(r.buffer),i=t[7]===128;function n(u,l,c){r[0]=u,l[c]=t[0],l[c+1]=t[1],l[c+2]=t[2],l[c+3]=t[3],l[c+4]=t[4],l[c+5]=t[5],l[c+6]=t[6],l[c+7]=t[7]}function o(u,l,c){r[0]=u,l[c]=t[7],l[c+1]=t[6],l[c+2]=t[5],l[c+3]=t[4],l[c+4]=t[3],l[c+5]=t[2],l[c+6]=t[1],l[c+7]=t[0]}e.writeDoubleLE=i?n:o,e.writeDoubleBE=i?o:n;function a(u,l){return t[0]=u[l],t[1]=u[l+1],t[2]=u[l+2],t[3]=u[l+3],t[4]=u[l+4],t[5]=u[l+5],t[6]=u[l+6],t[7]=u[l+7],r[0]}function s(u,l){return t[7]=u[l],t[6]=u[l+1],t[5]=u[l+2],t[4]=u[l+3],t[3]=u[l+4],t[2]=u[l+5],t[1]=u[l+6],t[0]=u[l+7],r[0]}e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function r(i,n,o,a,s,u){var l=a<0?1:0;if(l&&(a=-a),a===0)i(0,s,u+n),i(1/a>0?0:2147483648,s,u+o);else if(isNaN(a))i(0,s,u+n),i(2146959360,s,u+o);else if(a>17976931348623157e292)i(0,s,u+n),i((l<<31|2146435072)>>>0,s,u+o);else{var c;if(a<22250738585072014e-324)c=a/5e-324,i(c>>>0,s,u+n),i((l<<31|c/4294967296)>>>0,s,u+o);else{var d=Math.floor(Math.log(a)/Math.LN2);d===1024&&(d=1023),c=a*Math.pow(2,-d),i(c*4503599627370496>>>0,s,u+n),i((l<<31|d+1023<<20|c*1048576&1048575)>>>0,s,u+o)}}}e.writeDoubleLE=r.bind(null,writeUintLE,0,4),e.writeDoubleBE=r.bind(null,writeUintBE,4,0);function t(i,n,o,a,s){var u=i(a,s+n),l=i(a,s+o),c=(l>>31)*2+1,d=l>>>20&2047,f=4294967296*(l&1048575)+u;return d===2047?f?NaN:c*(1/0):d===0?c*5e-324*f:c*Math.pow(2,d-1075)*(f+4503599627370496)}e.readDoubleLE=t.bind(null,readUintLE,0,4),e.readDoubleBE=t.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function writeUintBE(e,r,t){r[t]=e>>>24,r[t+1]=e>>>16&255,r[t+2]=e>>>8&255,r[t+3]=e&255}function readUintLE(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24)>>>0}function readUintBE(e,r){return(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var r=e;r.length=function(i){for(var n=0,o=0,a=0;a<i.length;++a)o=i.charCodeAt(a),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(i.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},r.read=function(i,n,o){var a=o-n;if(a<1)return"";for(var s=null,u=[],l=0,c;n<o;)c=i[n++],c<128?u[l++]=c:c>191&&c<224?u[l++]=(c&31)<<6|i[n++]&63:c>239&&c<365?(c=((c&7)<<18|(i[n++]&63)<<12|(i[n++]&63)<<6|i[n++]&63)-65536,u[l++]=55296+(c>>10),u[l++]=56320+(c&1023)):u[l++]=(c&15)<<12|(i[n++]&63)<<6|i[n++]&63,l>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,u)),l=0);return s?(l&&s.push(String.fromCharCode.apply(String,u.slice(0,l))),s.join("")):String.fromCharCode.apply(String,u.slice(0,l))},r.write=function(i,n,o){for(var a=o,s,u,l=0;l<i.length;++l)s=i.charCodeAt(l),s<128?n[o++]=s:s<2048?(n[o++]=s>>6|192,n[o++]=s&63|128):(s&64512)===55296&&((u=i.charCodeAt(l+1))&64512)===56320?(s=65536+((s&1023)<<10)+(u&1023),++l,n[o++]=s>>18|240,n[o++]=s>>12&63|128,n[o++]=s>>6&63|128,n[o++]=s&63|128):(n[o++]=s>>12|224,n[o++]=s>>6&63|128,n[o++]=s&63|128);return o-a}})(utf8$2);var pool_1=pool;function pool(e,r,t){var i=t||8192,n=i>>>1,o=null,a=i;return function(u){if(u<1||u>n)return e(u);a+u>i&&(o=e(i),a=0);var l=r.call(o,a,a+=u);return a&7&&(a=(a|7)+1),l}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=r;var e=requireMinimal();function r(o,a){this.lo=o>>>0,this.hi=a>>>0}var t=r.zero=new r(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var i=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(a){if(a===0)return t;var s=a<0;s&&(a=-a);var u=a>>>0,l=(a-u)/4294967296>>>0;return s&&(l=~l>>>0,u=~u>>>0,++u>4294967295&&(u=0,++l>4294967295&&(l=0))),new r(u,l)},r.from=function(a){if(typeof a=="number")return r.fromNumber(a);if(e.isString(a))if(e.Long)a=e.Long.fromString(a);else return r.fromNumber(parseInt(a,10));return a.low||a.high?new r(a.low>>>0,a.high>>>0):t},r.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var s=~this.lo+1>>>0,u=~this.hi>>>0;return s||(u=u+1>>>0),-(s+u*4294967296)}return this.lo+this.hi*4294967296},r.prototype.toLong=function(a){return e.Long?new e.Long(this.lo|0,this.hi|0,Boolean(a)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(a)}};var n=String.prototype.charCodeAt;return r.fromHash=function(a){return a===i?t:new r((n.call(a,0)|n.call(a,1)<<8|n.call(a,2)<<16|n.call(a,3)<<24)>>>0,(n.call(a,4)|n.call(a,5)<<8|n.call(a,6)<<16|n.call(a,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},r.prototype.zzDecode=function(){var a=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},r.prototype.length=function(){var a=this.lo,s=(this.lo>>>28|this.hi<<4)>>>0,u=this.hi>>>24;return u===0?s===0?a<16384?a<128?1:2:a<2097152?3:4:s<16384?s<128?5:6:s<2097152?7:8:u<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var r=e;r.asPromise=aspromise,r.base64=base64$1,r.EventEmitter=eventemitter,r.float=float,r.inquire=inquire_1,r.utf8=utf8$2,r.pool=pool_1,r.LongBits=requireLongbits(),r.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},r.isString=function(o){return typeof o=="string"||o instanceof String},r.isObject=function(o){return o&&typeof o=="object"},r.isset=r.isSet=function(o,a){var s=o[a];return s!=null&&o.hasOwnProperty(a)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},r.Buffer=function(){try{var n=r.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(o){return typeof o=="number"?r.Buffer?r._Buffer_allocUnsafe(o):new r.Array(o):r.Buffer?r._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},r.Array=typeof Uint8Array<"u"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(o){return o?r.LongBits.from(o).toHash():r.LongBits.zeroHash},r.longFromHash=function(o,a){var s=r.LongBits.fromHash(o);return r.Long?r.Long.fromBits(s.lo,s.hi,a):s.toNumber(Boolean(a))};function t(n,o,a){for(var s=Object.keys(o),u=0;u<s.length;++u)(n[s[u]]===void 0||!a)&&(n[s[u]]=o[s[u]]);return n}r.merge=t,r.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function i(n){function o(a,s){if(!(this instanceof o))return new o(a,s);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&t(this,s)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(o){for(var a={},s=0;s<o.length;++s)a[o[s]]=1;return function(){for(var u=Object.keys(this),l=u.length-1;l>-1;--l)if(a[u[l]]===1&&this[u[l]]!==void 0&&this[u[l]]!==null)return u[l]}},r.oneOfSetter=function(o){return function(a){for(var s=0;s<o.length;++s)o[s]!==a&&delete this[o[s]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var n=r.Buffer;if(!n){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=n.from!==Uint8Array.from&&n.from||function(a,s){return new n(a,s)},r._Buffer_allocUnsafe=n.allocUnsafe||function(a){return new n(a)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,r,t){this.fn=e,this.len=r,this.next=void 0,this.val=t}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$3=function e(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$3();Writer$1.alloc=function e(r){return new util$4.Array(r)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function e(r,t,i){return this.tail=this.tail.next=new Op(r,t,i),this.len+=t,this};function writeByte(e,r,t){r[t]=e&255}function writeVarint32(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}function VarintOp(e,r){this.len=e,this.next=void 0,this.val=r}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(r){return this.len+=(this.tail=this.tail.next=new VarintOp((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this};Writer$1.prototype.int32=function e(r){return r<0?this._push(writeVarint64,10,LongBits$1.fromNumber(r)):this.uint32(r)};Writer$1.prototype.sint32=function e(r){return this.uint32((r<<1^r>>31)>>>0)};function writeVarint64(e,r,t){for(;e.hi;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}Writer$1.prototype.uint64=function e(r){var t=LongBits$1.from(r);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(r){var t=LongBits$1.from(r).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function e(r){return this._push(writeByte,1,r?1:0)};function writeFixed32(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}Writer$1.prototype.fixed32=function e(r){return this._push(writeFixed32,4,r>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(r){var t=LongBits$1.from(r);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(r){return this._push(util$4.float.writeFloatLE,4,r)};Writer$1.prototype.double=function e(r){return this._push(util$4.float.writeDoubleLE,8,r)};var writeBytes=util$4.Array.prototype.set?function e(r,t,i){t.set(r,i)}:function e(r,t,i){for(var n=0;n<r.length;++n)t[i+n]=r[n]};Writer$1.prototype.bytes=function e(r){var t=r.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(r)){var i=Writer$1.alloc(t=base64.length(r));base64.decode(r,i,0),r=i}return this.uint32(t)._push(writeBytes,t,r)};Writer$1.prototype.string=function e(r){var t=utf8$1.length(r);return t?this.uint32(t)._push(utf8$1.write,t,r):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function e(){var r=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=r.next,this.tail=t,this.len+=i),this};Writer$1.prototype.finish=function e(){for(var r=this.head.next,t=this.constructor.alloc(this.len),i=0;r;)r.fn(r.val,t,i),i+=r.len,r=r.next;return t};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$3(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(r,t,i){t.set(r,i)}:function(r,t,i){if(r.copy)r.copy(t,i,0,r.length);else for(var n=0;n<r.length;)t[i++]=r[n++]}};BufferWriter.prototype.bytes=function e(r){util$3.isString(r)&&(r=util$3._Buffer_from(r,"base64"));var t=r.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,r),this};function writeStringBuffer(e,r,t){e.length<40?util$3.utf8.write(e,r,t):r.utf8Write?r.utf8Write(e,t):r.write(e,t)}BufferWriter.prototype.string=function e(r){var t=util$3.Buffer.byteLength(r);return this.uint32(t),t&&this._push(writeStringBuffer,t,r),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,r){return RangeError("index out of range: "+e.pos+" + "+(r||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function e(r){if(r instanceof Uint8Array||Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")}:function e(r){if(Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")},create$2=function e(){return util$2.Buffer?function(t){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(t)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var r=4294967295;return function(){if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return r}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var r=this.uint32();return r>>>1^-(r&1)|0};function readLongVarint(){var e=new LongBits(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var r=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var r=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r};Reader$1.prototype.bytes=function e(){var r=this.uint32(),t=this.pos,i=this.pos+r;if(i>this.len)throw indexOutOfRange(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)};Reader$1.prototype.string=function e(){var r=this.bytes();return utf8.read(r,0,r.length)};Reader$1.prototype.skip=function e(r){if(typeof r=="number"){if(this.pos+r>this.len)throw indexOutOfRange(this,r);this.pos+=r}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create$2(),BufferReader$1._configure();var r=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[r](!1)},uint64:function(){return readLongVarint.call(this)[r](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[r](!1)},fixed64:function(){return readFixed64.call(this)[r](!0)},sfixed64:function(){return readFixed64.call(this)[r](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function e(){var r=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+r,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+r,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,r,t){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(t)}Service.prototype.rpcCall=function e(r,t,i,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(e,a,r,t,i,n);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(r,t[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(u,l){if(u)return a.emit("error",u,r),o(u);if(l===null){a.end(!0);return}if(!(l instanceof i))try{l=i[a.responseDelimited?"decodeDelimited":"decode"](l)}catch(c){return a.emit("error",c,r),o(c)}return a.emit("data",l,r),o(null,l)})}catch(s){a.emit("error",s,r),setTimeout(function(){o(s)},0);return}};Service.prototype.end=function e(r){return this.rpcImpl&&(r||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var r=e;r.Service=service})(rpc);var roots={};(function(e){var r=e;r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=requireMinimal(),r.rpc=rpc,r.roots=roots,r.configure=t;function t(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}t()})(indexMinimal);(function(e){e.exports=indexMinimal})(minimal$1);var GameStatus;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.PLAYER_WON=2]="PLAYER_WON",e[e.AI_WON=3]="AI_WON",e[e.TIE=4]="TIE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GameStatus||(GameStatus={}));function gameStatusFromJSON(e){switch(e){case 0:case"WAITING":return GameStatus.WAITING;case 1:case"RUNNING":return GameStatus.RUNNING;case 2:case"PLAYER_WON":return GameStatus.PLAYER_WON;case 3:case"AI_WON":return GameStatus.AI_WON;case 4:case"TIE":return GameStatus.TIE;case-1:case"UNRECOGNIZED":default:return GameStatus.UNRECOGNIZED}}function gameStatusToJSON(e){switch(e){case GameStatus.WAITING:return"WAITING";case GameStatus.RUNNING:return"RUNNING";case GameStatus.PLAYER_WON:return"PLAYER_WON";case GameStatus.AI_WON:return"AI_WON";case GameStatus.TIE:return"TIE";case GameStatus.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBasePlayer(){return{id:0,clientId:0,playerNumber:0,name:"",color:0,cursor:void 0,dead:!1}}const Player={encode(e,r=minimal$1.exports.Writer.create()){return e.id!==0&&r.uint32(8).uint32(e.id),e.clientId!==0&&r.uint32(16).uint32(e.clientId),e.playerNumber!==0&&r.uint32(24).uint32(e.playerNumber),e.name!==""&&r.uint32(34).string(e.name),e.color!==0&&r.uint32(40).uint32(e.color),e.cursor!==void 0&&Cursor.encode(e.cursor,r.uint32(50).fork()).ldelim(),e.dead===!0&&r.uint32(56).bool(e.dead),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBasePlayer();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.id=t.uint32();break;case 2:n.clientId=t.uint32();break;case 3:n.playerNumber=t.uint32();break;case 4:n.name=t.string();break;case 5:n.color=t.uint32();break;case 6:n.cursor=Cursor.decode(t,t.uint32());break;case 7:n.dead=t.bool();break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{id:isSet(e.id)?Number(e.id):0,clientId:isSet(e.clientId)?Number(e.clientId):0,playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?Number(e.color):0,cursor:isSet(e.cursor)?Cursor.fromJSON(e.cursor):void 0,dead:isSet(e.dead)?Boolean(e.dead):!1}},toJSON(e){const r={};return e.id!==void 0&&(r.id=Math.round(e.id)),e.clientId!==void 0&&(r.clientId=Math.round(e.clientId)),e.playerNumber!==void 0&&(r.playerNumber=Math.round(e.playerNumber)),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&(r.color=Math.round(e.color)),e.cursor!==void 0&&(r.cursor=e.cursor?Cursor.toJSON(e.cursor):void 0),e.dead!==void 0&&(r.dead=e.dead),r},fromPartial(e){var r,t,i,n,o,a;const s=createBasePlayer();return s.id=(r=e.id)!==null&&r!==void 0?r:0,s.clientId=(t=e.clientId)!==null&&t!==void 0?t:0,s.playerNumber=(i=e.playerNumber)!==null&&i!==void 0?i:0,s.name=(n=e.name)!==null&&n!==void 0?n:"",s.color=(o=e.color)!==null&&o!==void 0?o:0,s.cursor=e.cursor!==void 0&&e.cursor!==null?Cursor.fromPartial(e.cursor):void 0,s.dead=(a=e.dead)!==null&&a!==void 0?a:!1,s}};function createBaseCursor(){return{player:0,x:0,y:0}}const Cursor={encode(e,r=minimal$1.exports.Writer.create()){return e.player!==0&&r.uint32(8).uint32(e.player),e.x!==0&&r.uint32(16).uint32(e.x),e.y!==0&&r.uint32(24).uint32(e.y),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseCursor();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.player=t.uint32();break;case 2:n.x=t.uint32();break;case 3:n.y=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const r={};return e.player!==void 0&&(r.player=Math.round(e.player)),e.x!==void 0&&(r.x=Math.round(e.x)),e.y!==void 0&&(r.y=Math.round(e.y)),r},fromPartial(e){var r,t,i;const n=createBaseCursor();return n.player=(r=e.player)!==null&&r!==void 0?r:0,n.x=(t=e.x)!==null&&t!==void 0?t:0,n.y=(i=e.y)!==null&&i!==void 0?i:0,n}};function createBaseBall(){return{player:0,color:0,x:0,y:0}}const Ball={encode(e,r=minimal$1.exports.Writer.create()){return e.player!==0&&r.uint32(8).uint32(e.player),e.color!==0&&r.uint32(16).uint32(e.color),e.x!==0&&r.uint32(29).float(e.x),e.y!==0&&r.uint32(37).float(e.y),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseBall();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.player=t.uint32();break;case 2:n.color=t.uint32();break;case 3:n.x=t.float();break;case 4:n.y=t.float();break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,color:isSet(e.color)?Number(e.color):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const r={};return e.player!==void 0&&(r.player=Math.round(e.player)),e.color!==void 0&&(r.color=Math.round(e.color)),e.x!==void 0&&(r.x=e.x),e.y!==void 0&&(r.y=e.y),r},fromPartial(e){var r,t,i,n;const o=createBaseBall();return o.player=(r=e.player)!==null&&r!==void 0?r:0,o.color=(t=e.color)!==null&&t!==void 0?t:0,o.x=(i=e.x)!==null&&i!==void 0?i:0,o.y=(n=e.y)!==null&&n!==void 0?n:0,o}};function createBaseGameStart(){return{gameId:"",players:[],balls:[]}}const GameStart={encode(e,r=minimal$1.exports.Writer.create()){e.gameId!==""&&r.uint32(10).string(e.gameId);for(const t of e.players)Player.encode(t,r.uint32(18).fork()).ldelim();for(const t of e.balls)Ball.encode(t,r.uint32(26).fork()).ldelim();return r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseGameStart();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.players.push(Player.decode(t,t.uint32()));break;case 3:n.balls.push(Ball.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:Array.isArray(e==null?void 0:e.players)?e.players.map(r=>Player.fromJSON(r)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(r=>Ball.fromJSON(r)):[]}},toJSON(e){const r={};return e.gameId!==void 0&&(r.gameId=e.gameId),e.players?r.players=e.players.map(t=>t?Player.toJSON(t):void 0):r.players=[],e.balls?r.balls=e.balls.map(t=>t?Ball.toJSON(t):void 0):r.balls=[],r},fromPartial(e){var r,t,i;const n=createBaseGameStart();return n.gameId=(r=e.gameId)!==null&&r!==void 0?r:"",n.players=((t=e.players)===null||t===void 0?void 0:t.map(o=>Player.fromPartial(o)))||[],n.balls=((i=e.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseGameEnd(){return{gameId:"",result:0,winner:void 0}}const GameEnd={encode(e,r=minimal$1.exports.Writer.create()){return e.gameId!==""&&r.uint32(10).string(e.gameId),e.result!==0&&r.uint32(16).int32(e.result),e.winner!==void 0&&Player.encode(e.winner,r.uint32(26).fork()).ldelim(),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseGameEnd();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.result=t.int32();break;case 3:n.winner=Player.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",result:isSet(e.result)?gameStatusFromJSON(e.result):0,winner:isSet(e.winner)?Player.fromJSON(e.winner):void 0}},toJSON(e){const r={};return e.gameId!==void 0&&(r.gameId=e.gameId),e.result!==void 0&&(r.result=gameStatusToJSON(e.result)),e.winner!==void 0&&(r.winner=e.winner?Player.toJSON(e.winner):void 0),r},fromPartial(e){var r,t;const i=createBaseGameEnd();return i.gameId=(r=e.gameId)!==null&&r!==void 0?r:"",i.result=(t=e.result)!==null&&t!==void 0?t:0,i.winner=e.winner!==void 0&&e.winner!==null?Player.fromPartial(e.winner):void 0,i}};function createBaseTick(){return{gameId:"",cursors:[],balls:[]}}const Tick={encode(e,r=minimal$1.exports.Writer.create()){e.gameId!==""&&r.uint32(10).string(e.gameId);for(const t of e.cursors)Cursor.encode(t,r.uint32(18).fork()).ldelim();for(const t of e.balls)Ball.encode(t,r.uint32(26).fork()).ldelim();return r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseTick();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.cursors.push(Cursor.decode(t,t.uint32()));break;case 3:n.balls.push(Ball.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",cursors:Array.isArray(e==null?void 0:e.cursors)?e.cursors.map(r=>Cursor.fromJSON(r)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(r=>Ball.fromJSON(r)):[]}},toJSON(e){const r={};return e.gameId!==void 0&&(r.gameId=e.gameId),e.cursors?r.cursors=e.cursors.map(t=>t?Cursor.toJSON(t):void 0):r.cursors=[],e.balls?r.balls=e.balls.map(t=>t?Ball.toJSON(t):void 0):r.balls=[],r},fromPartial(e){var r,t,i;const n=createBaseTick();return n.gameId=(r=e.gameId)!==null&&r!==void 0?r:"",n.cursors=((t=e.cursors)===null||t===void 0?void 0:t.map(o=>Cursor.fromPartial(o)))||[],n.balls=((i=e.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseGameOptions(){return{serverTickRate:0,liquidPerPlayer:0,cursorSpeed:0,players:0}}const GameOptions={encode(e,r=minimal$1.exports.Writer.create()){return e.serverTickRate!==0&&r.uint32(8).uint32(e.serverTickRate),e.liquidPerPlayer!==0&&r.uint32(16).uint32(e.liquidPerPlayer),e.cursorSpeed!==0&&r.uint32(24).uint32(e.cursorSpeed),e.players!==0&&r.uint32(32).uint32(e.players),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBaseGameOptions();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.serverTickRate=t.uint32();break;case 2:n.liquidPerPlayer=t.uint32();break;case 3:n.cursorSpeed=t.uint32();break;case 4:n.players=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{serverTickRate:isSet(e.serverTickRate)?Number(e.serverTickRate):0,liquidPerPlayer:isSet(e.liquidPerPlayer)?Number(e.liquidPerPlayer):0,cursorSpeed:isSet(e.cursorSpeed)?Number(e.cursorSpeed):0,players:isSet(e.players)?Number(e.players):0}},toJSON(e){const r={};return e.serverTickRate!==void 0&&(r.serverTickRate=Math.round(e.serverTickRate)),e.liquidPerPlayer!==void 0&&(r.liquidPerPlayer=Math.round(e.liquidPerPlayer)),e.cursorSpeed!==void 0&&(r.cursorSpeed=Math.round(e.cursorSpeed)),e.players!==void 0&&(r.players=Math.round(e.players)),r},fromPartial(e){var r,t,i,n;const o=createBaseGameOptions();return o.serverTickRate=(r=e.serverTickRate)!==null&&r!==void 0?r:0,o.liquidPerPlayer=(t=e.liquidPerPlayer)!==null&&t!==void 0?t:0,o.cursorSpeed=(i=e.cursorSpeed)!==null&&i!==void 0?i:0,o.players=(n=e.players)!==null&&n!==void 0?n:0,o}};function createBasePlayerJoin(){return{gameId:void 0,playerId:0,name:"",color:"",options:void 0}}const PlayerJoin={encode(e,r=minimal$1.exports.Writer.create()){return e.gameId!==void 0&&r.uint32(10).string(e.gameId),e.playerId!==0&&r.uint32(16).uint32(e.playerId),e.name!==""&&r.uint32(26).string(e.name),e.color!==""&&r.uint32(34).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,r.uint32(42).fork()).ldelim(),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBasePlayerJoin();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.playerId=t.uint32();break;case 3:n.name=t.string();break;case 4:n.color=t.string();break;case 5:n.options=GameOptions.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):void 0,playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const r={};return e.gameId!==void 0&&(r.gameId=e.gameId),e.playerId!==void 0&&(r.playerId=Math.round(e.playerId)),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&(r.color=e.color),e.options!==void 0&&(r.options=e.options?GameOptions.toJSON(e.options):void 0),r},fromPartial(e){var r,t,i,n;const o=createBasePlayerJoin();return o.gameId=(r=e.gameId)!==null&&r!==void 0?r:void 0,o.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,o.name=(i=e.name)!==null&&i!==void 0?i:"",o.color=(n=e.color)!==null&&n!==void 0?n:"",o.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,o}};function createBasePlayerMove(){return{gameId:"",playerNumber:0,mouseX:0,mouseY:0}}const PlayerMove={encode(e,r=minimal$1.exports.Writer.create()){return e.gameId!==""&&r.uint32(10).string(e.gameId),e.playerNumber!==0&&r.uint32(16).uint32(e.playerNumber),e.mouseX!==0&&r.uint32(24).uint32(e.mouseX),e.mouseY!==0&&r.uint32(32).uint32(e.mouseY),r},decode(e,r){const t=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=r===void 0?t.len:t.pos+r;const n=createBasePlayerMove();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.playerNumber=t.uint32();break;case 3:n.mouseX=t.uint32();break;case 4:n.mouseY=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,mouseX:isSet(e.mouseX)?Number(e.mouseX):0,mouseY:isSet(e.mouseY)?Number(e.mouseY):0}},toJSON(e){const r={};return e.gameId!==void 0&&(r.gameId=e.gameId),e.playerNumber!==void 0&&(r.playerNumber=Math.round(e.playerNumber)),e.mouseX!==void 0&&(r.mouseX=Math.round(e.mouseX)),e.mouseY!==void 0&&(r.mouseY=Math.round(e.mouseY)),r},fromPartial(e){var r,t,i,n;const o=createBasePlayerMove();return o.gameId=(r=e.gameId)!==null&&r!==void 0?r:"",o.playerNumber=(t=e.playerNumber)!==null&&t!==void 0?t:0,o.mouseX=(i=e.mouseX)!==null&&i!==void 0?i:0,o.mouseY=(n=e.mouseY)!==null&&n!==void 0?n:0,o}};function isSet(e){return e!=null}const create$1=()=>new Map,setIfUndefined=(e,r,t)=>{let i=e.get(r);return i===void 0&&e.set(r,i=t()),i},create=()=>new Set,from=Array.from;class Observable{constructor(){this._observers=create$1()}on(r,t){setIfUndefined(this._observers,r,create).add(t)}once(r,t){const i=(...n)=>{this.off(r,i),t(...n)};this.on(r,i)}off(r,t){const i=this._observers.get(r);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(r))}emit(r,t){return from((this._observers.get(r)||create$1()).values()).forEach(i=>i(...t))}destroy(){this._observers=create$1()}}var __defProp=Object.defineProperty,__defNormalProp=(e,r,t)=>r in e?__defProp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,__publicField=(e,r,t)=>(__defNormalProp(e,typeof r!="symbol"?r+"":r,t),t),__accessCheck=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)},__privateGet=(e,r,t)=>(__accessCheck(e,r,"read from private field"),t?t.call(e):r.get(e)),__privateAdd=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},_obs;class Game{constructor(){__privateAdd(this,_obs,new Observable),__publicField(this,"players",[]),__publicField(this,"balls",[])}getPlayer(r){return this.players.find(t=>t.id===r)}startGame(r){this.players=r.players,this.balls=r.balls,__privateGet(this,_obs).emit("start",[r])}endGame(r){__privateGet(this,_obs).emit("end",[r]),__privateGet(this,_obs).destroy()}onStart(r){__privateGet(this,_obs).on("start",r)}onEnd(r){__privateGet(this,_obs).on("end",r)}onTick(r){__privateGet(this,_obs).on("tick",r)}receiveTick(r){r.cursors.forEach((t,i)=>{this.players[i].cursor=t}),__privateGet(this,_obs).emit("tick",[r])}}_obs=new WeakMap;const argbToHex=e=>"#"+e.toString(16).slice(2),allPlayers=writable([]),globalCursors=writable([]),balls=writable([]),mouse=writable({x:0,y:0});let cursors=new Map;const ballDiameter=16,canvas=document.querySelector("canvas"),context=canvas.getContext("2d");let gameElement;const width=writable(canvas.width=window.innerWidth),height=writable(canvas.height=window.innerHeight);let lastFrameTime=performance.now();const gfxActions={initGame(e,r,t){allPlayers.set(e),globalCursors.set(e.map(i=>({...i.cursor,targetX:i.cursor.x,targetY:i.cursor.y}))),balls.set(r.map(i=>({...i,targetX:i.x,targetY:i.y}))),gameElement=t,cursors=new Map(e.map(i=>{const n=document.createElement("div");return n.classList.add("cursor"),n.style.background=argbToHex(i.color),n.style.transform=`translate(${i.cursor.x}px, ${i.cursor.y}px)`,gameElement==null||gameElement.appendChild(n),[i.playerNumber,n]}))},destroy(){allPlayers.set([]),globalCursors.set([]),balls.set([]),Array.from(cursors.values()).forEach(e=>{gameElement==null||gameElement.removeChild(e)}),cursors=new Map},updateSize(e,r){width.set(e),height.set(r)},updateMouse(e,r){mouse.set({x:e,y:r})},updateBalls(e){balls.update(r=>r.map((t,i)=>({...t,targetX:e[i].x,targetY:e[i].y,color:e[i].color})))},draw(e){if(cursors.size===0)return;if(e===void 0){console.error("undefined playerNumber!");return}const r=performance.now()-lastFrameTime;lastFrameTime=performance.now();const t=.01*r,i=Math.min(1,.01*r);context.clearRect(0,0,get_store_value(width),get_store_value(height));const n=get_store_value(balls);for(let a=0;a<n.length;a++){const s=n[a];s.x+=(s.targetX-s.x)*t,s.y+=(s.targetY-s.y)*t,context.fillStyle=argbToHex(s.color),context.beginPath(),context.arc(s.x,s.y,ballDiameter/2,0,Math.PI*2,!1),context.fill()}const o=get_store_value(mouse);globalCursors.update(a=>a.map(s=>{s.player==e?(s.x=o.x,s.y=o.y):(s.x+=(s.targetX-s.x)*i,s.y+=(s.targetY-s.y)*i);const u=cursors.get(s.player);return u&&(u.style.transform=`translate(${s.x}px, ${s.y}px)`),s})),requestAnimationFrame(this.draw.bind(this,e))}},getEnv=e=>{if(!e)throw new Error("Undefined environment variable!");return e},WS_URL=getEnv("wss://liquid-war.fly.dev");var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,r=e*60,t=r*60,i=t*24,n=i*7,o=i*365.25;ms=function(c,d){d=d||{};var f=typeof c;if(f==="string"&&c.length>0)return a(c);if(f==="number"&&isFinite(c))return d.long?u(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function a(c){if(c=String(c),!(c.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(!!d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*t;case"minutes":case"minute":case"mins":case"min":case"m":return f*r;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(c){var d=Math.abs(c);return d>=i?Math.round(c/i)+"d":d>=t?Math.round(c/t)+"h":d>=r?Math.round(c/r)+"m":d>=e?Math.round(c/e)+"s":c+"ms"}function u(c){var d=Math.abs(c);return d>=i?l(c,d,i,"day"):d>=t?l(c,d,t,"hour"):d>=r?l(c,d,r,"minute"):d>=e?l(c,d,e,"second"):c+" ms"}function l(c,d,f,p){var h=d>=f*1.5;return Math.round(c/f)+" "+p+(h?"s":"")}return ms}function setup(e){t.debug=t,t.default=t,t.coerce=u,t.disable=o,t.enable=n,t.enabled=a,t.humanize=requireMs(),t.destroy=l,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function r(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(c){let d,f=null,p,h;function m(...y){if(!m.enabled)return;const g=m,_=Number(new Date),$=_-(d||_);g.diff=$,g.prev=d,g.curr=_,d=_,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let b=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(v,N)=>{if(v==="%%")return"%";b++;const w=t.formatters[N];if(typeof w=="function"){const I=y[b];v=w.call(g,I),y.splice(b,1),b--}return v}),t.formatArgs.call(g,y),(g.log||t.log).apply(g,y)}return m.namespace=c,m.useColors=t.useColors(),m.color=t.selectColor(c),m.extend=i,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==t.namespaces&&(p=t.namespaces,h=t.enabled(c)),h),set:y=>{f=y}}),typeof t.init=="function"&&t.init(m),m}function i(c,d){const f=t(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let d;const f=(typeof c=="string"?c:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(c=f[d].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function o(){const c=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let d,f;for(d=0,f=t.skips.length;d<f;d++)if(t.skips[d].test(c))return!1;for(d=0,f=t.names.length;d<f;d++)if(t.names[d].test(c))return!0;return!1}function s(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var common=setup;(function(e,r){r.formatArgs=i,r.save=n,r.load=o,r.useColors=t,r.storage=a(),r.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let c=0,d=0;u[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(c++,f==="%c"&&(d=c))}),u.splice(d,0,l)}r.log=console.debug||console.log||(()=>{});function n(u){try{u?r.storage.setItem("debug",u):r.storage.removeItem("debug")}catch{}}function o(){let u;try{u=r.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function a(){try{return localStorage}catch{}}e.exports=common(r);const{formatters:s}=e.exports;s.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(browser,browser.exports);const debug=browser.exports,logger=debug("game"),log={debug(e,r){r?logger(`%c DEBUG ${e}`,"color: #c563ff",r):logger(`%c DEBUG ${e}`,"color: #c563ff")},info(e,r){r?logger(e,r):logger(e)},warn(e,r){r?logger(`%c WARNING ${e}`,"color: #f3f32c",r):logger(`%c WARNING ${e}`,"color: #f3f32c")},error(e,r){r?logger(`%c ERROR ${e}`,"color: #ff4242",r):logger(`%c ERROR ${e}`,"color: #ff4242")}},enableDebug=e=>{e?debug.enable("game"):debug.disable()};var ClientMessageType=(e=>(e[e.join=0]="join",e[e.leave=1]="leave",e[e.move=2]="move",e))(ClientMessageType||{}),ServerMessageType=(e=>(e[e.start=0]="start",e[e.end=1]="end",e[e.tick=2]="tick",e[e.playerLeft=3]="playerLeft",e))(ServerMessageType||{});let socket=null;enableDebug(!1);const socketActions={connect(e,r){socket=new WebSocket(WS_URL),socket.binaryType="arraybuffer",socket.onopen=()=>{console.log("Connection successful :)"),e()},socket.onerror=t=>{console.debug("socket err!",t)},socket.onclose=()=>{console.log("Websocket disconnected !"),socket=null},socket.onmessage=t=>{const{data:i}=t,n=new Uint8Array(i).slice(1),o=new Uint8Array(i)[0];switch(o){case ServerMessageType.start:{log.debug("Read server start message");const a=GameStart.decode(n);r.startGame(a);break}case ServerMessageType.end:{log.debug("Read server end message");const a=GameEnd.decode(n);r.endGame(a);break}case ServerMessageType.tick:{log.debug("Read server tick message");const a=Tick.decode(n);r.receiveTick(a);break}default:log.error(`Unknown message type: ${o}`)}}},emitJoin(e){const r=PlayerJoin.encode(e).finish(),t=new Uint8Array(r.length+1);t.set([ClientMessageType.join],0),t.set(r,1),socket==null||socket.send(t)},emitMove(e){const r=PlayerMove.encode(e).finish(),t=new Uint8Array(r.length+1);t.set([ClientMessageType.move],0),t.set(r,1),socket==null||socket.send(t)}};let game=new Game;const playerId=Math.ceil(Math.random()*1e5);let localPlayer;const gameActions={runGame(e,r){socketActions.connect(()=>{socketActions.emitJoin({playerId,name:e,color:":-D",options:r})},game),game.onStart(t=>{var n,o;if((n=document.querySelector(".loading-menu"))==null||n.classList.add("hidden"),(o=document.querySelector("#game"))==null||o.classList.remove("hidden"),localPlayer=game.getPlayer(playerId),!localPlayer){console.error("No localPlayer!");return}const i=document.querySelector("#game");gfxActions.initGame(game.players,game.balls,i),gfxActions.draw(localPlayer.playerNumber)}),game.onEnd(t=>{var i,n,o,a;(i=document.querySelector("#game"))==null||i.classList.add("hidden"),(n=document.querySelector(".end-menu"))==null||n.classList.remove("hidden"),t.result===GameStatus.PLAYER_WON&&((o=t.winner)==null?void 0:o.id)===playerId?document.querySelector(".end-menu .game-winner").textContent="You won \u{1F3C6} :DD":t.result===GameStatus.PLAYER_WON&&((a=t.winner)==null?void 0:a.id)!==playerId?document.querySelector(".end-menu .game-winner").textContent="You lost \u{1F635}":t.result===GameStatus.TIE?document.querySelector(".end-menu .game-winner").textContent="Tie \u{1F926}\u200D\u2642\uFE0F":t.result===GameStatus.AI_WON?document.querySelector(".end-menu .game-winner").textContent="Computer won \u{1F916}":document.querySelector(".end-menu .game-winner").textContent=`Something weird happened: ${GameStatus}`,gfxActions.destroy()}),game.onTick(t=>{var n;const i=get_store_value(mouse);socketActions.emitMove({gameId:t.gameId,playerNumber:((n=game.getPlayer(playerId))==null?void 0:n.playerNumber)||0,mouseX:i.x,mouseY:i.y});for(let o=0;o<t.cursors.length;o++){const a=t.cursors[o],s=get_store_value(globalCursors).find(u=>u.player===a.player);s.targetX=a.x,s.targetY=a.y}gfxActions.updateBalls(t.balls)})}},style="";var C;(C=document.querySelector("#join-form"))==null||C.addEventListener("submit",e=>{var i,n;e.preventDefault(),(i=document.querySelector(".start-menu"))==null||i.classList.add("hidden"),(n=document.querySelector(".loading-menu"))==null||n.classList.remove("hidden");const r=document.querySelector("#name").value,t={serverTickRate:parseInt(document.querySelector("#serverTickRate").value)||0,liquidPerPlayer:parseInt(document.querySelector("#liquid").value)||0,cursorSpeed:parseInt(document.querySelector("#cursor").value)||0,players:parseInt(document.querySelector("#players").value)||0};gameActions.runGame(r,t)});var S;(S=document.querySelector("#play-again-btn"))==null||S.addEventListener("click",()=>{var e,r;(e=document.querySelector(".end-menu"))==null||e.classList.add("hidden"),(r=document.querySelector(".start-menu"))==null||r.classList.remove("hidden")});window.onresize=()=>{gfxActions.updateSize(window.innerWidth,window.innerHeight)};window.addEventListener("mousemove",function(e){gfxActions.updateMouse(e.clientX,e.clientY)},!1);
