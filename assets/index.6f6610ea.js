(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(r,e){for(var t=new Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)t[i++]=arguments[n++];return new Promise(function(c,s){t[i]=function(u){if(o)if(o=!1,u)s(u);else{for(var d=new Array(arguments.length-1),f=0;f<d.length;)d[f++]=arguments[f];c.apply(null,d)}};try{r.apply(e||null,t)}catch(l){o&&(o=!1,s(l))}})}var base64$1={};(function(r){var e=r;e.length=function(c){var s=c.length;if(!s)return 0;for(var l=0;--s%4>1&&c.charAt(s)==="=";)++l;return Math.ceil(c.length*3)/4-l};for(var t=new Array(64),i=new Array(123),n=0;n<64;)i[t[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;e.encode=function(c,s,l){for(var u=null,d=[],f=0,p=0,h;s<l;){var m=c[s++];switch(p){case 0:d[f++]=t[m>>2],h=(m&3)<<4,p=1;break;case 1:d[f++]=t[h|m>>4],h=(m&15)<<2,p=2;break;case 2:d[f++]=t[h|m>>6],d[f++]=t[m&63],p=0;break}f>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,d)),f=0)}return p&&(d[f++]=t[h],d[f++]=61,p===1&&(d[f++]=61)),u?(f&&u.push(String.fromCharCode.apply(String,d.slice(0,f))),u.join("")):String.fromCharCode.apply(String,d.slice(0,f))};var o="invalid encoding";e.decode=function(c,s,l){for(var u=l,d=0,f,p=0;p<c.length;){var h=c.charCodeAt(p++);if(h===61&&d>1)break;if((h=i[h])===void 0)throw Error(o);switch(d){case 0:f=h,d=1;break;case 1:s[l++]=f<<2|(h&48)>>4,f=h,d=2;break;case 2:s[l++]=(f&15)<<4|(h&60)>>2,f=h,d=3;break;case 3:s[l++]=(f&3)<<6|h,d=0;break}}if(d===1)throw Error(o);return l-u},e.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this};EventEmitter.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this};EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this};var float=factory(factory);function factory(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),i=t[3]===128;function n(s,l,u){e[0]=s,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3]}function o(s,l,u){e[0]=s,l[u]=t[3],l[u+1]=t[2],l[u+2]=t[1],l[u+3]=t[0]}r.writeFloatLE=i?n:o,r.writeFloatBE=i?o:n;function a(s,l){return t[0]=s[l],t[1]=s[l+1],t[2]=s[l+2],t[3]=s[l+3],e[0]}function c(s,l){return t[3]=s[l],t[2]=s[l+1],t[1]=s[l+2],t[0]=s[l+3],e[0]}r.readFloatLE=i?a:c,r.readFloatBE=i?c:a}():function(){function e(i,n,o,a){var c=n<0?1:0;if(c&&(n=-n),n===0)i(1/n>0?0:2147483648,o,a);else if(isNaN(n))i(2143289344,o,a);else if(n>34028234663852886e22)i((c<<31|2139095040)>>>0,o,a);else if(n<11754943508222875e-54)i((c<<31|Math.round(n/1401298464324817e-60))>>>0,o,a);else{var s=Math.floor(Math.log(n)/Math.LN2),l=Math.round(n*Math.pow(2,-s)*8388608)&8388607;i((c<<31|s+127<<23|l)>>>0,o,a)}}r.writeFloatLE=e.bind(null,writeUintLE),r.writeFloatBE=e.bind(null,writeUintBE);function t(i,n,o){var a=i(n,o),c=(a>>31)*2+1,s=a>>>23&255,l=a&8388607;return s===255?l?NaN:c*(1/0):s===0?c*1401298464324817e-60*l:c*Math.pow(2,s-150)*(l+8388608)}r.readFloatLE=t.bind(null,readUintLE),r.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),i=t[7]===128;function n(s,l,u){e[0]=s,l[u]=t[0],l[u+1]=t[1],l[u+2]=t[2],l[u+3]=t[3],l[u+4]=t[4],l[u+5]=t[5],l[u+6]=t[6],l[u+7]=t[7]}function o(s,l,u){e[0]=s,l[u]=t[7],l[u+1]=t[6],l[u+2]=t[5],l[u+3]=t[4],l[u+4]=t[3],l[u+5]=t[2],l[u+6]=t[1],l[u+7]=t[0]}r.writeDoubleLE=i?n:o,r.writeDoubleBE=i?o:n;function a(s,l){return t[0]=s[l],t[1]=s[l+1],t[2]=s[l+2],t[3]=s[l+3],t[4]=s[l+4],t[5]=s[l+5],t[6]=s[l+6],t[7]=s[l+7],e[0]}function c(s,l){return t[7]=s[l],t[6]=s[l+1],t[5]=s[l+2],t[4]=s[l+3],t[3]=s[l+4],t[2]=s[l+5],t[1]=s[l+6],t[0]=s[l+7],e[0]}r.readDoubleLE=i?a:c,r.readDoubleBE=i?c:a}():function(){function e(i,n,o,a,c,s){var l=a<0?1:0;if(l&&(a=-a),a===0)i(0,c,s+n),i(1/a>0?0:2147483648,c,s+o);else if(isNaN(a))i(0,c,s+n),i(2146959360,c,s+o);else if(a>17976931348623157e292)i(0,c,s+n),i((l<<31|2146435072)>>>0,c,s+o);else{var u;if(a<22250738585072014e-324)u=a/5e-324,i(u>>>0,c,s+n),i((l<<31|u/4294967296)>>>0,c,s+o);else{var d=Math.floor(Math.log(a)/Math.LN2);d===1024&&(d=1023),u=a*Math.pow(2,-d),i(u*4503599627370496>>>0,c,s+n),i((l<<31|d+1023<<20|u*1048576&1048575)>>>0,c,s+o)}}}r.writeDoubleLE=e.bind(null,writeUintLE,0,4),r.writeDoubleBE=e.bind(null,writeUintBE,4,0);function t(i,n,o,a,c){var s=i(a,c+n),l=i(a,c+o),u=(l>>31)*2+1,d=l>>>20&2047,f=4294967296*(l&1048575)+s;return d===2047?f?NaN:u*(1/0):d===0?u*5e-324*f:u*Math.pow(2,d-1075)*(f+4503599627370496)}r.readDoubleLE=t.bind(null,readUintLE,0,4),r.readDoubleBE=t.bind(null,readUintBE,4,0)}(),r}function writeUintLE(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function writeUintBE(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function readUintLE(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function readUintBE(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}var utf8$2={};(function(r){var e=r;e.length=function(i){for(var n=0,o=0,a=0;a<i.length;++a)o=i.charCodeAt(a),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(i.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},e.read=function(i,n,o){var a=o-n;if(a<1)return"";for(var c=null,s=[],l=0,u;n<o;)u=i[n++],u<128?s[l++]=u:u>191&&u<224?s[l++]=(u&31)<<6|i[n++]&63:u>239&&u<365?(u=((u&7)<<18|(i[n++]&63)<<12|(i[n++]&63)<<6|i[n++]&63)-65536,s[l++]=55296+(u>>10),s[l++]=56320+(u&1023)):s[l++]=(u&15)<<12|(i[n++]&63)<<6|i[n++]&63,l>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,s)),l=0);return c?(l&&c.push(String.fromCharCode.apply(String,s.slice(0,l))),c.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(i,n,o){for(var a=o,c,s,l=0;l<i.length;++l)c=i.charCodeAt(l),c<128?n[o++]=c:c<2048?(n[o++]=c>>6|192,n[o++]=c&63|128):(c&64512)===55296&&((s=i.charCodeAt(l+1))&64512)===56320?(c=65536+((c&1023)<<10)+(s&1023),++l,n[o++]=c>>18|240,n[o++]=c>>12&63|128,n[o++]=c>>6&63|128,n[o++]=c&63|128):(n[o++]=c>>12|224,n[o++]=c>>6&63|128,n[o++]=c&63|128);return o-a}})(utf8$2);var pool_1=pool;function pool(r,e,t){var i=t||8192,n=i>>>1,o=null,a=i;return function(s){if(s<1||s>n)return r(s);a+s>i&&(o=r(i),a=0);var l=e.call(o,a,a+=s);return a&7&&(a=(a|7)+1),l}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var r=requireMinimal();function e(o,a){this.lo=o>>>0,this.hi=a>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var i=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(a){if(a===0)return t;var c=a<0;c&&(a=-a);var s=a>>>0,l=(a-s)/4294967296>>>0;return c&&(l=~l>>>0,s=~s>>>0,++s>4294967295&&(s=0,++l>4294967295&&(l=0))),new e(s,l)},e.from=function(a){if(typeof a=="number")return e.fromNumber(a);if(r.isString(a))if(r.Long)a=r.Long.fromString(a);else return e.fromNumber(parseInt(a,10));return a.low||a.high?new e(a.low>>>0,a.high>>>0):t},e.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var c=~this.lo+1>>>0,s=~this.hi>>>0;return c||(s=s+1>>>0),-(c+s*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(a){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(a)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(a)}};var n=String.prototype.charCodeAt;return e.fromHash=function(a){return a===i?t:new e((n.call(a,0)|n.call(a,1)<<8|n.call(a,2)<<16|n.call(a,3)<<24)>>>0,(n.call(a,4)|n.call(a,5)<<8|n.call(a,6)<<16|n.call(a,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},e.prototype.zzDecode=function(){var a=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},e.prototype.length=function(){var a=this.lo,c=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?c===0?a<16384?a<128?1:2:a<2097152?3:4:c<16384?c<128?5:6:c<2097152?7:8:s<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(r){var e=r;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},e.isString=function(o){return typeof o=="string"||o instanceof String},e.isObject=function(o){return o&&typeof o=="object"},e.isset=e.isSet=function(o,a){var c=o[a];return c!=null&&o.hasOwnProperty(a)?typeof c!="object"||(Array.isArray(c)?c.length:Object.keys(c).length)>0:!1},e.Buffer=function(){try{var n=e.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(o){return typeof o=="number"?e.Buffer?e._Buffer_allocUnsafe(o):new e.Array(o):e.Buffer?e._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(o){return o?e.LongBits.from(o).toHash():e.LongBits.zeroHash},e.longFromHash=function(o,a){var c=e.LongBits.fromHash(o);return e.Long?e.Long.fromBits(c.lo,c.hi,a):c.toNumber(Boolean(a))};function t(n,o,a){for(var c=Object.keys(o),s=0;s<c.length;++s)(n[c[s]]===void 0||!a)&&(n[c[s]]=o[c[s]]);return n}e.merge=t,e.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function i(n){function o(a,c){if(!(this instanceof o))return new o(a,c);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),c&&t(this,c)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}e.newError=i,e.ProtocolError=i("ProtocolError"),e.oneOfGetter=function(o){for(var a={},c=0;c<o.length;++c)a[o[c]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(a[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(o){return function(a){for(var c=0;c<o.length;++c)o[c]!==a&&delete this[o[c]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var n=e.Buffer;if(!n){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=n.from!==Uint8Array.from&&n.from||function(a,c){return new n(a,c)},e._Buffer_allocUnsafe=n.allocUnsafe||function(a){return new n(a)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function noop(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$3=function r(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$3();Writer$1.alloc=function r(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function r(e,t,i){return this.tail=this.tail.next=new Op(e,t,i),this.len+=t,this};function writeByte(r,e,t){e[t]=r&255}function writeVarint32(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function VarintOp(r,e){this.len=r,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function r(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function r(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function r(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}Writer$1.prototype.uint64=function r(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function r(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function r(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}Writer$1.prototype.fixed32=function r(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function r(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function r(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function r(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function r(e,t,i){t.set(e,i)}:function r(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};Writer$1.prototype.bytes=function r(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var i=Writer$1.alloc(t=base64.length(e));base64.decode(e,i,0),e=i}return this.uint32(t)._push(writeBytes,t,e)};Writer$1.prototype.string=function r(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function r(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function r(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function r(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this};Writer$1.prototype.finish=function r(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t};Writer$1._configure=function(r){BufferWriter$1=r,Writer$1.create=create$3(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}};BufferWriter.prototype.bytes=function r(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(r,e,t){r.length<40?util$3.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}BufferWriter.prototype.string=function r(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Reader$1(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array<"u"?function r(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function r(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$2=function r(){return util$2.Buffer?function(t){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(t)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function r(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function r(){return this.uint32()|0};Reader$1.prototype.sint32=function r(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var r=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function r(){return this.uint32()!==0};function readFixed32_end(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function r(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function r(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)};Reader$1.prototype.string=function r(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function r(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Reader$1._configure=function(r){BufferReader$1=r,Reader$1.create=create$2(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(r){Reader.call(this,r)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function r(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Service.prototype.rpcCall=function r(e,t,i,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(r,a,e,t,i,n);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(e,t[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(s,l){if(s)return a.emit("error",s,e),o(s);if(l===null){a.end(!0);return}if(!(l instanceof i))try{l=i[a.responseDelimited?"decodeDelimited":"decode"](l)}catch(u){return a.emit("error",u,e),o(u)}return a.emit("data",l,e),o(null,l)})}catch(c){a.emit("error",c,e),setTimeout(function(){o(c)},0);return}};Service.prototype.end=function r(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(r){var e=r;e.Service=service})(rpc);var roots={};(function(r){var e=r;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);(function(r){r.exports=indexMinimal})(minimal$1);function createBasePlayer(){return{id:0,clientId:0,playerNumber:0,name:"",color:"",cursor:void 0}}const Player={encode(r,e=minimal$1.exports.Writer.create()){return r.id!==0&&e.uint32(8).uint32(r.id),r.clientId!==0&&e.uint32(16).uint32(r.clientId),r.playerNumber!==0&&e.uint32(24).uint32(r.playerNumber),r.name!==""&&e.uint32(34).string(r.name),r.color!==""&&e.uint32(42).string(r.color),r.cursor!==void 0&&Cursor.encode(r.cursor,e.uint32(50).fork()).ldelim(),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBasePlayer();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.id=t.uint32();break;case 2:n.clientId=t.uint32();break;case 3:n.playerNumber=t.uint32();break;case 4:n.name=t.string();break;case 5:n.color=t.string();break;case 6:n.cursor=Cursor.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{id:isSet(r.id)?Number(r.id):0,clientId:isSet(r.clientId)?Number(r.clientId):0,playerNumber:isSet(r.playerNumber)?Number(r.playerNumber):0,name:isSet(r.name)?String(r.name):"",color:isSet(r.color)?String(r.color):"",cursor:isSet(r.cursor)?Cursor.fromJSON(r.cursor):void 0}},toJSON(r){const e={};return r.id!==void 0&&(e.id=Math.round(r.id)),r.clientId!==void 0&&(e.clientId=Math.round(r.clientId)),r.playerNumber!==void 0&&(e.playerNumber=Math.round(r.playerNumber)),r.name!==void 0&&(e.name=r.name),r.color!==void 0&&(e.color=r.color),r.cursor!==void 0&&(e.cursor=r.cursor?Cursor.toJSON(r.cursor):void 0),e},fromPartial(r){var e,t,i,n,o;const a=createBasePlayer();return a.id=(e=r.id)!==null&&e!==void 0?e:0,a.clientId=(t=r.clientId)!==null&&t!==void 0?t:0,a.playerNumber=(i=r.playerNumber)!==null&&i!==void 0?i:0,a.name=(n=r.name)!==null&&n!==void 0?n:"",a.color=(o=r.color)!==null&&o!==void 0?o:"",a.cursor=r.cursor!==void 0&&r.cursor!==null?Cursor.fromPartial(r.cursor):void 0,a}};function createBaseCursor(){return{player:0,x:0,y:0}}const Cursor={encode(r,e=minimal$1.exports.Writer.create()){return r.player!==0&&e.uint32(8).uint32(r.player),r.x!==0&&e.uint32(16).uint32(r.x),r.y!==0&&e.uint32(24).uint32(r.y),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBaseCursor();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.player=t.uint32();break;case 2:n.x=t.uint32();break;case 3:n.y=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{player:isSet(r.player)?Number(r.player):0,x:isSet(r.x)?Number(r.x):0,y:isSet(r.y)?Number(r.y):0}},toJSON(r){const e={};return r.player!==void 0&&(e.player=Math.round(r.player)),r.x!==void 0&&(e.x=Math.round(r.x)),r.y!==void 0&&(e.y=Math.round(r.y)),e},fromPartial(r){var e,t,i;const n=createBaseCursor();return n.player=(e=r.player)!==null&&e!==void 0?e:0,n.x=(t=r.x)!==null&&t!==void 0?t:0,n.y=(i=r.y)!==null&&i!==void 0?i:0,n}};function createBaseBall(){return{player:0,color:"",x:0,y:0}}const Ball={encode(r,e=minimal$1.exports.Writer.create()){return r.player!==0&&e.uint32(8).uint32(r.player),r.color!==""&&e.uint32(18).string(r.color),r.x!==0&&e.uint32(29).float(r.x),r.y!==0&&e.uint32(37).float(r.y),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBaseBall();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.player=t.uint32();break;case 2:n.color=t.string();break;case 3:n.x=t.float();break;case 4:n.y=t.float();break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{player:isSet(r.player)?Number(r.player):0,color:isSet(r.color)?String(r.color):"",x:isSet(r.x)?Number(r.x):0,y:isSet(r.y)?Number(r.y):0}},toJSON(r){const e={};return r.player!==void 0&&(e.player=Math.round(r.player)),r.color!==void 0&&(e.color=r.color),r.x!==void 0&&(e.x=r.x),r.y!==void 0&&(e.y=r.y),e},fromPartial(r){var e,t,i,n;const o=createBaseBall();return o.player=(e=r.player)!==null&&e!==void 0?e:0,o.color=(t=r.color)!==null&&t!==void 0?t:"",o.x=(i=r.x)!==null&&i!==void 0?i:0,o.y=(n=r.y)!==null&&n!==void 0?n:0,o}};function createBaseGameStart(){return{gameId:"",players:[],balls:[]}}const GameStart={encode(r,e=minimal$1.exports.Writer.create()){r.gameId!==""&&e.uint32(10).string(r.gameId);for(const t of r.players)Player.encode(t,e.uint32(18).fork()).ldelim();for(const t of r.balls)Ball.encode(t,e.uint32(26).fork()).ldelim();return e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBaseGameStart();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.players.push(Player.decode(t,t.uint32()));break;case 3:n.balls.push(Ball.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{gameId:isSet(r.gameId)?String(r.gameId):"",players:Array.isArray(r==null?void 0:r.players)?r.players.map(e=>Player.fromJSON(e)):[],balls:Array.isArray(r==null?void 0:r.balls)?r.balls.map(e=>Ball.fromJSON(e)):[]}},toJSON(r){const e={};return r.gameId!==void 0&&(e.gameId=r.gameId),r.players?e.players=r.players.map(t=>t?Player.toJSON(t):void 0):e.players=[],r.balls?e.balls=r.balls.map(t=>t?Ball.toJSON(t):void 0):e.balls=[],e},fromPartial(r){var e,t,i;const n=createBaseGameStart();return n.gameId=(e=r.gameId)!==null&&e!==void 0?e:"",n.players=((t=r.players)===null||t===void 0?void 0:t.map(o=>Player.fromPartial(o)))||[],n.balls=((i=r.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseTick(){return{gameId:"",cursors:[],balls:[]}}const Tick={encode(r,e=minimal$1.exports.Writer.create()){r.gameId!==""&&e.uint32(10).string(r.gameId);for(const t of r.cursors)Cursor.encode(t,e.uint32(18).fork()).ldelim();for(const t of r.balls)Ball.encode(t,e.uint32(26).fork()).ldelim();return e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBaseTick();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.cursors.push(Cursor.decode(t,t.uint32()));break;case 3:n.balls.push(Ball.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{gameId:isSet(r.gameId)?String(r.gameId):"",cursors:Array.isArray(r==null?void 0:r.cursors)?r.cursors.map(e=>Cursor.fromJSON(e)):[],balls:Array.isArray(r==null?void 0:r.balls)?r.balls.map(e=>Ball.fromJSON(e)):[]}},toJSON(r){const e={};return r.gameId!==void 0&&(e.gameId=r.gameId),r.cursors?e.cursors=r.cursors.map(t=>t?Cursor.toJSON(t):void 0):e.cursors=[],r.balls?e.balls=r.balls.map(t=>t?Ball.toJSON(t):void 0):e.balls=[],e},fromPartial(r){var e,t,i;const n=createBaseTick();return n.gameId=(e=r.gameId)!==null&&e!==void 0?e:"",n.cursors=((t=r.cursors)===null||t===void 0?void 0:t.map(o=>Cursor.fromPartial(o)))||[],n.balls=((i=r.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],n}};function createBaseGameOptions(){return{fps:0,liquidPerPlayer:0,cursorSpeed:0,players:0}}const GameOptions={encode(r,e=minimal$1.exports.Writer.create()){return r.fps!==0&&e.uint32(8).uint32(r.fps),r.liquidPerPlayer!==0&&e.uint32(16).uint32(r.liquidPerPlayer),r.cursorSpeed!==0&&e.uint32(24).uint32(r.cursorSpeed),r.players!==0&&e.uint32(32).uint32(r.players),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBaseGameOptions();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.fps=t.uint32();break;case 2:n.liquidPerPlayer=t.uint32();break;case 3:n.cursorSpeed=t.uint32();break;case 4:n.players=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{fps:isSet(r.fps)?Number(r.fps):0,liquidPerPlayer:isSet(r.liquidPerPlayer)?Number(r.liquidPerPlayer):0,cursorSpeed:isSet(r.cursorSpeed)?Number(r.cursorSpeed):0,players:isSet(r.players)?Number(r.players):0}},toJSON(r){const e={};return r.fps!==void 0&&(e.fps=Math.round(r.fps)),r.liquidPerPlayer!==void 0&&(e.liquidPerPlayer=Math.round(r.liquidPerPlayer)),r.cursorSpeed!==void 0&&(e.cursorSpeed=Math.round(r.cursorSpeed)),r.players!==void 0&&(e.players=Math.round(r.players)),e},fromPartial(r){var e,t,i,n;const o=createBaseGameOptions();return o.fps=(e=r.fps)!==null&&e!==void 0?e:0,o.liquidPerPlayer=(t=r.liquidPerPlayer)!==null&&t!==void 0?t:0,o.cursorSpeed=(i=r.cursorSpeed)!==null&&i!==void 0?i:0,o.players=(n=r.players)!==null&&n!==void 0?n:0,o}};function createBasePlayerJoin(){return{gameId:void 0,playerId:0,name:"",color:"",options:void 0}}const PlayerJoin={encode(r,e=minimal$1.exports.Writer.create()){return r.gameId!==void 0&&e.uint32(10).string(r.gameId),r.playerId!==0&&e.uint32(16).uint32(r.playerId),r.name!==""&&e.uint32(26).string(r.name),r.color!==""&&e.uint32(34).string(r.color),r.options!==void 0&&GameOptions.encode(r.options,e.uint32(42).fork()).ldelim(),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBasePlayerJoin();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.playerId=t.uint32();break;case 3:n.name=t.string();break;case 4:n.color=t.string();break;case 5:n.options=GameOptions.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{gameId:isSet(r.gameId)?String(r.gameId):void 0,playerId:isSet(r.playerId)?Number(r.playerId):0,name:isSet(r.name)?String(r.name):"",color:isSet(r.color)?String(r.color):"",options:isSet(r.options)?GameOptions.fromJSON(r.options):void 0}},toJSON(r){const e={};return r.gameId!==void 0&&(e.gameId=r.gameId),r.playerId!==void 0&&(e.playerId=Math.round(r.playerId)),r.name!==void 0&&(e.name=r.name),r.color!==void 0&&(e.color=r.color),r.options!==void 0&&(e.options=r.options?GameOptions.toJSON(r.options):void 0),e},fromPartial(r){var e,t,i,n;const o=createBasePlayerJoin();return o.gameId=(e=r.gameId)!==null&&e!==void 0?e:void 0,o.playerId=(t=r.playerId)!==null&&t!==void 0?t:0,o.name=(i=r.name)!==null&&i!==void 0?i:"",o.color=(n=r.color)!==null&&n!==void 0?n:"",o.options=r.options!==void 0&&r.options!==null?GameOptions.fromPartial(r.options):void 0,o}};function createBasePlayerMove(){return{gameId:"",playerNumber:0,mouseX:0,mouseY:0}}const PlayerMove={encode(r,e=minimal$1.exports.Writer.create()){return r.gameId!==""&&e.uint32(10).string(r.gameId),r.playerNumber!==0&&e.uint32(16).uint32(r.playerNumber),r.mouseX!==0&&e.uint32(24).uint32(r.mouseX),r.mouseY!==0&&e.uint32(32).uint32(r.mouseY),e},decode(r,e){const t=r instanceof minimal$1.exports.Reader?r:new minimal$1.exports.Reader(r);let i=e===void 0?t.len:t.pos+e;const n=createBasePlayerMove();for(;t.pos<i;){const o=t.uint32();switch(o>>>3){case 1:n.gameId=t.string();break;case 2:n.playerNumber=t.uint32();break;case 3:n.mouseX=t.uint32();break;case 4:n.mouseY=t.uint32();break;default:t.skipType(o&7);break}}return n},fromJSON(r){return{gameId:isSet(r.gameId)?String(r.gameId):"",playerNumber:isSet(r.playerNumber)?Number(r.playerNumber):0,mouseX:isSet(r.mouseX)?Number(r.mouseX):0,mouseY:isSet(r.mouseY)?Number(r.mouseY):0}},toJSON(r){const e={};return r.gameId!==void 0&&(e.gameId=r.gameId),r.playerNumber!==void 0&&(e.playerNumber=Math.round(r.playerNumber)),r.mouseX!==void 0&&(e.mouseX=Math.round(r.mouseX)),r.mouseY!==void 0&&(e.mouseY=Math.round(r.mouseY)),e},fromPartial(r){var e,t,i,n;const o=createBasePlayerMove();return o.gameId=(e=r.gameId)!==null&&e!==void 0?e:"",o.playerNumber=(t=r.playerNumber)!==null&&t!==void 0?t:0,o.mouseX=(i=r.mouseX)!==null&&i!==void 0?i:0,o.mouseY=(n=r.mouseY)!==null&&n!==void 0?n:0,o}};function isSet(r){return r!=null}const getEnv=r=>{if(!r)throw new Error("Undefined environment variable!");return r},WS_URL=getEnv("wss://liquid-war.fly.dev");var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,e=r*60,t=e*60,i=t*24,n=i*7,o=i*365.25;ms=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return a(u);if(f==="number"&&isFinite(u))return d.long?s(u):c(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(!!d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*o;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*t;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(u){var d=Math.abs(u);return d>=i?Math.round(u/i)+"d":d>=t?Math.round(u/t)+"h":d>=e?Math.round(u/e)+"m":d>=r?Math.round(u/r)+"s":u+"ms"}function s(u){var d=Math.abs(u);return d>=i?l(u,d,i,"day"):d>=t?l(u,d,t,"hour"):d>=e?l(u,d,e,"minute"):d>=r?l(u,d,r,"second"):u+" ms"}function l(u,d,f,p){var h=d>=f*1.5;return Math.round(u/f)+" "+p+(h?"s":"")}return ms}function setup(r){t.debug=t,t.default=t,t.coerce=s,t.disable=o,t.enable=n,t.enabled=a,t.humanize=requireMs(),t.destroy=l,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,f=null,p,h;function m(...y){if(!m.enabled)return;const g=m,b=Number(new Date),$=b-(d||b);g.diff=$,g.prev=d,g.curr=b,d=b,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let w=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(_,x)=>{if(_==="%%")return"%";w++;const v=t.formatters[x];if(typeof v=="function"){const S=y[w];_=v.call(g,S),y.splice(w,1),w--}return _}),t.formatArgs.call(g,y),(g.log||t.log).apply(g,y)}return m.namespace=u,m.useColors=t.useColors(),m.color=t.selectColor(u),m.extend=i,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==t.namespaces&&(p=t.namespaces,h=t.enabled(u)),h),set:y=>{f=y}}),typeof t.init=="function"&&t.init(m),m}function i(u,d){const f=t(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function n(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d;const f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...t.names.map(c),...t.skips.map(c).map(d=>"-"+d)].join(",");return t.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=t.skips.length;d<f;d++)if(t.skips[d].test(u))return!1;for(d=0,f=t.names.length;d<f;d++)if(t.names[d].test(u))return!0;return!1}function c(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function s(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var common=setup;(function(r,e){e.formatArgs=i,e.save=n,e.load=o,e.useColors=t,e.storage=a(),e.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;s.splice(1,0,l,"color: inherit");let u=0,d=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(d=u))}),s.splice(d,0,l)}e.log=console.debug||console.log||(()=>{});function n(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}}function o(){let s;try{s=e.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}function a(){try{return localStorage}catch{}}r.exports=common(e);const{formatters:c}=r.exports;c.j=function(s){try{return JSON.stringify(s)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(browser,browser.exports);const debug=browser.exports,logger=debug("game"),log={debug(r,e){e?logger(`%c DEBUG ${r}`,"color: #c563ff",e):logger(`%c DEBUG ${r}`,"color: #c563ff")},info(r,e){e?logger(r,e):logger(r)},warn(r,e){e?logger(`%c WARNING ${r}`,"color: #f3f32c",e):logger(`%c WARNING ${r}`,"color: #f3f32c")},error(r,e){e?logger(`%c ERROR ${r}`,"color: #ff4242",e):logger(`%c ERROR ${r}`,"color: #ff4242")}},enableDebug=r=>{r?debug.enable("game"):debug.disable()};var ClientMessageType=(r=>(r[r.join=0]="join",r[r.leave=1]="leave",r[r.move=2]="move",r))(ClientMessageType||{}),ServerMessageType=(r=>(r[r.start=0]="start",r[r.end=1]="end",r[r.tick=2]="tick",r[r.playerLeft=3]="playerLeft",r))(ServerMessageType||{});let socket=null;enableDebug(!1);const socketActions={connect(r,e){socket=new WebSocket(WS_URL),socket.binaryType="arraybuffer",socket.onopen=()=>{console.log("Connection successful :)"),r()},socket.onerror=t=>{console.debug("socket err!",t)},socket.onclose=()=>{console.log("Websocket disconnected !"),socket=null},socket.onmessage=t=>{const{data:i}=t,n=new Uint8Array(i).slice(1),o=new Uint8Array(i)[0];switch(o){case ServerMessageType.start:{log.debug("Read server start message");const a=GameStart.decode(n);e.id=a.gameId,e.startGame(a);break}case ServerMessageType.end:{log.debug("Read server end message"),e.endGame();break}case ServerMessageType.tick:{log.debug("Read server tick message");const a=Tick.decode(n);e.receiveTick(a);break}default:log.error(`Unknown message type: ${o}`)}}},emitJoin(r){const e=PlayerJoin.encode(r).finish(),t=new Uint8Array(e.length+1);t.set([ClientMessageType.join],0),t.set(e,1),socket==null||socket.send(t)},emitMove(r){const e=PlayerMove.encode(r).finish(),t=new Uint8Array(e.length+1);t.set([ClientMessageType.move],0),t.set(e,1),socket==null||socket.send(t)}},create$1=()=>new Map,setIfUndefined=(r,e,t)=>{let i=r.get(e);return i===void 0&&r.set(e,i=t()),i},create=()=>new Set,from=Array.from;class Observable{constructor(){this._observers=create$1()}on(e,t){setIfUndefined(this._observers,e,create).add(t)}once(e,t){const i=(...n)=>{this.off(e,i),t(...n)};this.on(e,i)}off(e,t){const i=this._observers.get(e);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(e))}emit(e,t){return from((this._observers.get(e)||create$1()).values()).forEach(i=>i(...t))}destroy(){this._observers=create$1()}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let r=0;r<256;++r)byteToHex.push((r+256).toString(16).slice(1));function unsafeStringify(r,e=0){return(byteToHex[r[e+0]]+byteToHex[r[e+1]]+byteToHex[r[e+2]]+byteToHex[r[e+3]]+"-"+byteToHex[r[e+4]]+byteToHex[r[e+5]]+"-"+byteToHex[r[e+6]]+byteToHex[r[e+7]]+"-"+byteToHex[r[e+8]]+byteToHex[r[e+9]]+"-"+byteToHex[r[e+10]]+byteToHex[r[e+11]]+byteToHex[r[e+12]]+byteToHex[r[e+13]]+byteToHex[r[e+14]]+byteToHex[r[e+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(r,e,t){if(native.randomUUID&&!e&&!r)return native.randomUUID();r=r||{};const i=r.random||(r.rng||rng)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(let n=0;n<16;++n)e[t+n]=i[n];return e}return unsafeStringify(i)}var __defProp$1=Object.defineProperty,__defNormalProp$1=(r,e,t)=>e in r?__defProp$1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,__publicField$1=(r,e,t)=>(__defNormalProp$1(r,typeof e!="symbol"?e+"":e,t),t);class GameState{constructor(e){__publicField$1(this,"players",[]),__publicField$1(this,"balls",[]),__publicField$1(this,"options"),this.options=e}init(){this.players=this.players.map(e=>({...e,cursor:{player:e.playerNumber,x:e.cursor.x+e.playerNumber*200,y:250}}))}tick(){}}var __defProp=Object.defineProperty,__defNormalProp=(r,e,t)=>e in r?__defProp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,__publicField=(r,e,t)=>(__defNormalProp(r,typeof e!="symbol"?e+"":e,t),t);class Game extends Observable{constructor(e){super(),__publicField(this,"id",v4()),__publicField(this,"state"),__publicField(this,"options",{fps:60,liquidPerPlayer:100,cursorSpeed:2,players:2}),__publicField(this,"tickTimeoutId"),__publicField(this,"emitTick",()=>{const t=performance.now();this.state.tick(),this.emit("update",["tick",this]);const n=performance.now()-t,o=Math.max(0,1e3/this.options.fps-n);this.tickTimeoutId=setTimeout(this.emitTick,o)}),e&&(this.options={...this.options,...e},this.options.players=Math.min(6,this.options.players)),this.state=new GameState(this.options)}setOptions(e){this.options={...this.options,...e},this.options.players=Math.min(6,this.options.players),this.state.options=this.options}getPlayer(e){return this.state.players.find(t=>t.id===e)}onPlayerJoin(e){const t=this.state.players.length;this.state.players.push({id:e.playerId,playerNumber:t+1,name:e.name,color:e.color,cursor:{player:t+1,x:0,y:0}})}onPlayerMove(e){this.state.players.forEach(t=>{t.playerNumber===e.playerNumber&&(t.cursor.x=e.mouseX,t.cursor.y=e.mouseY)})}startGame({players:e,balls:t}){e&&(this.state.players=e),this.state.balls=t,e||this.state.init(),typeof window>"u"&&(this.tickTimeoutId=setTimeout(this.emitTick,1e3/this.options.fps)),this.emit("update",["start",this])}endGame(){this.destroy(),this.tickTimeoutId&&clearTimeout(this.tickTimeoutId),this.emit("update",["end",this])}receiveTick(e){e.cursors.forEach((t,i)=>{this.state.players[i].cursor=t}),this.emit("update",["tick",this,e])}}const PLAYER_COLORS=["#de3249","#0099ff","#ff00ff","#2e8b57","#008080"],game=new Game({});let gfx;const playerId=Math.ceil(Math.random()*1e5);let localPlayer;function runMultiplayerGame(r,e){socketActions.connect(()=>{socketActions.emitJoin({playerId,name:r,color:PLAYER_COLORS[Math.floor(Math.random()*5)],options:e})},game),game.on("update",(t,i,n)=>{var o,a,c;if(t==="start")(o=document.querySelector(".loading-menu"))==null||o.classList.add("hidden"),(a=document.querySelector("#game"))==null||a.classList.remove("hidden"),onGameStart();else if(t!=="end"){if(t==="tick"){socketActions.emitMove({gameId:i.id,playerNumber:((c=i.getPlayer(playerId))==null?void 0:c.playerNumber)||0,mouseX:mouse.x,mouseY:mouse.y});for(let s=0;s<n.cursors.length;s++){const l=n.cursors[s],u=globalCursors.find(d=>d.player===l.player);u.targetX=l.x,u.targetY=l.y}for(let s=0;s<n.balls.length;s++){const l=n.balls[s],u=balls[s];u.targetX=l.x,u.targetY=l.y,u.color=l.color}}}})}function onGameStart(){const{players:r}=game.state;if(localPlayer=game.getPlayer(playerId),!localPlayer){console.error("Could not start the game: no player with id ",playerId);return}const e=document.querySelector("#game"),t=new Map(r.map(i=>{const n=document.createElement("div");return n.classList.add("cursor"),n.style.background=i.color,n.style.transform=`translate(${i.cursor.x}px, ${i.cursor.y}px)`,e==null||e.appendChild(n),[i.playerNumber,n]}));allPlayers.push(...r),globalCursors.push(...r.map(i=>i.cursor)),balls.push(...game.state.balls),console.log("INIT"),gfx={cursors:t}}const style="";var C;(C=document.querySelector("#join-form"))==null||C.addEventListener("submit",r=>{var i,n;r.preventDefault(),(i=document.querySelector(".start-menu"))==null||i.classList.add("hidden"),(n=document.querySelector(".loading-menu"))==null||n.classList.remove("hidden");const e=document.querySelector("#name").value,t={fps:parseInt(document.querySelector("#fps").value),liquidPerPlayer:parseInt(document.querySelector("#liquid").value),cursorSpeed:parseInt(document.querySelector("#cursor").value),players:parseInt(document.querySelector("#players").value)};runMultiplayerGame(e,t)});const canvas=document.querySelector("canvas"),context=canvas.getContext("2d");let width=canvas.width=window.innerWidth,height=canvas.height=window.innerHeight;const mouse={x:0,y:0},globalCursors=[],balls=[],allPlayers=[],ballDiameter=16;window.onresize=()=>{width=canvas.width=window.innerWidth,height=canvas.height=window.innerHeight};let lastFrameTime=performance.now();frame();function frame(){const r=performance.now()-lastFrameTime;lastFrameTime=performance.now();const e=.01*r,t=Math.min(1,.01*r);context.clearRect(0,0,width,height);for(let i=0;i<balls.length;i++){const n=balls[i];n.x+=(n.targetX-n.x)*e,n.y+=(n.targetY-n.y)*e,context.fillStyle=n.color,context.beginPath(),context.arc(n.x,n.y,ballDiameter/2,0,Math.PI*2,!1),context.fill()}globalCursors.forEach(i=>{i.player==localPlayer.playerNumber?(i.x=mouse.x,i.y=mouse.y):(i.x+=(i.targetX-i.x)*t,i.y+=(i.targetY-i.y)*t);const n=gfx.cursors.get(i.player);n&&(n.style.transform=`translate(${i.x}px, ${i.y}px)`)}),requestAnimationFrame(frame)}window.addEventListener("mousemove",function(r){mouse.x=r.clientX,mouse.y=r.clientY},!1);
