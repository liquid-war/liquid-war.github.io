(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function noop$1(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return typeof e=="function"}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function is_empty(e){return Object.keys(e).length===0}function subscribe(e,...t){if(e==null)return noop$1;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function get_store_value(e){let t;return subscribe(e,n=>t=n)(),t}function component_subscribe(e,t,n){e.$$.on_destroy.push(subscribe(t,n))}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=t==null?"":t}function set_style(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function custom_event(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function createEventDispatcher(){const e=get_current_component();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const a=custom_event(t,n,{cancelable:i});return r.slice().forEach(l=>{l.call(e,a)}),!a.defaultPrevented}return!0}}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){const e=current_component;do{for(;flushidx<dirty_components.length;){const t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const n=render_callbacks[t];seen_callbacks.has(n)||(seen_callbacks.add(n),n())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(e.fragment!==null){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,n,i){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push(()=>{outroing.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function create_component(e){e&&e.c()}function mount_component(e,t,n,i){const{fragment:r,after_update:a}=e.$$;r&&r.m(t,n),i||add_render_callback(()=>{const l=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...l):run_all(l),e.$$.on_mount=[]}),a.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;n.fragment!==null&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){e.$$.dirty[0]===-1&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,i,r,a,l,u=[-1]){const s=current_component;set_current_component(e);const o=e.$$={fragment:null,ctx:[],props:a,update:noop$1,not_equal:r,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:blank_object(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};l&&l(o.root);let d=!1;if(o.ctx=n?n(e,t.props||{},(c,f,...m)=>{const h=m.length?m[0]:f;return o.ctx&&r(o.ctx[c],o.ctx[c]=h)&&(!o.skip_bound&&o.bound[c]&&o.bound[c](h),d&&make_dirty(e,c)),f}):[],o.update(),d=!0,run_all(o.before_update),o.fragment=i?i(o.ctx):!1,t.target){if(t.hydrate){const c=children(t.target);o.fragment&&o.fragment.l(c),c.forEach(detach)}else o.fragment&&o.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(s)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(t,n){if(!is_function(n))return noop$1;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!is_empty(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(e,t=noop$1){let n;const i=new Set;function r(u){if(safe_not_equal(e,u)&&(e=u,n)){const s=!subscriber_queue.length;for(const o of i)o[1](),subscriber_queue.push(o,e);if(s){for(let o=0;o<subscriber_queue.length;o+=2)subscriber_queue[o][0](subscriber_queue[o+1]);subscriber_queue.length=0}}}function a(u){r(u(e))}function l(u,s=noop$1){const o=[u,s];return i.add(o),i.size===1&&(n=t(r)||noop$1),u(e),()=>{i.delete(o),i.size===0&&(n(),n=null)}}return{set:r,update:a,subscribe:l}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,t){for(var n=new Array(arguments.length-1),i=0,r=2,a=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(u,s){n[i]=function(d){if(a)if(a=!1,d)s(d);else{for(var c=new Array(arguments.length-1),f=0;f<c.length;)c[f++]=arguments[f];u.apply(null,c)}};try{e.apply(t||null,n)}catch(o){a&&(a=!1,s(o))}})}var base64$1={};(function(e){var t=e;t.length=function(u){var s=u.length;if(!s)return 0;for(var o=0;--s%4>1&&u.charAt(s)==="=";)++o;return Math.ceil(u.length*3)/4-o};for(var n=new Array(64),i=new Array(123),r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(u,s,o){for(var d=null,c=[],f=0,m=0,h;s<o;){var y=u[s++];switch(m){case 0:c[f++]=n[y>>2],h=(y&3)<<4,m=1;break;case 1:c[f++]=n[h|y>>4],h=(y&15)<<2,m=2;break;case 2:c[f++]=n[h|y>>6],c[f++]=n[y&63],m=0;break}f>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,c)),f=0)}return m&&(c[f++]=n[h],c[f++]=61,m===1&&(c[f++]=61)),d?(f&&d.push(String.fromCharCode.apply(String,c.slice(0,f))),d.join("")):String.fromCharCode.apply(String,c.slice(0,f))};var a="invalid encoding";t.decode=function(u,s,o){for(var d=o,c=0,f,m=0;m<u.length;){var h=u.charCodeAt(m++);if(h===61&&c>1)break;if((h=i[h])===void 0)throw Error(a);switch(c){case 0:f=h,c=1;break;case 1:s[o++]=f<<2|(h&48)>>4,f=h,c=2;break;case 2:s[o++]=(f&15)<<4|(h&60)>>2,f=h,c=3;break;case 3:s[o++]=(f&3)<<6|h,c=0;break}}if(c===1)throw Error(a);return o-d},t.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,n,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:i||this}),this};EventEmitter.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var i=this._listeners[t],r=0;r<i.length;)i[r].fn===n?i.splice(r,1):++r;return this};EventEmitter.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<n.length;)n[r].fn.apply(n[r++].ctx,i)}return this};var float=factory(factory);function factory(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=n[3]===128;function r(s,o,d){t[0]=s,o[d]=n[0],o[d+1]=n[1],o[d+2]=n[2],o[d+3]=n[3]}function a(s,o,d){t[0]=s,o[d]=n[3],o[d+1]=n[2],o[d+2]=n[1],o[d+3]=n[0]}e.writeFloatLE=i?r:a,e.writeFloatBE=i?a:r;function l(s,o){return n[0]=s[o],n[1]=s[o+1],n[2]=s[o+2],n[3]=s[o+3],t[0]}function u(s,o){return n[3]=s[o],n[2]=s[o+1],n[1]=s[o+2],n[0]=s[o+3],t[0]}e.readFloatLE=i?l:u,e.readFloatBE=i?u:l}():function(){function t(i,r,a,l){var u=r<0?1:0;if(u&&(r=-r),r===0)i(1/r>0?0:2147483648,a,l);else if(isNaN(r))i(2143289344,a,l);else if(r>34028234663852886e22)i((u<<31|2139095040)>>>0,a,l);else if(r<11754943508222875e-54)i((u<<31|Math.round(r/1401298464324817e-60))>>>0,a,l);else{var s=Math.floor(Math.log(r)/Math.LN2),o=Math.round(r*Math.pow(2,-s)*8388608)&8388607;i((u<<31|s+127<<23|o)>>>0,a,l)}}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE);function n(i,r,a){var l=i(r,a),u=(l>>31)*2+1,s=l>>>23&255,o=l&8388607;return s===255?o?NaN:u*(1/0):s===0?u*1401298464324817e-60*o:u*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=n.bind(null,readUintLE),e.readFloatBE=n.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=n[7]===128;function r(s,o,d){t[0]=s,o[d]=n[0],o[d+1]=n[1],o[d+2]=n[2],o[d+3]=n[3],o[d+4]=n[4],o[d+5]=n[5],o[d+6]=n[6],o[d+7]=n[7]}function a(s,o,d){t[0]=s,o[d]=n[7],o[d+1]=n[6],o[d+2]=n[5],o[d+3]=n[4],o[d+4]=n[3],o[d+5]=n[2],o[d+6]=n[1],o[d+7]=n[0]}e.writeDoubleLE=i?r:a,e.writeDoubleBE=i?a:r;function l(s,o){return n[0]=s[o],n[1]=s[o+1],n[2]=s[o+2],n[3]=s[o+3],n[4]=s[o+4],n[5]=s[o+5],n[6]=s[o+6],n[7]=s[o+7],t[0]}function u(s,o){return n[7]=s[o],n[6]=s[o+1],n[5]=s[o+2],n[4]=s[o+3],n[3]=s[o+4],n[2]=s[o+5],n[1]=s[o+6],n[0]=s[o+7],t[0]}e.readDoubleLE=i?l:u,e.readDoubleBE=i?u:l}():function(){function t(i,r,a,l,u,s){var o=l<0?1:0;if(o&&(l=-l),l===0)i(0,u,s+r),i(1/l>0?0:2147483648,u,s+a);else if(isNaN(l))i(0,u,s+r),i(2146959360,u,s+a);else if(l>17976931348623157e292)i(0,u,s+r),i((o<<31|2146435072)>>>0,u,s+a);else{var d;if(l<22250738585072014e-324)d=l/5e-324,i(d>>>0,u,s+r),i((o<<31|d/4294967296)>>>0,u,s+a);else{var c=Math.floor(Math.log(l)/Math.LN2);c===1024&&(c=1023),d=l*Math.pow(2,-c),i(d*4503599627370496>>>0,u,s+r),i((o<<31|c+1023<<20|d*1048576&1048575)>>>0,u,s+a)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function n(i,r,a,l,u){var s=i(l,u+r),o=i(l,u+a),d=(o>>31)*2+1,c=o>>>20&2047,f=4294967296*(o&1048575)+s;return c===2047?f?NaN:d*(1/0):c===0?d*5e-324*f:d*Math.pow(2,c-1075)*(f+4503599627370496)}e.readDoubleLE=n.bind(null,readUintLE,0,4),e.readDoubleBE=n.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function writeUintBE(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var t=e;t.length=function(i){for(var r=0,a=0,l=0;l<i.length;++l)a=i.charCodeAt(l),a<128?r+=1:a<2048?r+=2:(a&64512)===55296&&(i.charCodeAt(l+1)&64512)===56320?(++l,r+=4):r+=3;return r},t.read=function(i,r,a){var l=a-r;if(l<1)return"";for(var u=null,s=[],o=0,d;r<a;)d=i[r++],d<128?s[o++]=d:d>191&&d<224?s[o++]=(d&31)<<6|i[r++]&63:d>239&&d<365?(d=((d&7)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63)-65536,s[o++]=55296+(d>>10),s[o++]=56320+(d&1023)):s[o++]=(d&15)<<12|(i[r++]&63)<<6|i[r++]&63,o>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),o=0);return u?(o&&u.push(String.fromCharCode.apply(String,s.slice(0,o))),u.join("")):String.fromCharCode.apply(String,s.slice(0,o))},t.write=function(i,r,a){for(var l=a,u,s,o=0;o<i.length;++o)u=i.charCodeAt(o),u<128?r[a++]=u:u<2048?(r[a++]=u>>6|192,r[a++]=u&63|128):(u&64512)===55296&&((s=i.charCodeAt(o+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++o,r[a++]=u>>18|240,r[a++]=u>>12&63|128,r[a++]=u>>6&63|128,r[a++]=u&63|128):(r[a++]=u>>12|224,r[a++]=u>>6&63|128,r[a++]=u&63|128);return a-l}})(utf8$2);var pool_1=pool;function pool(e,t,n){var i=n||8192,r=i>>>1,a=null,l=i;return function(s){if(s<1||s>r)return e(s);l+s>i&&(a=e(i),l=0);var o=t.call(a,l,l+=s);return l&7&&(l=(l|7)+1),o}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal();function t(a,l){this.lo=a>>>0,this.hi=l>>>0}var n=t.zero=new t(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var i=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(l){if(l===0)return n;var u=l<0;u&&(l=-l);var s=l>>>0,o=(l-s)/4294967296>>>0;return u&&(o=~o>>>0,s=~s>>>0,++s>4294967295&&(s=0,++o>4294967295&&(o=0))),new t(s,o)},t.from=function(l){if(typeof l=="number")return t.fromNumber(l);if(e.isString(l))if(e.Long)l=e.Long.fromString(l);else return t.fromNumber(parseInt(l,10));return l.low||l.high?new t(l.low>>>0,l.high>>>0):n},t.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var u=~this.lo+1>>>0,s=~this.hi>>>0;return u||(s=s+1>>>0),-(u+s*4294967296)}return this.lo+this.hi*4294967296},t.prototype.toLong=function(l){return e.Long?new e.Long(this.lo|0,this.hi|0,Boolean(l)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(l)}};var r=String.prototype.charCodeAt;return t.fromHash=function(l){return l===i?n:new t((r.call(l,0)|r.call(l,1)<<8|r.call(l,2)<<16|r.call(l,3)<<24)>>>0,(r.call(l,4)|r.call(l,5)<<8|r.call(l,6)<<16|r.call(l,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},t.prototype.zzDecode=function(){var l=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},t.prototype.length=function(){var l=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return s===0?u===0?l<16384?l<128?1:2:l<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:s<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var t=e;t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=requireLongbits(),t.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},t.isString=function(a){return typeof a=="string"||a instanceof String},t.isObject=function(a){return a&&typeof a=="object"},t.isset=t.isSet=function(a,l){var u=a[l];return u!=null&&a.hasOwnProperty(l)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},t.Buffer=function(){try{var r=t.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(a){return typeof a=="number"?t.Buffer?t._Buffer_allocUnsafe(a):new t.Array(a):t.Buffer?t._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(a){return a?t.LongBits.from(a).toHash():t.LongBits.zeroHash},t.longFromHash=function(a,l){var u=t.LongBits.fromHash(a);return t.Long?t.Long.fromBits(u.lo,u.hi,l):u.toNumber(Boolean(l))};function n(r,a,l){for(var u=Object.keys(a),s=0;s<u.length;++s)(r[u[s]]===void 0||!l)&&(r[u[s]]=a[u[s]]);return r}t.merge=n,t.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function i(r){function a(l,u){if(!(this instanceof a))return new a(l,u);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&n(this,u)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(a){for(var l={},u=0;u<a.length;++u)l[a[u]]=1;return function(){for(var s=Object.keys(this),o=s.length-1;o>-1;--o)if(l[s[o]]===1&&this[s[o]]!==void 0&&this[s[o]]!==null)return s[o]}},t.oneOfSetter=function(a){return function(l){for(var u=0;u<a.length;++u)a[u]!==l&&delete this[a[u]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var r=t.Buffer;if(!r){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=r.from!==Uint8Array.from&&r.from||function(l,u){return new r(l,u)},t._Buffer_allocUnsafe=r.allocUnsafe||function(l){return new r(l)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function e(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function e(t){return new util$4.Array(t)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function e(t,n,i){return this.tail=this.tail.next=new Op(t,n,i),this.len+=n,this};function writeByte(e,t,n){t[n]=e&255}function writeVarint32(e,t,n){for(;e>127;)t[n++]=e&127|128,e>>>=7;t[n]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Writer$1.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer$1.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,n){for(;e.hi;)t[n++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=e.lo&127|128,e.lo=e.lo>>>7;t[n++]=e.lo}Writer$1.prototype.uint64=function e(t){var n=LongBits$1.from(t);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(t){var n=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}Writer$1.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(t){var n=LongBits$1.from(t);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(t){return this._push(util$4.float.writeFloatLE,4,t)};Writer$1.prototype.double=function e(t){return this._push(util$4.float.writeDoubleLE,8,t)};var writeBytes=util$4.Array.prototype.set?function e(t,n,i){n.set(t,i)}:function e(t,n,i){for(var r=0;r<t.length;++r)n[i+r]=t[r]};Writer$1.prototype.bytes=function e(t){var n=t.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$4.isString(t)){var i=Writer$1.alloc(n=base64.length(t));base64.decode(t,i,0),t=i}return this.uint32(n)._push(writeBytes,n,t)};Writer$1.prototype.string=function e(t){var n=utf8$1.length(t);return n?this.uint32(n)._push(utf8$1.write,n,t):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function e(){var t=this.head,n=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=n,this.len+=i),this};Writer$1.prototype.finish=function e(){for(var t=this.head.next,n=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,n,i),i+=t.len,t=t.next;return n};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(t,n,i){n.set(t,i)}:function(t,n,i){if(t.copy)t.copy(n,i,0,t.length);else for(var r=0;r<t.length;)n[i++]=t[r++]}};BufferWriter.prototype.bytes=function e(t){util$3.isString(t)&&(t=util$3._Buffer_from(t,"base64"));var n=t.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,t),this};function writeStringBuffer(e,t,n){e.length<40?util$3.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}BufferWriter.prototype.string=function e(t){var n=util$3.Buffer.byteLength(t);return this.uint32(n),n&&this._push(writeStringBuffer,n,t),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")},create=function e(){return util$2.Buffer?function(n){return(Reader$1.create=function(r){return util$2.Buffer.isBuffer(r)?new BufferReader$1(r):create_array(r)})(n)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Reader$1.prototype.bytes=function e(){var t=this.uint32(),n=this.pos,i=this.pos+t;if(i>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(n,i):n===i?new this.buf.constructor(0):this._slice.call(this.buf,n,i)};Reader$1.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader$1.prototype.skip=function e(t){if(typeof t=="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,t,n){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}Service.prototype.rpcCall=function e(t,n,i,r,a){if(!r)throw TypeError("request must be specified");var l=this;if(!a)return util.asPromise(e,l,t,n,i,r);if(!l.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return l.rpcImpl(t,n[l.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(s,o){if(s)return l.emit("error",s,t),a(s);if(o===null){l.end(!0);return}if(!(o instanceof i))try{o=i[l.responseDelimited?"decodeDelimited":"decode"](o)}catch(d){return l.emit("error",d,t),a(d)}return l.emit("data",o,t),a(null,o)})}catch(u){l.emit("error",u,t),setTimeout(function(){a(u)},0);return}};Service.prototype.end=function e(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var t=e;t.Service=service})(rpc);var roots={};(function(e){var t=e;t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=requireMinimal(),t.rpc=rpc,t.roots=roots,t.configure=n;function n(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}n()})(indexMinimal);(function(e){e.exports=indexMinimal})(minimal$1);var ClientMsgType;(function(e){e[e.join_lobby=0]="join_lobby",e[e.lobby_msg=1]="lobby_msg",e[e.create_lobby_game=2]="create_lobby_game",e[e.join_lobby_game=3]="join_lobby_game",e[e.leave_lobby_game=4]="leave_lobby_game",e[e.player_move=5]="player_move",e[e.leave_game=6]="leave_game",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientMsgType||(ClientMsgType={}));var ServerMsgType;(function(e){e[e.lobby_state=0]="lobby_state",e[e.player_msg=1]="player_msg",e[e.player_join_lobby=2]="player_join_lobby",e[e.player_leave_lobby=3]="player_leave_lobby",e[e.lobby_game_updated=4]="lobby_game_updated",e[e.player_join=5]="player_join",e[e.game_start=6]="game_start",e[e.game_end=7]="game_end",e[e.tick=8]="tick",e[e.player_left=9]="player_left",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerMsgType||(ServerMsgType={}));var GameStatus;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.PLAYER_WON=2]="PLAYER_WON",e[e.AI_WON=3]="AI_WON",e[e.TIE=4]="TIE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GameStatus||(GameStatus={}));function gameStatusFromJSON(e){switch(e){case 0:case"WAITING":return GameStatus.WAITING;case 1:case"RUNNING":return GameStatus.RUNNING;case 2:case"PLAYER_WON":return GameStatus.PLAYER_WON;case 3:case"AI_WON":return GameStatus.AI_WON;case 4:case"TIE":return GameStatus.TIE;case-1:case"UNRECOGNIZED":default:return GameStatus.UNRECOGNIZED}}function gameStatusToJSON(e){switch(e){case GameStatus.WAITING:return"WAITING";case GameStatus.RUNNING:return"RUNNING";case GameStatus.PLAYER_WON:return"PLAYER_WON";case GameStatus.AI_WON:return"AI_WON";case GameStatus.TIE:return"TIE";case GameStatus.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBasePlayer(){return{id:0,clientId:0,playerNumber:0,name:"",color:0,cursor:void 0,dead:!1}}const Player={encode(e,t=minimal$1.exports.Writer.create()){return e.id!==0&&t.uint32(8).uint32(e.id),e.clientId!==0&&t.uint32(16).uint32(e.clientId),e.playerNumber!==0&&t.uint32(24).uint32(e.playerNumber),e.name!==""&&t.uint32(34).string(e.name),e.color!==0&&t.uint32(40).uint32(e.color),e.cursor!==void 0&&Cursor.encode(e.cursor,t.uint32(50).fork()).ldelim(),e.dead===!0&&t.uint32(56).bool(e.dead),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBasePlayer();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.id=n.uint32();break;case 2:r.clientId=n.uint32();break;case 3:r.playerNumber=n.uint32();break;case 4:r.name=n.string();break;case 5:r.color=n.uint32();break;case 6:r.cursor=Cursor.decode(n,n.uint32());break;case 7:r.dead=n.bool();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{id:isSet(e.id)?Number(e.id):0,clientId:isSet(e.clientId)?Number(e.clientId):0,playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?Number(e.color):0,cursor:isSet(e.cursor)?Cursor.fromJSON(e.cursor):void 0,dead:isSet(e.dead)?Boolean(e.dead):!1}},toJSON(e){const t={};return e.id!==void 0&&(t.id=Math.round(e.id)),e.clientId!==void 0&&(t.clientId=Math.round(e.clientId)),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=Math.round(e.color)),e.cursor!==void 0&&(t.cursor=e.cursor?Cursor.toJSON(e.cursor):void 0),e.dead!==void 0&&(t.dead=e.dead),t},fromPartial(e){var t,n,i,r,a,l;const u=createBasePlayer();return u.id=(t=e.id)!==null&&t!==void 0?t:0,u.clientId=(n=e.clientId)!==null&&n!==void 0?n:0,u.playerNumber=(i=e.playerNumber)!==null&&i!==void 0?i:0,u.name=(r=e.name)!==null&&r!==void 0?r:"",u.color=(a=e.color)!==null&&a!==void 0?a:0,u.cursor=e.cursor!==void 0&&e.cursor!==null?Cursor.fromPartial(e.cursor):void 0,u.dead=(l=e.dead)!==null&&l!==void 0?l:!1,u}};function createBaseCursor(){return{player:0,x:0,y:0}}const Cursor={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.x!==0&&t.uint32(16).uint32(e.x),e.y!==0&&t.uint32(24).uint32(e.y),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseCursor();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.player=n.uint32();break;case 2:r.x=n.uint32();break;case 3:r.y=n.uint32();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.x!==void 0&&(t.x=Math.round(e.x)),e.y!==void 0&&(t.y=Math.round(e.y)),t},fromPartial(e){var t,n,i;const r=createBaseCursor();return r.player=(t=e.player)!==null&&t!==void 0?t:0,r.x=(n=e.x)!==null&&n!==void 0?n:0,r.y=(i=e.y)!==null&&i!==void 0?i:0,r}};function createBaseBallOwner(){return{player:0,percentage:0}}const BallOwner={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.percentage!==0&&t.uint32(21).float(e.percentage),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseBallOwner();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.player=n.uint32();break;case 2:r.percentage=n.float();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,percentage:isSet(e.percentage)?Number(e.percentage):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.percentage!==void 0&&(t.percentage=e.percentage),t},fromPartial(e){var t,n;const i=createBaseBallOwner();return i.player=(t=e.player)!==null&&t!==void 0?t:0,i.percentage=(n=e.percentage)!==null&&n!==void 0?n:0,i}};function createBaseBall(){return{player:0,color:0,x:0,y:0,radius:0,owners:[]}}const Ball={encode(e,t=minimal$1.exports.Writer.create()){e.player!==0&&t.uint32(8).uint32(e.player),e.color!==0&&t.uint32(16).uint32(e.color),e.x!==0&&t.uint32(29).float(e.x),e.y!==0&&t.uint32(37).float(e.y),e.radius!==0&&t.uint32(45).float(e.radius);for(const n of e.owners)BallOwner.encode(n,t.uint32(50).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseBall();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.player=n.uint32();break;case 2:r.color=n.uint32();break;case 3:r.x=n.float();break;case 4:r.y=n.float();break;case 5:r.radius=n.float();break;case 6:r.owners.push(BallOwner.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,color:isSet(e.color)?Number(e.color):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0,radius:isSet(e.radius)?Number(e.radius):0,owners:Array.isArray(e==null?void 0:e.owners)?e.owners.map(t=>BallOwner.fromJSON(t)):[]}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.color!==void 0&&(t.color=Math.round(e.color)),e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.radius!==void 0&&(t.radius=e.radius),e.owners?t.owners=e.owners.map(n=>n?BallOwner.toJSON(n):void 0):t.owners=[],t},fromPartial(e){var t,n,i,r,a,l;const u=createBaseBall();return u.player=(t=e.player)!==null&&t!==void 0?t:0,u.color=(n=e.color)!==null&&n!==void 0?n:0,u.x=(i=e.x)!==null&&i!==void 0?i:0,u.y=(r=e.y)!==null&&r!==void 0?r:0,u.radius=(a=e.radius)!==null&&a!==void 0?a:0,u.owners=((l=e.owners)===null||l===void 0?void 0:l.map(s=>BallOwner.fromPartial(s)))||[],u}};function createBaseRect(){return{x:0,y:0,width:0,height:0,rotation:0}}const Rect={encode(e,t=minimal$1.exports.Writer.create()){return e.x!==0&&t.uint32(21).float(e.x),e.y!==0&&t.uint32(29).float(e.y),e.width!==0&&t.uint32(37).float(e.width),e.height!==0&&t.uint32(45).float(e.height),e.rotation!==0&&t.uint32(53).float(e.rotation),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseRect();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 2:r.x=n.float();break;case 3:r.y=n.float();break;case 4:r.width=n.float();break;case 5:r.height=n.float();break;case 6:r.rotation=n.float();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,rotation:isSet(e.rotation)?Number(e.rotation):0}},toJSON(e){const t={};return e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.width!==void 0&&(t.width=e.width),e.height!==void 0&&(t.height=e.height),e.rotation!==void 0&&(t.rotation=e.rotation),t},fromPartial(e){var t,n,i,r,a;const l=createBaseRect();return l.x=(t=e.x)!==null&&t!==void 0?t:0,l.y=(n=e.y)!==null&&n!==void 0?n:0,l.width=(i=e.width)!==null&&i!==void 0?i:0,l.height=(r=e.height)!==null&&r!==void 0?r:0,l.rotation=(a=e.rotation)!==null&&a!==void 0?a:0,l}};function createBaseLobbyGame(){return{gameId:"",players:0,maxPlayers:0}}const LobbyGame={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.players!==0&&t.uint32(16).uint32(e.players),e.maxPlayers!==0&&t.uint32(24).uint32(e.maxPlayers),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseLobbyGame();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.players=n.uint32();break;case 3:r.maxPlayers=n.uint32();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:isSet(e.players)?Number(e.players):0,maxPlayers:isSet(e.maxPlayers)?Number(e.maxPlayers):0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.players!==void 0&&(t.players=Math.round(e.players)),e.maxPlayers!==void 0&&(t.maxPlayers=Math.round(e.maxPlayers)),t},fromPartial(e){var t,n,i;const r=createBaseLobbyGame();return r.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",r.players=(n=e.players)!==null&&n!==void 0?n:0,r.maxPlayers=(i=e.maxPlayers)!==null&&i!==void 0?i:0,r}};function createBaseLobbyPlayer(){return{playerId:0,name:""}}const LobbyPlayer={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(16).uint32(e.playerId),e.name!==""&&t.uint32(26).string(e.name),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseLobbyPlayer();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 2:r.playerId=n.uint32();break;case 3:r.name=n.string();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):""}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),t},fromPartial(e){var t,n;const i=createBaseLobbyPlayer();return i.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,i.name=(n=e.name)!==null&&n!==void 0?n:"",i}};function createBaseLobbyState(){return{games:[],players:[]}}const LobbyState={encode(e,t=minimal$1.exports.Writer.create()){for(const n of e.games)LobbyGame.encode(n,t.uint32(10).fork()).ldelim();for(const n of e.players)LobbyPlayer.encode(n,t.uint32(18).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseLobbyState();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.games.push(LobbyGame.decode(n,n.uint32()));break;case 2:r.players.push(LobbyPlayer.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{games:Array.isArray(e==null?void 0:e.games)?e.games.map(t=>LobbyGame.fromJSON(t)):[],players:Array.isArray(e==null?void 0:e.players)?e.players.map(t=>LobbyPlayer.fromJSON(t)):[]}},toJSON(e){const t={};return e.games?t.games=e.games.map(n=>n?LobbyGame.toJSON(n):void 0):t.games=[],e.players?t.players=e.players.map(n=>n?LobbyPlayer.toJSON(n):void 0):t.players=[],t},fromPartial(e){var t,n;const i=createBaseLobbyState();return i.games=((t=e.games)===null||t===void 0?void 0:t.map(r=>LobbyGame.fromPartial(r)))||[],i.players=((n=e.players)===null||n===void 0?void 0:n.map(r=>LobbyPlayer.fromPartial(r)))||[],i}};function createBaseGameStart(){return{gameId:"",players:[],balls:[],rects:[]}}const GameStart={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const n of e.players)Player.encode(n,t.uint32(18).fork()).ldelim();for(const n of e.balls)Ball.encode(n,t.uint32(26).fork()).ldelim();for(const n of e.rects)Rect.encode(n,t.uint32(34).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseGameStart();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.players.push(Player.decode(n,n.uint32()));break;case 3:r.balls.push(Ball.decode(n,n.uint32()));break;case 4:r.rects.push(Rect.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:Array.isArray(e==null?void 0:e.players)?e.players.map(t=>Player.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[],rects:Array.isArray(e==null?void 0:e.rects)?e.rects.map(t=>Rect.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.players?t.players=e.players.map(n=>n?Player.toJSON(n):void 0):t.players=[],e.balls?t.balls=e.balls.map(n=>n?Ball.toJSON(n):void 0):t.balls=[],e.rects?t.rects=e.rects.map(n=>n?Rect.toJSON(n):void 0):t.rects=[],t},fromPartial(e){var t,n,i,r;const a=createBaseGameStart();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",a.players=((n=e.players)===null||n===void 0?void 0:n.map(l=>Player.fromPartial(l)))||[],a.balls=((i=e.balls)===null||i===void 0?void 0:i.map(l=>Ball.fromPartial(l)))||[],a.rects=((r=e.rects)===null||r===void 0?void 0:r.map(l=>Rect.fromPartial(l)))||[],a}};function createBaseGameEnd(){return{gameId:"",result:0,winner:void 0}}const GameEnd={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.result!==0&&t.uint32(16).int32(e.result),e.winner!==void 0&&Player.encode(e.winner,t.uint32(26).fork()).ldelim(),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseGameEnd();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.result=n.int32();break;case 3:r.winner=Player.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",result:isSet(e.result)?gameStatusFromJSON(e.result):0,winner:isSet(e.winner)?Player.fromJSON(e.winner):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.result!==void 0&&(t.result=gameStatusToJSON(e.result)),e.winner!==void 0&&(t.winner=e.winner?Player.toJSON(e.winner):void 0),t},fromPartial(e){var t,n;const i=createBaseGameEnd();return i.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",i.result=(n=e.result)!==null&&n!==void 0?n:0,i.winner=e.winner!==void 0&&e.winner!==null?Player.fromPartial(e.winner):void 0,i}};function createBaseTick(){return{gameId:"",cursors:[],balls:[]}}const Tick={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const n of e.cursors)Cursor.encode(n,t.uint32(18).fork()).ldelim();for(const n of e.balls)Ball.encode(n,t.uint32(26).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseTick();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.cursors.push(Cursor.decode(n,n.uint32()));break;case 3:r.balls.push(Ball.decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",cursors:Array.isArray(e==null?void 0:e.cursors)?e.cursors.map(t=>Cursor.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.cursors?t.cursors=e.cursors.map(n=>n?Cursor.toJSON(n):void 0):t.cursors=[],e.balls?t.balls=e.balls.map(n=>n?Ball.toJSON(n):void 0):t.balls=[],t},fromPartial(e){var t,n,i;const r=createBaseTick();return r.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",r.cursors=((n=e.cursors)===null||n===void 0?void 0:n.map(a=>Cursor.fromPartial(a)))||[],r.balls=((i=e.balls)===null||i===void 0?void 0:i.map(a=>Ball.fromPartial(a)))||[],r}};function createBaseGameOptions(){return{players:0,serverTickRate:0,liquidPerPlayer:0,liquidMinSpeed:0,liquidMaxSpeed:0,ccdSubsteps:0,linearDamping:0,maxStabilizationIterations:0}}const GameOptions={encode(e,t=minimal$1.exports.Writer.create()){return e.players!==0&&t.uint32(8).uint32(e.players),e.serverTickRate!==0&&t.uint32(16).uint32(e.serverTickRate),e.liquidPerPlayer!==0&&t.uint32(24).uint32(e.liquidPerPlayer),e.liquidMinSpeed!==0&&t.uint32(37).float(e.liquidMinSpeed),e.liquidMaxSpeed!==0&&t.uint32(45).float(e.liquidMaxSpeed),e.ccdSubsteps!==0&&t.uint32(48).uint32(e.ccdSubsteps),e.linearDamping!==0&&t.uint32(61).float(e.linearDamping),e.maxStabilizationIterations!==0&&t.uint32(64).uint32(e.maxStabilizationIterations),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBaseGameOptions();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.players=n.uint32();break;case 2:r.serverTickRate=n.uint32();break;case 3:r.liquidPerPlayer=n.uint32();break;case 4:r.liquidMinSpeed=n.float();break;case 5:r.liquidMaxSpeed=n.float();break;case 6:r.ccdSubsteps=n.uint32();break;case 7:r.linearDamping=n.float();break;case 8:r.maxStabilizationIterations=n.uint32();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{players:isSet(e.players)?Number(e.players):0,serverTickRate:isSet(e.serverTickRate)?Number(e.serverTickRate):0,liquidPerPlayer:isSet(e.liquidPerPlayer)?Number(e.liquidPerPlayer):0,liquidMinSpeed:isSet(e.liquidMinSpeed)?Number(e.liquidMinSpeed):0,liquidMaxSpeed:isSet(e.liquidMaxSpeed)?Number(e.liquidMaxSpeed):0,ccdSubsteps:isSet(e.ccdSubsteps)?Number(e.ccdSubsteps):0,linearDamping:isSet(e.linearDamping)?Number(e.linearDamping):0,maxStabilizationIterations:isSet(e.maxStabilizationIterations)?Number(e.maxStabilizationIterations):0}},toJSON(e){const t={};return e.players!==void 0&&(t.players=Math.round(e.players)),e.serverTickRate!==void 0&&(t.serverTickRate=Math.round(e.serverTickRate)),e.liquidPerPlayer!==void 0&&(t.liquidPerPlayer=Math.round(e.liquidPerPlayer)),e.liquidMinSpeed!==void 0&&(t.liquidMinSpeed=e.liquidMinSpeed),e.liquidMaxSpeed!==void 0&&(t.liquidMaxSpeed=e.liquidMaxSpeed),e.ccdSubsteps!==void 0&&(t.ccdSubsteps=Math.round(e.ccdSubsteps)),e.linearDamping!==void 0&&(t.linearDamping=e.linearDamping),e.maxStabilizationIterations!==void 0&&(t.maxStabilizationIterations=Math.round(e.maxStabilizationIterations)),t},fromPartial(e){var t,n,i,r,a,l,u,s;const o=createBaseGameOptions();return o.players=(t=e.players)!==null&&t!==void 0?t:0,o.serverTickRate=(n=e.serverTickRate)!==null&&n!==void 0?n:0,o.liquidPerPlayer=(i=e.liquidPerPlayer)!==null&&i!==void 0?i:0,o.liquidMinSpeed=(r=e.liquidMinSpeed)!==null&&r!==void 0?r:0,o.liquidMaxSpeed=(a=e.liquidMaxSpeed)!==null&&a!==void 0?a:0,o.ccdSubsteps=(l=e.ccdSubsteps)!==null&&l!==void 0?l:0,o.linearDamping=(u=e.linearDamping)!==null&&u!==void 0?u:0,o.maxStabilizationIterations=(s=e.maxStabilizationIterations)!==null&&s!==void 0?s:0,o}};function createBasePlayerJoinLobby(){return{playerId:0,name:""}}const PlayerJoinLobby={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(8).uint32(e.playerId),e.name!==""&&t.uint32(18).string(e.name),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBasePlayerJoinLobby();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.playerId=n.uint32();break;case 2:r.name=n.string();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):""}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),t},fromPartial(e){var t,n;const i=createBasePlayerJoinLobby();return i.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,i.name=(n=e.name)!==null&&n!==void 0?n:"",i}};function createBasePlayerCreateGame(){return{playerId:0,name:"",color:"",options:void 0}}const PlayerCreateGame={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(8).uint32(e.playerId),e.name!==""&&t.uint32(18).string(e.name),e.color!==""&&t.uint32(26).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,t.uint32(34).fork()).ldelim(),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBasePlayerCreateGame();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.playerId=n.uint32();break;case 2:r.name=n.string();break;case 3:r.color=n.string();break;case 4:r.options=GameOptions.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=e.color),e.options!==void 0&&(t.options=e.options?GameOptions.toJSON(e.options):void 0),t},fromPartial(e){var t,n,i;const r=createBasePlayerCreateGame();return r.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,r.name=(n=e.name)!==null&&n!==void 0?n:"",r.color=(i=e.color)!==null&&i!==void 0?i:"",r.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,r}};function createBasePlayerJoinGame(){return{gameId:void 0,playerId:0,name:"",color:"",options:void 0}}const PlayerJoinGame={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==void 0&&t.uint32(10).string(e.gameId),e.playerId!==0&&t.uint32(16).uint32(e.playerId),e.name!==""&&t.uint32(26).string(e.name),e.color!==""&&t.uint32(34).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,t.uint32(42).fork()).ldelim(),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBasePlayerJoinGame();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.playerId=n.uint32();break;case 3:r.name=n.string();break;case 4:r.color=n.string();break;case 5:r.options=GameOptions.decode(n,n.uint32());break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):void 0,playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=e.color),e.options!==void 0&&(t.options=e.options?GameOptions.toJSON(e.options):void 0),t},fromPartial(e){var t,n,i,r;const a=createBasePlayerJoinGame();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:void 0,a.playerId=(n=e.playerId)!==null&&n!==void 0?n:0,a.name=(i=e.name)!==null&&i!==void 0?i:"",a.color=(r=e.color)!==null&&r!==void 0?r:"",a.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,a}};function createBasePlayerMove(){return{gameId:"",playerNumber:0,mouseX:0,mouseY:0}}const PlayerMove={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.playerNumber!==0&&t.uint32(16).uint32(e.playerNumber),e.mouseX!==0&&t.uint32(24).uint32(e.mouseX),e.mouseY!==0&&t.uint32(32).uint32(e.mouseY),t},decode(e,t){const n=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?n.len:n.pos+t;const r=createBasePlayerMove();for(;n.pos<i;){const a=n.uint32();switch(a>>>3){case 1:r.gameId=n.string();break;case 2:r.playerNumber=n.uint32();break;case 3:r.mouseX=n.uint32();break;case 4:r.mouseY=n.uint32();break;default:n.skipType(a&7);break}}return r},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,mouseX:isSet(e.mouseX)?Number(e.mouseX):0,mouseY:isSet(e.mouseY)?Number(e.mouseY):0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.mouseX!==void 0&&(t.mouseX=Math.round(e.mouseX)),e.mouseY!==void 0&&(t.mouseY=Math.round(e.mouseY)),t},fromPartial(e){var t,n,i,r;const a=createBasePlayerMove();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",a.playerNumber=(n=e.playerNumber)!==null&&n!==void 0?n:0,a.mouseX=(i=e.mouseX)!==null&&i!==void 0?i:0,a.mouseY=(r=e.mouseY)!==null&&r!==void 0?r:0,a}};function isSet(e){return e!=null}const getEnv=e=>{if(!e)throw new Error("Undefined environment variable!");return e},WS_URL=getEnv("wss://api.teemukoivisto.xyz/lw");var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,n=t*60,i=n*24,r=i*7,a=i*365.25;ms=function(d,c){c=c||{};var f=typeof d;if(f==="string"&&d.length>0)return l(d);if(f==="number"&&isFinite(d))return c.long?s(d):u(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function l(d){if(d=String(d),!(d.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(!!c){var f=parseFloat(c[1]),m=(c[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*r;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function u(d){var c=Math.abs(d);return c>=i?Math.round(d/i)+"d":c>=n?Math.round(d/n)+"h":c>=t?Math.round(d/t)+"m":c>=e?Math.round(d/e)+"s":d+"ms"}function s(d){var c=Math.abs(d);return c>=i?o(d,c,i,"day"):c>=n?o(d,c,n,"hour"):c>=t?o(d,c,t,"minute"):c>=e?o(d,c,e,"second"):d+" ms"}function o(d,c,f,m){var h=c>=f*1.5;return Math.round(d/f)+" "+m+(h?"s":"")}return ms}function setup(e){n.debug=n,n.default=n,n.coerce=s,n.disable=a,n.enable=r,n.enabled=l,n.humanize=requireMs(),n.destroy=o,Object.keys(e).forEach(d=>{n[d]=e[d]}),n.names=[],n.skips=[],n.formatters={};function t(d){let c=0;for(let f=0;f<d.length;f++)c=(c<<5)-c+d.charCodeAt(f),c|=0;return n.colors[Math.abs(c)%n.colors.length]}n.selectColor=t;function n(d){let c,f=null,m,h;function y(...v){if(!y.enabled)return;const w=y,$=Number(new Date),I=$-(c||$);w.diff=I,w.prev=c,w.curr=$,c=$,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let p=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";p++;const E=n.formatters[x];if(typeof E=="function"){const S=v[p];b=E.call(w,S),v.splice(p,1),p--}return b}),n.formatArgs.call(w,v),(w.log||n.log).apply(w,v)}return y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=i,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==n.namespaces&&(m=n.namespaces,h=n.enabled(d)),h),set:v=>{f=v}}),typeof n.init=="function"&&n.init(y),y}function i(d,c){const f=n(this.namespace+(typeof c>"u"?":":c)+d);return f.log=this.log,f}function r(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let c;const f=(typeof d=="string"?d:"").split(/[\s,]+/),m=f.length;for(c=0;c<m;c++)!f[c]||(d=f[c].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function a(){const d=[...n.names.map(u),...n.skips.map(u).map(c=>"-"+c)].join(",");return n.enable(""),d}function l(d){if(d[d.length-1]==="*")return!0;let c,f;for(c=0,f=n.skips.length;c<f;c++)if(n.skips[c].test(d))return!1;for(c=0,f=n.names.length;c<f;c++)if(n.names[c].test(d))return!0;return!1}function u(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function s(d){return d instanceof Error?d.stack||d.message:d}function o(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var common=setup;(function(e,t){t.formatArgs=i,t.save=r,t.load=a,t.useColors=n,t.storage=l(),t.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;s.splice(1,0,o,"color: inherit");let d=0,c=0;s[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(d++,f==="%c"&&(c=d))}),s.splice(c,0,o)}t.log=console.debug||console.log||(()=>{});function r(s){try{s?t.storage.setItem("debug",s):t.storage.removeItem("debug")}catch{}}function a(){let s;try{s=t.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}function l(){try{return localStorage}catch{}}e.exports=common(t);const{formatters:u}=e.exports;u.j=function(s){try{return JSON.stringify(s)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}})(browser,browser.exports);const debug=browser.exports,logger=debug("game"),log={print(e,t,n,i){const r=e==="info"?n:`%c ${e.toUpperCase()} -> ${n}`;i&&e==="info"?logger(r,i):i?logger(r,`color: ${t}`,i):e==="info"?logger(r):logger(r,`color: ${t}`)},debug(e,t){return this.print("debug","#c563ff",e,t)},info(e,t){return this.print("info","",e,t)},warn(e,t){return this.print("warn","#f3f32c",e,t)},error(e,t){return this.print("error","#ff4242",e,t)}},enableDebug=e=>{e?debug.enable("game"):debug.disable()};let socket=null;const socketActions={connect(e){socket=new WebSocket(WS_URL),socket.binaryType="arraybuffer",socket.onopen=()=>{console.log("Connected"),e({e:"connected"})},socket.onerror=t=>{console.debug("Socket error",t),e({e:"error",err:t})},socket.onclose=()=>{console.log("Disconnected"),socket=null,e({e:"disconnected"})},socket.onmessage=t=>{const{data:n}=t,i=new Uint8Array(n),r=i.slice(1),a=i[0];switch(a){case ServerMsgType.lobby_state:e({e:ServerMsgType.lobby_state,data:LobbyState.decode(r)});break;case ServerMsgType.player_msg:case ServerMsgType.player_join_lobby:case ServerMsgType.player_leave_lobby:case ServerMsgType.lobby_game_updated:case ServerMsgType.player_join:log.debug(`Read type ${a}`);break;case ServerMsgType.game_start:{e({e:ServerMsgType.game_start,data:GameStart.decode(r)});break}case ServerMsgType.game_end:{e({e:ServerMsgType.game_end,data:GameEnd.decode(r)});break}case ServerMsgType.tick:{e({e:ServerMsgType.tick,data:Tick.decode(r)});break}default:log.error(`Unknown message type: ${a}`)}}},emit(e,t){const n=new Uint8Array(t.length+1);n.set([e],0),n.set(t,1),socket==null||socket.send(n)},emitJoinLobby(e){const t=PlayerJoinLobby.encode(e).finish(),n=new Uint8Array(t.length+1);n.set([ClientMsgType.join_lobby],0),n.set(t,1),socket==null||socket.send(n)},emitJoinGame(e){const t=PlayerJoinGame.encode(e).finish(),n=new Uint8Array(t.length+1);n.set([ClientMsgType.join_lobby_game],0),n.set(t,1),socket==null||socket.send(n)},emitMove(e){const t=PlayerMove.encode(e).finish(),n=new Uint8Array(t.length+1);n.set([ClientMsgType.player_move],0),n.set(t,1),socket==null||socket.send(n)}},lobbyGames=writable([]),lobbyPlayers=writable([]),playerName=writable("unknown"),gameState=writable("connecting"),gameEnd=writable(void 0),gameId=writable(""),players=writable([]),balls$1=writable([]),playerId=Math.ceil(Math.random()*1e5),localPlayer=writable(void 0),retryConnectTimeout=writable();function handleMessages(e){var t;switch(log.debug("Event:",e),e.e){case"connected":socketActions.emitJoinLobby({playerId,name:get_store_value(playerName)}),gameState.set("lobby");break;case"disconnected":gameState.set("connecting"),retryConnectTimeout.set(setTimeout(()=>{socketActions.connect(handleMessages)},1e3));break;case ServerMsgType.lobby_state:lobbyGames.set(e.data.games),lobbyPlayers.set(e.data.players);break;case ServerMsgType.game_start:gameId.set(e.data.gameId),players.set(e.data.players),balls$1.set(e.data.balls),localPlayer.set(e.data.players.find(r=>r.id===playerId)),gfxActions.initGame(e.data.players,e.data.balls,e.data.rects),gameState.set("game-running");break;case ServerMsgType.game_end:gameEnd.set(e.data),gfxActions.destroy(),gameState.set("game-ended");break;case ServerMsgType.tick:const n=e.data;players.update(r=>(n.cursors.forEach((a,l)=>{r[l].cursor=a}),r));const i=get_store_value(mouse);socketActions.emitMove({gameId:n.gameId,playerNumber:((t=get_store_value(localPlayer))==null?void 0:t.playerNumber)||0,mouseX:i.x,mouseY:i.y}),gfxActions.updateBalls(n.balls);break}}const gameActions={setPlayerName(e){playerName.set(e)},runGame(){gameState.set("connecting"),socketActions.connect(handleMessages)},joinLobby(){gameState.set("lobby"),socketActions.emit(ClientMsgType.join_lobby,PlayerJoinLobby.encode({playerId,name:get_store_value(playerName)}).finish())},createGame(e){const t={playerId,name:get_store_value(playerName),color:"poop",options:e};socketActions.emit(ClientMsgType.create_lobby_game,PlayerCreateGame.encode(t).finish()),gameState.set("waiting-game-start")},joinGame(e,t){const n={gameId:e.gameId,playerId,name:get_store_value(playerName),color:"poop",options:t};socketActions.emit(ClientMsgType.join_lobby_game,PlayerJoinGame.encode(n).finish()),gameState.set("waiting-game-start")}},vertexShaderSrc=`attribute vec2 position;

void main() {
    gl_Position = vec4(position, 0.0, 1.0);
}
`,fragmentShaderSrc=`precision highp float;

uniform vec2 metaballs[MAX_METABALLS];
uniform vec3 metaballColors[MAX_METABALLS];
uniform int metaballCount;

void main() {
    float sum = 0.0;
    float cutoff = 0.9;
    float radius = 8.0;
    float maxCloseness = 0.0;
    vec3 closestColor = vec3(0.0, 0.0, 0.0);

    for (int i = 0; i < MAX_METABALLS; i++) {
        if (i >= metaballCount) break;
        vec2 metaball = metaballs[i];
        float dist = distance(gl_FragCoord.xy, metaball);
        vec2 diff = gl_FragCoord.xy - metaball;
        float closeness = (radius * radius) / (diff.x * diff.x + diff.y * diff.y);
        sum += closeness;
        if (closeness > maxCloseness) {
            maxCloseness = closeness;
            closestColor = metaballColors[i];
        }
    }

    if (sum >= cutoff) {
        vec3 color = vec3(0.0, 0.0, 0.0);
        color = closestColor;
        bool first = true;

        for (int i = 0; i < MAX_METABALLS; i++) {
            vec2 metaball = metaballs[i];
            float dist = distance(gl_FragCoord.xy, metaball);
            vec2 diff = gl_FragCoord.xy - metaball;
            float closeness = (radius * radius) / (diff.x * diff.x + diff.y * diff.y);
            if (dist < radius * 3.0) {
                color = mix(color, metaballColors[i], closeness / maxCloseness);
            }
        }

        gl_FragColor = vec4(color, 1.0);
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    }
}
`,width=1920,height=1080,globalCursors=writable([]),balls=writable([]),mouse=writable({x:0,y:0});let canvas,wallCanvas;const gfxActions={initGame(e,t,n){canvas=document.createElement("canvas"),wallCanvas=document.createElement("canvas"),canvas.width=wallCanvas.width=width,canvas.height=wallCanvas.height=height;const i=wallCanvas.getContext("2d");if(!i)throw Error("2D canvas not supported");n.forEach(p=>{i.translate(p.x,p.y),i.rotate(p.rotation),i.fillStyle="#555",i.translate(-p.x,-p.y),i.fillRect(p.x,p.y,p.width,p.height)});const r=canvas.getContext("webgl");if(!r)throw Error("WebGL not supported");const a=300,l=y(vertexShaderSrc,r.VERTEX_SHADER),u=y(fragmentShaderSrc.replaceAll("MAX_METABALLS",a.toFixed()).replaceAll("WIDTH",width.toFixed(1)).replaceAll("HEIGHT",height.toFixed(1)),r.FRAGMENT_SHADER),s=r.createProgram();r.attachShader(s,l),r.attachShader(s,u),r.linkProgram(s),r.useProgram(s);const o=new Float32Array([-1,1,-1,-1,1,1,1,-1]),d=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,o,r.STATIC_DRAW);const c=w(s,"position");r.enableVertexAttribArray(c),r.vertexAttribPointer(c,2,r.FLOAT,!1,2*4,0);const f=v(s,"metaballs"),m=v(s,"metaballColors"),h=v(s,"metaballCount");function y(p,k){const b=r.createShader(k);if(r.shaderSource(b,p),r.compileShader(b),!r.getShaderParameter(b,r.COMPILE_STATUS))throw"Shader compile failed with: "+r.getShaderInfoLog(b);return b}function v(p,k){const b=r.getUniformLocation(p,k);if(b===-1)throw"Can not find uniform "+k+".";return b}function w(p,k){const b=r.getAttribLocation(p,k);if(b===-1)throw"Can not find attribute "+k+".";return b}let $=performance.now();I();function I(){var A;const p=(A=get_store_value(localPlayer))==null?void 0:A.playerNumber;if(get_store_value(gameState)!=="game-running"){requestAnimationFrame(I);return}else if(p===void 0){console.error("undefined playerNumber!"),requestAnimationFrame(I);return}const k=performance.now()-$;$=performance.now();const b=.01*k,x=Math.min(1,.01*k);balls.update(C=>C.map(_=>(_.x+=(_.targetX-_.x)*b,_.y+=(_.targetY-_.y)*b,_))),globalCursors.update(C=>C.map(_=>(_.player==p?(_.x=get_store_value(mouse).x,_.y=get_store_value(mouse).y):(_.x+=(_.targetX-_.x)*x,_.y+=(_.targetY-_.y)*x),_)));const E=get_store_value(balls),S=E.length>0?E:t;if(S.length===0)throw Error("grow some balls");if(S.length>a)throw Error("too ballsy");const G=new Float32Array(2*a);for(let C=0;C<S.length;C++){const _=2*C,O=S[C];G[_+0]=O.x,G[_+1]=height-O.y}const N=new Float32Array(3*a);for(let C=0;C<S.length;C++){const _=3*C,O=S[C],R=(O.color&16711680)>>16,W=(O.color&65280)>>8,Y=(O.color&255)>>0;N[_+0]=R/255,N[_+1]=W/255,N[_+2]=Y/255}r.uniform2fv(f,G),r.uniform3fv(m,N),r.uniform1i(h,S.length),r.drawArrays(r.TRIANGLE_STRIP,0,4),requestAnimationFrame(I)}globalCursors.set(e.map(p=>({...p.cursor,color:p.color,targetX:p.cursor.x,targetY:p.cursor.y}))),balls.set(t.map(p=>({...p,targetX:p.x,targetY:p.y})))},destroy(){globalCursors.set([]),balls.set([])},updateMouse(e,t){if(e<0||e>=width||t<0||t>=height){console.error("Invalid mouse position",e,t);return}mouse.set({x:e,y:t})},updateBalls(e){balls.update(t=>t.map((n,i)=>{const r=e[i];return{...n,color:r.color,targetX:r.x,targetY:r.y}}))}},Canvas_svelte_svelte_type_style_lang="";function create_fragment$3(e){let t,n,i=`${width} / ${height}`,r,a,l=`${width} / ${height}`;return{c(){t=element("div"),n=element("div"),r=space(),a=element("div"),attr(n,"class","canvas-wrapper blobs svelte-1pahjfo"),set_style(n,"aspect-ratio",i),attr(a,"class","canvas-wrapper walls svelte-1pahjfo"),set_style(a,"aspect-ratio",l),attr(t,"class","game svelte-1pahjfo")},m(u,s){insert(u,t,s),append(t,n),e[2](n),append(t,r),append(t,a),e[3](a)},p:noop$1,i:noop$1,o:noop$1,d(u){u&&detach(t),e[2](null),e[3](null)}}}function instance$3(e,t,n){let i,r;onMount(()=>{i.appendChild(canvas),r.appendChild(wallCanvas)});function a(u){binding_callbacks[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(u){binding_callbacks[u?"unshift":"push"](()=>{r=u,n(1,r)})}return[i,r,a,l]}class Canvas extends SvelteComponent{constructor(t){super(),init(this,t,instance$3,create_fragment$3,safe_not_equal,{})}}const GameOptionsForm_svelte_svelte_type_style_lang="";function create_fragment$2(e){let t,n,i,r,a,l,u,s,o,d,c,f,m,h,y,v,w,$,I,p,k,b,x,E,S,G,N,A,C,_,O,R,W,Y,P,H,q,D,V,F,Z,T,z,K,L,Q,J,U,j,M,X,ee;return{c(){t=element("form"),n=element("div"),i=element("label"),i.textContent="Name",r=space(),a=element("input"),l=space(),u=element("button"),u.textContent="Play",s=space(),o=element("details"),d=element("summary"),d.textContent="Custom game options",c=space(),f=element("div"),m=element("label"),m.textContent="Players",h=space(),y=element("input"),v=space(),w=element("div"),$=element("label"),$.textContent="Server tick rate",I=space(),p=element("input"),k=space(),b=element("div"),x=element("label"),x.textContent="Liquid per player",E=space(),S=element("input"),G=space(),N=element("div"),A=element("label"),A.textContent="Liquid min speed",C=space(),_=element("input"),O=space(),R=element("div"),W=element("label"),W.textContent="Liquid max speed",Y=space(),P=element("input"),H=space(),q=element("div"),D=element("label"),D.textContent="CCD substeps",V=space(),F=element("input"),Z=space(),T=element("div"),z=element("label"),z.textContent="Damping ratio",K=space(),L=element("input"),Q=space(),J=element("div"),U=element("label"),U.textContent="Max stabilization iterations",j=space(),M=element("input"),attr(i,"for","name"),attr(i,"class","svelte-3ophkv"),attr(a,"id","name"),attr(a,"class","svelte-3ophkv"),attr(n,"class","field svelte-3ophkv"),set_style(u,"background","var(--confirm-color)"),attr(u,"class","svelte-3ophkv"),attr(d,"class","svelte-3ophkv"),attr(m,"for","players"),attr(m,"class","svelte-3ophkv"),attr(y,"id","players"),attr(y,"class","svelte-3ophkv"),attr(f,"class","field svelte-3ophkv"),attr($,"for","serverTickRate"),attr($,"class","svelte-3ophkv"),attr(p,"id","serverTickRate"),attr(p,"class","svelte-3ophkv"),attr(w,"class","field svelte-3ophkv"),attr(x,"for","liquid"),attr(x,"class","svelte-3ophkv"),attr(S,"id","liquid"),attr(S,"class","svelte-3ophkv"),attr(b,"class","field svelte-3ophkv"),attr(A,"for","liquid_min_speed"),attr(A,"class","svelte-3ophkv"),attr(_,"id","liquid_min_speed"),attr(_,"class","svelte-3ophkv"),attr(N,"class","field svelte-3ophkv"),attr(W,"for","liquid_max_speed"),attr(W,"class","svelte-3ophkv"),attr(P,"id","liquid_max_speed"),attr(P,"class","svelte-3ophkv"),attr(R,"class","field svelte-3ophkv"),attr(D,"for","ccd_substeps"),attr(D,"class","svelte-3ophkv"),attr(F,"id","ccd_substeps"),attr(F,"class","svelte-3ophkv"),attr(q,"class","field svelte-3ophkv"),attr(z,"for","damping_ratio"),attr(z,"class","svelte-3ophkv"),attr(L,"id","damping_ratio"),attr(L,"class","svelte-3ophkv"),attr(T,"class","field svelte-3ophkv"),attr(U,"for","max_stabilization_iterationsd"),attr(U,"class","svelte-3ophkv"),attr(M,"id","max_stabilization_iterations"),attr(M,"class","svelte-3ophkv"),attr(J,"class","field svelte-3ophkv"),attr(o,"class","svelte-3ophkv"),attr(t,"class","svelte-3ophkv")},m(g,B){insert(g,t,B),append(t,n),append(n,i),append(n,r),append(n,a),set_input_value(a,e[0]),append(t,l),append(t,u),append(t,s),append(t,o),append(o,d),append(o,c),append(o,f),append(f,m),append(f,h),append(f,y),set_input_value(y,e[1]),append(o,v),append(o,w),append(w,$),append(w,I),append(w,p),set_input_value(p,e[2]),append(o,k),append(o,b),append(b,x),append(b,E),append(b,S),set_input_value(S,e[3]),append(o,G),append(o,N),append(N,A),append(N,C),append(N,_),set_input_value(_,e[4]),append(o,O),append(o,R),append(R,W),append(R,Y),append(R,P),set_input_value(P,e[5]),append(o,H),append(o,q),append(q,D),append(q,V),append(q,F),set_input_value(F,e[6]),append(o,Z),append(o,T),append(T,z),append(T,K),append(T,L),set_input_value(L,e[7]),append(o,Q),append(o,J),append(J,U),append(J,j),append(J,M),set_input_value(M,e[8]),X||(ee=[listen(a,"input",e[10]),listen(y,"input",e[11]),listen(p,"input",e[12]),listen(S,"input",e[13]),listen(_,"input",e[14]),listen(P,"input",e[15]),listen(F,"input",e[16]),listen(L,"input",e[17]),listen(M,"input",e[18]),listen(t,"submit",prevent_default(e[9]))],X=!0)},p(g,[B]){B&1&&a.value!==g[0]&&set_input_value(a,g[0]),B&2&&y.value!==g[1]&&set_input_value(y,g[1]),B&4&&p.value!==g[2]&&set_input_value(p,g[2]),B&8&&S.value!==g[3]&&set_input_value(S,g[3]),B&16&&_.value!==g[4]&&set_input_value(_,g[4]),B&32&&P.value!==g[5]&&set_input_value(P,g[5]),B&64&&F.value!==g[6]&&set_input_value(F,g[6]),B&128&&L.value!==g[7]&&set_input_value(L,g[7]),B&256&&M.value!==g[8]&&set_input_value(M,g[8])},i:noop$1,o:noop$1,d(g){g&&detach(t),X=!1,run_all(ee)}}}function instance$2(e,t,n){let{name:i}=t,r=2,a=20,l=12,u=1500,s=5e3,o=5,d=1,c=200;const f=createEventDispatcher();function m(){f("submit",{name:i,options:{players:r,serverTickRate:a,liquidPerPlayer:l,liquidMinSpeed:u,liquidMaxSpeed:s,ccdSubsteps:o,linearDamping:d,maxStabilizationIterations:c}})}function h(){i=this.value,n(0,i)}function y(){r=this.value,n(1,r)}function v(){a=this.value,n(2,a)}function w(){l=this.value,n(3,l)}function $(){u=this.value,n(4,u)}function I(){s=this.value,n(5,s)}function p(){o=this.value,n(6,o)}function k(){d=this.value,n(7,d)}function b(){c=this.value,n(8,c)}return e.$$set=x=>{"name"in x&&n(0,i=x.name)},[i,r,a,l,u,s,o,d,c,m,h,y,v,w,$,I,p,k,b]}class GameOptionsForm extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$2,safe_not_equal,{name:0})}}const Lobby_svelte_svelte_type_style_lang="";function get_each_context(e,t,n){const i=e.slice();return i[9]=t[n],i[11]=n,i}function create_else_block(e){let t,n=e[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=create_each_block(get_each_context(e,n,r));return{c(){t=element("ul");for(let r=0;r<i.length;r+=1)i[r].c();attr(t,"class","svelte-6ssi6z")},m(r,a){insert(r,t,a);for(let l=0;l<i.length;l+=1)i[l].m(t,null)},p(r,a){if(a&9){n=r[0];let l;for(l=0;l<n.length;l+=1){const u=get_each_context(r,n,l);i[l]?i[l].p(u,a):(i[l]=create_each_block(u),i[l].c(),i[l].m(t,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){r&&detach(t),destroy_each(i,r)}}}function create_if_block$1(e){let t;return{c(){t=element("h3"),t.textContent="No games",set_style(t,"margin-top","2rem")},m(n,i){insert(n,t,i)},p:noop$1,d(n){n&&detach(t)}}}function create_each_block(e){let t,n,i,r,a=e[9].players+"",l,u,s=e[9].maxPlayers+"",o,d,c,f;function m(){return e[4](e[11])}return{c(){t=element("li"),n=element("div"),i=element("button"),r=text("Players: "),l=text(a),u=text("/"),o=text(s),d=space(),attr(i,"class","svelte-6ssi6z")},m(h,y){insert(h,t,y),append(t,n),append(n,i),append(i,r),append(i,l),append(i,u),append(i,o),append(t,d),c||(f=listen(i,"click",m),c=!0)},p(h,y){e=h,y&1&&a!==(a=e[9].players+"")&&set_data(l,a),y&1&&s!==(s=e[9].maxPlayers+"")&&set_data(o,s)},d(h){h&&detach(t),c=!1,f()}}}function create_fragment$1(e){let t,n,i,r,a,l,u,s;a=new GameOptionsForm({props:{name:e[1]}}),a.$on("submit",e[2]);function o(f,m){return f[0].length===0?create_if_block$1:create_else_block}let d=o(e),c=d(e);return{c(){t=element("div"),n=element("h1"),n.textContent="Liquid War",i=space(),r=element("div"),create_component(a.$$.fragment),l=space(),u=element("div"),c.c(),attr(n,"class","svelte-6ssi6z"),attr(u,"class","games svelte-6ssi6z"),attr(r,"class","body svelte-6ssi6z"),attr(t,"class","container svelte-6ssi6z")},m(f,m){insert(f,t,m),append(t,n),append(t,i),append(t,r),mount_component(a,r,null),append(r,l),append(r,u),c.m(u,null),s=!0},p(f,[m]){const h={};m&2&&(h.name=f[1]),a.$set(h),d===(d=o(f))&&c?c.p(f,m):(c.d(1),c=d(f),c&&(c.c(),c.m(u,null)))},i(f){s||(transition_in(a.$$.fragment,f),s=!0)},o(f){transition_out(a.$$.fragment,f),s=!1},d(f){f&&detach(t),destroy_component(a),c.d()}}}function instance$1(e,t,n){let i,r;component_subscribe(e,lobbyGames,o=>n(0,i=o)),component_subscribe(e,playerName,o=>n(1,r=o));let a=2;onMount(()=>{function o(d){d.data.type&&d.data.type==="play"&&(a=d.data.players,document.querySelector("button").click())}return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}});function l(o){gameActions.setPlayerName(o.detail.name),gameActions.createGame(o.detail.options)}function u(o){const d=i[o];gameActions.joinGame(d,{serverTickRate:0,liquidPerPlayer:0,cursorSpeed:0,players:a})}return[i,r,l,u,o=>u(o)]}class Lobby extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}function initializeAI(){balls.subscribe(e=>{const t=get_store_value(localPlayer);if(t){const n=e.find(i=>i.player!==t.playerNumber);gfxActions.updateMouse(n.x,n.y)}})}const App_svelte_svelte_type_style_lang="";function create_if_block_4(e){let t;return{c(){t=element("div"),t.innerHTML=`<h1 class="svelte-ge3aoc">Liquid War</h1> 
      <p>Connecting...</p>`,attr(t,"class","loading-menu svelte-ge3aoc")},m(n,i){insert(n,t,i)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_3(e){let t,n;return t=new Canvas({}),{c(){create_component(t.$$.fragment)},m(i,r){mount_component(t,i,r),n=!0},p:noop$1,i(i){n||(transition_in(t.$$.fragment,i),n=!0)},o(i){transition_out(t.$$.fragment,i),n=!1},d(i){destroy_component(t,i)}}}function create_if_block_2(e){let t,n,i,r,a,l,u,s,o;return{c(){t=element("div"),n=element("marquee"),n.textContent="Game ended",i=space(),r=element("p"),a=text(e[0]),l=space(),u=element("button"),u.textContent="Play again",attr(n,"class","title svelte-ge3aoc"),attr(n,"width","50%"),attr(r,"class","game-winner svelte-ge3aoc"),attr(u,"class","svelte-ge3aoc"),attr(t,"class","end-menu svelte-ge3aoc")},m(d,c){insert(d,t,c),append(t,n),append(t,i),append(t,r),append(r,a),append(t,l),append(t,u),s||(o=listen(u,"click",e[2]),s=!0)},p(d,c){c&1&&set_data(a,d[0])},i:noop$1,o:noop$1,d(d){d&&detach(t),s=!1,o()}}}function create_if_block_1(e){let t,n;return t=new Lobby({}),{c(){create_component(t.$$.fragment)},m(i,r){mount_component(t,i,r),n=!0},p:noop$1,i(i){n||(transition_in(t.$$.fragment,i),n=!0)},o(i){transition_out(t.$$.fragment,i),n=!1},d(i){destroy_component(t,i)}}}function create_if_block(e){let t;return{c(){t=element("div"),t.innerHTML="<h2>Waiting for players\u2026</h2>",attr(t,"class","loading-menu svelte-ge3aoc")},m(n,i){insert(n,t,i)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_fragment(e){let t,n,i,r;const a=[create_if_block,create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4],l=[];function u(s,o){return s[1]==="waiting-game-start"?0:s[1]==="lobby"?1:s[1]==="game-ended"?2:s[1]==="game-running"?3:s[1]==="connecting"?4:-1}return~(n=u(e))&&(i=l[n]=a[n](e)),{c(){t=element("main"),i&&i.c(),attr(t,"class","svelte-ge3aoc")},m(s,o){insert(s,t,o),~n&&l[n].m(t,null),r=!0},p(s,[o]){let d=n;n=u(s),n===d?~n&&l[n].p(s,o):(i&&(group_outros(),transition_out(l[d],1,1,()=>{l[d]=null}),check_outros()),~n?(i=l[n],i?i.p(s,o):(i=l[n]=a[n](s),i.c()),transition_in(i,1),i.m(t,null)):i=null)},i(s){r||(transition_in(i),r=!0)},o(s){transition_out(i),r=!1},d(s){s&&detach(t),~n&&l[n].d()}}}function instance(e,t,n){let i,r;component_subscribe(e,gameEnd,u=>n(3,i=u)),component_subscribe(e,gameState,u=>n(1,r=u));let a="";onMount(()=>{const u=new URLSearchParams(window.location.search);u.has("autoplay")&&window.addEventListener("load",()=>{document.querySelector("button").click()}),u.has("ai")&&initializeAI(),window.addEventListener("pointermove",function(s){let o=document.querySelector("canvas");if(!o)return;let d=o.getBoundingClientRect();if(s.clientX>=d.left&&s.clientX<d.right&&s.clientY>=d.top&&s.clientY<d.bottom){let c=o.width/d.width,f=o.height/d.height;gfxActions.updateMouse((s.clientX-d.left)*c,(s.clientY-d.top)*f)}},!1),gameActions.runGame()});function l(){gameActions.joinLobby()}return e.$$.update=()=>{var u,s;if(e.$$.dirty&8){const o=i;o&&(o.result===GameStatus.PLAYER_WON&&((u=o.winner)==null?void 0:u.id)===playerId?n(0,a="You won \u{1F3C6} :DD"):o.result===GameStatus.PLAYER_WON&&((s=o.winner)==null?void 0:s.id)!==playerId?n(0,a="You lost \u{1F635}"):o.result===GameStatus.TIE?n(0,a="Tie \u{1F926}\u200D\u2642\uFE0F"):o.result===GameStatus.AI_WON?n(0,a="Computer won \u{1F916}"):n(0,a=`Something weird happened: ${GameStatus}`))}},[a,r,l,i]}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}const index="";enableDebug(!1);const el=document.querySelector("#app");el&&new App({target:el});
