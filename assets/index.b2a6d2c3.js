(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();function noop$1(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return typeof e=="function"}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function is_empty(e){return Object.keys(e).length===0}function subscribe(e,...t){if(e==null)return noop$1;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function get_store_value(e){let t;return subscribe(e,r=>t=r)(),t}function component_subscribe(e,t,r){e.$$.on_destroy.push(subscribe(t,r))}function append(e,t){e.appendChild(t)}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,r,i){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=t==null?"":t}function set_style(e,t,r,i){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,i?"important":"")}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){const e=current_component;do{for(;flushidx<dirty_components.length;){const t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const r=render_callbacks[t];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(e.fragment!==null){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,i){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push(()=>{outroing.delete(e),i&&(r&&e.d(1),i())}),e.o(t)}else i&&i()}function create_component(e){e&&e.c()}function mount_component(e,t,r,i){const{fragment:n,after_update:a}=e.$$;n&&n.m(t,r),i||add_render_callback(()=>{const o=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...o):run_all(o),e.$$.on_mount=[]}),a.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;r.fragment!==null&&(run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){e.$$.dirty[0]===-1&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,r,i,n,a,o,u=[-1]){const l=current_component;set_current_component(e);const s=e.$$={fragment:null,ctx:[],props:a,update:noop$1,not_equal:n,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:u,skip_bound:!1,root:t.target||l.$$.root};o&&o(s.root);let c=!1;if(s.ctx=r?r(e,t.props||{},(d,f,...p)=>{const m=p.length?p[0]:f;return s.ctx&&n(s.ctx[d],s.ctx[d]=m)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](m),c&&make_dirty(e,d)),f}):[],s.update(),c=!0,run_all(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const d=children(t.target);s.fragment&&s.fragment.l(d),d.forEach(detach)}else s.fragment&&s.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(t,r){if(!is_function(r))return noop$1;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(r),()=>{const n=i.indexOf(r);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!is_empty(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(e,t=noop$1){let r;const i=new Set;function n(u){if(safe_not_equal(e,u)&&(e=u,r)){const l=!subscriber_queue.length;for(const s of i)s[1](),subscriber_queue.push(s,e);if(l){for(let s=0;s<subscriber_queue.length;s+=2)subscriber_queue[s][0](subscriber_queue[s+1]);subscriber_queue.length=0}}}function a(u){n(u(e))}function o(u,l=noop$1){const s=[u,l];return i.add(s),i.size===1&&(r=t(n)||noop$1),u(e),()=>{i.delete(s),i.size===0&&(r(),r=null)}}return{set:n,update:a,subscribe:o}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),i=0,n=2,a=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(u,l){r[i]=function(c){if(a)if(a=!1,c)l(c);else{for(var d=new Array(arguments.length-1),f=0;f<d.length;)d[f++]=arguments[f];u.apply(null,d)}};try{e.apply(t||null,r)}catch(s){a&&(a=!1,l(s))}})}var base64$1={};(function(e){var t=e;t.length=function(u){var l=u.length;if(!l)return 0;for(var s=0;--l%4>1&&u.charAt(l)==="=";)++s;return Math.ceil(u.length*3)/4-s};for(var r=new Array(64),i=new Array(123),n=0;n<64;)i[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;t.encode=function(u,l,s){for(var c=null,d=[],f=0,p=0,m;l<s;){var y=u[l++];switch(p){case 0:d[f++]=r[y>>2],m=(y&3)<<4,p=1;break;case 1:d[f++]=r[m|y>>4],m=(y&15)<<2,p=2;break;case 2:d[f++]=r[m|y>>6],d[f++]=r[y&63],p=0;break}f>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,d)),f=0)}return p&&(d[f++]=r[m],d[f++]=61,p===1&&(d[f++]=61)),c?(f&&c.push(String.fromCharCode.apply(String,d.slice(0,f))),c.join("")):String.fromCharCode.apply(String,d.slice(0,f))};var a="invalid encoding";t.decode=function(u,l,s){for(var c=s,d=0,f,p=0;p<u.length;){var m=u.charCodeAt(p++);if(m===61&&d>1)break;if((m=i[m])===void 0)throw Error(a);switch(d){case 0:f=m,d=1;break;case 1:l[s++]=f<<2|(m&48)>>4,f=m,d=2;break;case 2:l[s++]=(f&15)<<4|(m&60)>>2,f=m,d=3;break;case 3:l[s++]=(f&3)<<6|m,d=0;break}}if(d===1)throw Error(a);return s-c},t.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,r,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:i||this}),this};EventEmitter.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var i=this._listeners[t],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};EventEmitter.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this};var float=factory(factory);function factory(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=r[3]===128;function n(l,s,c){t[0]=l,s[c]=r[0],s[c+1]=r[1],s[c+2]=r[2],s[c+3]=r[3]}function a(l,s,c){t[0]=l,s[c]=r[3],s[c+1]=r[2],s[c+2]=r[1],s[c+3]=r[0]}e.writeFloatLE=i?n:a,e.writeFloatBE=i?a:n;function o(l,s){return r[0]=l[s],r[1]=l[s+1],r[2]=l[s+2],r[3]=l[s+3],t[0]}function u(l,s){return r[3]=l[s],r[2]=l[s+1],r[1]=l[s+2],r[0]=l[s+3],t[0]}e.readFloatLE=i?o:u,e.readFloatBE=i?u:o}():function(){function t(i,n,a,o){var u=n<0?1:0;if(u&&(n=-n),n===0)i(1/n>0?0:2147483648,a,o);else if(isNaN(n))i(2143289344,a,o);else if(n>34028234663852886e22)i((u<<31|2139095040)>>>0,a,o);else if(n<11754943508222875e-54)i((u<<31|Math.round(n/1401298464324817e-60))>>>0,a,o);else{var l=Math.floor(Math.log(n)/Math.LN2),s=Math.round(n*Math.pow(2,-l)*8388608)&8388607;i((u<<31|l+127<<23|s)>>>0,a,o)}}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE);function r(i,n,a){var o=i(n,a),u=(o>>31)*2+1,l=o>>>23&255,s=o&8388607;return l===255?s?NaN:u*(1/0):l===0?u*1401298464324817e-60*s:u*Math.pow(2,l-150)*(s+8388608)}e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=r[7]===128;function n(l,s,c){t[0]=l,s[c]=r[0],s[c+1]=r[1],s[c+2]=r[2],s[c+3]=r[3],s[c+4]=r[4],s[c+5]=r[5],s[c+6]=r[6],s[c+7]=r[7]}function a(l,s,c){t[0]=l,s[c]=r[7],s[c+1]=r[6],s[c+2]=r[5],s[c+3]=r[4],s[c+4]=r[3],s[c+5]=r[2],s[c+6]=r[1],s[c+7]=r[0]}e.writeDoubleLE=i?n:a,e.writeDoubleBE=i?a:n;function o(l,s){return r[0]=l[s],r[1]=l[s+1],r[2]=l[s+2],r[3]=l[s+3],r[4]=l[s+4],r[5]=l[s+5],r[6]=l[s+6],r[7]=l[s+7],t[0]}function u(l,s){return r[7]=l[s],r[6]=l[s+1],r[5]=l[s+2],r[4]=l[s+3],r[3]=l[s+4],r[2]=l[s+5],r[1]=l[s+6],r[0]=l[s+7],t[0]}e.readDoubleLE=i?o:u,e.readDoubleBE=i?u:o}():function(){function t(i,n,a,o,u,l){var s=o<0?1:0;if(s&&(o=-o),o===0)i(0,u,l+n),i(1/o>0?0:2147483648,u,l+a);else if(isNaN(o))i(0,u,l+n),i(2146959360,u,l+a);else if(o>17976931348623157e292)i(0,u,l+n),i((s<<31|2146435072)>>>0,u,l+a);else{var c;if(o<22250738585072014e-324)c=o/5e-324,i(c>>>0,u,l+n),i((s<<31|c/4294967296)>>>0,u,l+a);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),c=o*Math.pow(2,-d),i(c*4503599627370496>>>0,u,l+n),i((s<<31|d+1023<<20|c*1048576&1048575)>>>0,u,l+a)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function r(i,n,a,o,u){var l=i(o,u+n),s=i(o,u+a),c=(s>>31)*2+1,d=s>>>20&2047,f=4294967296*(s&1048575)+l;return d===2047?f?NaN:c*(1/0):d===0?c*5e-324*f:c*Math.pow(2,d-1075)*(f+4503599627370496)}e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var t=e;t.length=function(i){for(var n=0,a=0,o=0;o<i.length;++o)a=i.charCodeAt(o),a<128?n+=1:a<2048?n+=2:(a&64512)===55296&&(i.charCodeAt(o+1)&64512)===56320?(++o,n+=4):n+=3;return n},t.read=function(i,n,a){var o=a-n;if(o<1)return"";for(var u=null,l=[],s=0,c;n<a;)c=i[n++],c<128?l[s++]=c:c>191&&c<224?l[s++]=(c&31)<<6|i[n++]&63:c>239&&c<365?(c=((c&7)<<18|(i[n++]&63)<<12|(i[n++]&63)<<6|i[n++]&63)-65536,l[s++]=55296+(c>>10),l[s++]=56320+(c&1023)):l[s++]=(c&15)<<12|(i[n++]&63)<<6|i[n++]&63,s>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,l)),s=0);return u?(s&&u.push(String.fromCharCode.apply(String,l.slice(0,s))),u.join("")):String.fromCharCode.apply(String,l.slice(0,s))},t.write=function(i,n,a){for(var o=a,u,l,s=0;s<i.length;++s)u=i.charCodeAt(s),u<128?n[a++]=u:u<2048?(n[a++]=u>>6|192,n[a++]=u&63|128):(u&64512)===55296&&((l=i.charCodeAt(s+1))&64512)===56320?(u=65536+((u&1023)<<10)+(l&1023),++s,n[a++]=u>>18|240,n[a++]=u>>12&63|128,n[a++]=u>>6&63|128,n[a++]=u&63|128):(n[a++]=u>>12|224,n[a++]=u>>6&63|128,n[a++]=u&63|128);return a-o}})(utf8$2);var pool_1=pool;function pool(e,t,r){var i=r||8192,n=i>>>1,a=null,o=i;return function(l){if(l<1||l>n)return e(l);o+l>i&&(a=e(i),o=0);var s=t.call(a,o,o+=l);return o&7&&(o=(o|7)+1),s}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal();function t(a,o){this.lo=a>>>0,this.hi=o>>>0}var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var i=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(o){if(o===0)return r;var u=o<0;u&&(o=-o);var l=o>>>0,s=(o-l)/4294967296>>>0;return u&&(s=~s>>>0,l=~l>>>0,++l>4294967295&&(l=0,++s>4294967295&&(s=0))),new t(l,s)},t.from=function(o){if(typeof o=="number")return t.fromNumber(o);if(e.isString(o))if(e.Long)o=e.Long.fromString(o);else return t.fromNumber(parseInt(o,10));return o.low||o.high?new t(o.low>>>0,o.high>>>0):r},t.prototype.toNumber=function(o){if(!o&&this.hi>>>31){var u=~this.lo+1>>>0,l=~this.hi>>>0;return u||(l=l+1>>>0),-(u+l*4294967296)}return this.lo+this.hi*4294967296},t.prototype.toLong=function(o){return e.Long?new e.Long(this.lo|0,this.hi|0,Boolean(o)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(o)}};var n=String.prototype.charCodeAt;return t.fromHash=function(o){return o===i?r:new t((n.call(o,0)|n.call(o,1)<<8|n.call(o,2)<<16|n.call(o,3)<<24)>>>0,(n.call(o,4)|n.call(o,5)<<8|n.call(o,6)<<16|n.call(o,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var o=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^o)>>>0,this.lo=(this.lo<<1^o)>>>0,this},t.prototype.zzDecode=function(){var o=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^o)>>>0,this.hi=(this.hi>>>1^o)>>>0,this},t.prototype.length=function(){var o=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,l=this.hi>>>24;return l===0?u===0?o<16384?o<128?1:2:o<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:l<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var t=e;t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=requireLongbits(),t.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a},t.isString=function(a){return typeof a=="string"||a instanceof String},t.isObject=function(a){return a&&typeof a=="object"},t.isset=t.isSet=function(a,o){var u=a[o];return u!=null&&a.hasOwnProperty(o)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},t.Buffer=function(){try{var n=t.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(a){return typeof a=="number"?t.Buffer?t._Buffer_allocUnsafe(a):new t.Array(a):t.Buffer?t._Buffer_from(a):typeof Uint8Array>"u"?a:new Uint8Array(a)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(a){return a?t.LongBits.from(a).toHash():t.LongBits.zeroHash},t.longFromHash=function(a,o){var u=t.LongBits.fromHash(a);return t.Long?t.Long.fromBits(u.lo,u.hi,o):u.toNumber(Boolean(o))};function r(n,a,o){for(var u=Object.keys(a),l=0;l<u.length;++l)(n[u[l]]===void 0||!o)&&(n[u[l]]=a[u[l]]);return n}t.merge=r,t.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};function i(n){function a(o,u){if(!(this instanceof a))return new a(o,u);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&r(this,u)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(a){for(var o={},u=0;u<a.length;++u)o[a[u]]=1;return function(){for(var l=Object.keys(this),s=l.length-1;s>-1;--s)if(o[l[s]]===1&&this[l[s]]!==void 0&&this[l[s]]!==null)return l[s]}},t.oneOfSetter=function(a){return function(o){for(var u=0;u<a.length;++u)a[u]!==o&&delete this[a[u]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var n=t.Buffer;if(!n){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=n.from!==Uint8Array.from&&n.from||function(o,u){return new n(o,u)},t._Buffer_allocUnsafe=n.allocUnsafe||function(o){return new n(o)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function e(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function e(t){return new util$4.Array(t)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function e(t,r,i){return this.tail=this.tail.next=new Op(t,r,i),this.len+=r,this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Writer$1.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer$1.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Writer$1.prototype.uint64=function e(t){var r=LongBits$1.from(t);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(t){var r=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(t){var r=LongBits$1.from(t);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(t){return this._push(util$4.float.writeFloatLE,4,t)};Writer$1.prototype.double=function e(t){return this._push(util$4.float.writeDoubleLE,8,t)};var writeBytes=util$4.Array.prototype.set?function e(t,r,i){r.set(t,i)}:function e(t,r,i){for(var n=0;n<t.length;++n)r[i+n]=t[n]};Writer$1.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(t)){var i=Writer$1.alloc(r=base64.length(t));base64.decode(t,i,0),t=i}return this.uint32(r)._push(writeBytes,r,t)};Writer$1.prototype.string=function e(t){var r=utf8$1.length(t);return r?this.uint32(r)._push(utf8$1.write,r,t):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function e(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function e(){var t=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=r,this.len+=i),this};Writer$1.prototype.finish=function e(){for(var t=this.head.next,r=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,r,i),i+=t.len,t=t.next;return r};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(t,r,i){r.set(t,i)}:function(t,r,i){if(t.copy)t.copy(r,i,0,t.length);else for(var n=0;n<t.length;)r[i++]=t[n++]}};BufferWriter.prototype.bytes=function e(t){util$3.isString(t)&&(t=util$3._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,t),this};function writeStringBuffer(e,t,r){e.length<40?util$3.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter.prototype.string=function e(t){var r=util$3.Buffer.byteLength(t);return this.uint32(r),r&&this._push(writeStringBuffer,r,t),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")},create=function e(){return util$2.Buffer?function(r){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(r)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Reader$1.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Reader$1.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader$1.prototype.skip=function e(t){if(typeof t=="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function e(t,r,i,n,a){if(!n)throw TypeError("request must be specified");var o=this;if(!a)return util.asPromise(e,o,t,r,i,n);if(!o.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(l,s){if(l)return o.emit("error",l,t),a(l);if(s===null){o.end(!0);return}if(!(s instanceof i))try{s=i[o.responseDelimited?"decodeDelimited":"decode"](s)}catch(c){return o.emit("error",c,t),a(c)}return o.emit("data",s,t),a(null,s)})}catch(u){o.emit("error",u,t),setTimeout(function(){a(u)},0);return}};Service.prototype.end=function e(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var t=e;t.Service=service})(rpc);var roots={};(function(e){var t=e;t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=requireMinimal(),t.rpc=rpc,t.roots=roots,t.configure=r;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}r()})(indexMinimal);(function(e){e.exports=indexMinimal})(minimal$1);var ClientMsgType;(function(e){e[e.join_lobby=0]="join_lobby",e[e.lobby_msg=1]="lobby_msg",e[e.create_lobby_game=2]="create_lobby_game",e[e.join_lobby_game=3]="join_lobby_game",e[e.leave_lobby_game=4]="leave_lobby_game",e[e.player_move=5]="player_move",e[e.leave_game=6]="leave_game",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientMsgType||(ClientMsgType={}));var ServerMsgType;(function(e){e[e.lobby_state=0]="lobby_state",e[e.player_msg=1]="player_msg",e[e.player_join_lobby=2]="player_join_lobby",e[e.player_leave_lobby=3]="player_leave_lobby",e[e.lobby_game_updated=4]="lobby_game_updated",e[e.player_join=5]="player_join",e[e.game_start=6]="game_start",e[e.game_end=7]="game_end",e[e.tick=8]="tick",e[e.player_left=9]="player_left",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerMsgType||(ServerMsgType={}));var GameStatus;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.PLAYER_WON=2]="PLAYER_WON",e[e.AI_WON=3]="AI_WON",e[e.TIE=4]="TIE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GameStatus||(GameStatus={}));function gameStatusFromJSON(e){switch(e){case 0:case"WAITING":return GameStatus.WAITING;case 1:case"RUNNING":return GameStatus.RUNNING;case 2:case"PLAYER_WON":return GameStatus.PLAYER_WON;case 3:case"AI_WON":return GameStatus.AI_WON;case 4:case"TIE":return GameStatus.TIE;case-1:case"UNRECOGNIZED":default:return GameStatus.UNRECOGNIZED}}function gameStatusToJSON(e){switch(e){case GameStatus.WAITING:return"WAITING";case GameStatus.RUNNING:return"RUNNING";case GameStatus.PLAYER_WON:return"PLAYER_WON";case GameStatus.AI_WON:return"AI_WON";case GameStatus.TIE:return"TIE";case GameStatus.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBasePlayer(){return{id:0,clientId:0,playerNumber:0,name:"",color:0,cursor:void 0,dead:!1}}const Player={encode(e,t=minimal$1.exports.Writer.create()){return e.id!==0&&t.uint32(8).uint32(e.id),e.clientId!==0&&t.uint32(16).uint32(e.clientId),e.playerNumber!==0&&t.uint32(24).uint32(e.playerNumber),e.name!==""&&t.uint32(34).string(e.name),e.color!==0&&t.uint32(40).uint32(e.color),e.cursor!==void 0&&Cursor.encode(e.cursor,t.uint32(50).fork()).ldelim(),e.dead===!0&&t.uint32(56).bool(e.dead),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayer();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.id=r.uint32();break;case 2:n.clientId=r.uint32();break;case 3:n.playerNumber=r.uint32();break;case 4:n.name=r.string();break;case 5:n.color=r.uint32();break;case 6:n.cursor=Cursor.decode(r,r.uint32());break;case 7:n.dead=r.bool();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{id:isSet(e.id)?Number(e.id):0,clientId:isSet(e.clientId)?Number(e.clientId):0,playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?Number(e.color):0,cursor:isSet(e.cursor)?Cursor.fromJSON(e.cursor):void 0,dead:isSet(e.dead)?Boolean(e.dead):!1}},toJSON(e){const t={};return e.id!==void 0&&(t.id=Math.round(e.id)),e.clientId!==void 0&&(t.clientId=Math.round(e.clientId)),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=Math.round(e.color)),e.cursor!==void 0&&(t.cursor=e.cursor?Cursor.toJSON(e.cursor):void 0),e.dead!==void 0&&(t.dead=e.dead),t},fromPartial(e){var t,r,i,n,a,o;const u=createBasePlayer();return u.id=(t=e.id)!==null&&t!==void 0?t:0,u.clientId=(r=e.clientId)!==null&&r!==void 0?r:0,u.playerNumber=(i=e.playerNumber)!==null&&i!==void 0?i:0,u.name=(n=e.name)!==null&&n!==void 0?n:"",u.color=(a=e.color)!==null&&a!==void 0?a:0,u.cursor=e.cursor!==void 0&&e.cursor!==null?Cursor.fromPartial(e.cursor):void 0,u.dead=(o=e.dead)!==null&&o!==void 0?o:!1,u}};function createBaseCursor(){return{player:0,x:0,y:0}}const Cursor={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.x!==0&&t.uint32(16).uint32(e.x),e.y!==0&&t.uint32(24).uint32(e.y),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseCursor();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.player=r.uint32();break;case 2:n.x=r.uint32();break;case 3:n.y=r.uint32();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.x!==void 0&&(t.x=Math.round(e.x)),e.y!==void 0&&(t.y=Math.round(e.y)),t},fromPartial(e){var t,r,i;const n=createBaseCursor();return n.player=(t=e.player)!==null&&t!==void 0?t:0,n.x=(r=e.x)!==null&&r!==void 0?r:0,n.y=(i=e.y)!==null&&i!==void 0?i:0,n}};function createBaseBallOwner(){return{player:0,percentage:0}}const BallOwner={encode(e,t=minimal$1.exports.Writer.create()){return e.player!==0&&t.uint32(8).uint32(e.player),e.percentage!==0&&t.uint32(21).float(e.percentage),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseBallOwner();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.player=r.uint32();break;case 2:n.percentage=r.float();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,percentage:isSet(e.percentage)?Number(e.percentage):0}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.percentage!==void 0&&(t.percentage=e.percentage),t},fromPartial(e){var t,r;const i=createBaseBallOwner();return i.player=(t=e.player)!==null&&t!==void 0?t:0,i.percentage=(r=e.percentage)!==null&&r!==void 0?r:0,i}};function createBaseBall(){return{player:0,color:0,x:0,y:0,radius:0,owners:[]}}const Ball={encode(e,t=minimal$1.exports.Writer.create()){e.player!==0&&t.uint32(8).uint32(e.player),e.color!==0&&t.uint32(16).uint32(e.color),e.x!==0&&t.uint32(29).float(e.x),e.y!==0&&t.uint32(37).float(e.y),e.radius!==0&&t.uint32(45).float(e.radius);for(const r of e.owners)BallOwner.encode(r,t.uint32(50).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseBall();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.player=r.uint32();break;case 2:n.color=r.uint32();break;case 3:n.x=r.float();break;case 4:n.y=r.float();break;case 5:n.radius=r.float();break;case 6:n.owners.push(BallOwner.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{player:isSet(e.player)?Number(e.player):0,color:isSet(e.color)?Number(e.color):0,x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0,radius:isSet(e.radius)?Number(e.radius):0,owners:Array.isArray(e==null?void 0:e.owners)?e.owners.map(t=>BallOwner.fromJSON(t)):[]}},toJSON(e){const t={};return e.player!==void 0&&(t.player=Math.round(e.player)),e.color!==void 0&&(t.color=Math.round(e.color)),e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.radius!==void 0&&(t.radius=e.radius),e.owners?t.owners=e.owners.map(r=>r?BallOwner.toJSON(r):void 0):t.owners=[],t},fromPartial(e){var t,r,i,n,a,o;const u=createBaseBall();return u.player=(t=e.player)!==null&&t!==void 0?t:0,u.color=(r=e.color)!==null&&r!==void 0?r:0,u.x=(i=e.x)!==null&&i!==void 0?i:0,u.y=(n=e.y)!==null&&n!==void 0?n:0,u.radius=(a=e.radius)!==null&&a!==void 0?a:0,u.owners=((o=e.owners)===null||o===void 0?void 0:o.map(l=>BallOwner.fromPartial(l)))||[],u}};function createBaseRect(){return{x:0,y:0,width:0,height:0,rotation:0}}const Rect={encode(e,t=minimal$1.exports.Writer.create()){return e.x!==0&&t.uint32(21).float(e.x),e.y!==0&&t.uint32(29).float(e.y),e.width!==0&&t.uint32(37).float(e.width),e.height!==0&&t.uint32(45).float(e.height),e.rotation!==0&&t.uint32(53).float(e.rotation),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseRect();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 2:n.x=r.float();break;case 3:n.y=r.float();break;case 4:n.width=r.float();break;case 5:n.height=r.float();break;case 6:n.rotation=r.float();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{x:isSet(e.x)?Number(e.x):0,y:isSet(e.y)?Number(e.y):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,rotation:isSet(e.rotation)?Number(e.rotation):0}},toJSON(e){const t={};return e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.width!==void 0&&(t.width=e.width),e.height!==void 0&&(t.height=e.height),e.rotation!==void 0&&(t.rotation=e.rotation),t},fromPartial(e){var t,r,i,n,a;const o=createBaseRect();return o.x=(t=e.x)!==null&&t!==void 0?t:0,o.y=(r=e.y)!==null&&r!==void 0?r:0,o.width=(i=e.width)!==null&&i!==void 0?i:0,o.height=(n=e.height)!==null&&n!==void 0?n:0,o.rotation=(a=e.rotation)!==null&&a!==void 0?a:0,o}};function createBaseLobbyGame(){return{gameId:"",players:0,maxPlayers:0}}const LobbyGame={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.players!==0&&t.uint32(16).uint32(e.players),e.maxPlayers!==0&&t.uint32(24).uint32(e.maxPlayers),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseLobbyGame();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.players=r.uint32();break;case 3:n.maxPlayers=r.uint32();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:isSet(e.players)?Number(e.players):0,maxPlayers:isSet(e.maxPlayers)?Number(e.maxPlayers):0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.players!==void 0&&(t.players=Math.round(e.players)),e.maxPlayers!==void 0&&(t.maxPlayers=Math.round(e.maxPlayers)),t},fromPartial(e){var t,r,i;const n=createBaseLobbyGame();return n.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",n.players=(r=e.players)!==null&&r!==void 0?r:0,n.maxPlayers=(i=e.maxPlayers)!==null&&i!==void 0?i:0,n}};function createBaseLobbyPlayer(){return{playerId:0,name:""}}const LobbyPlayer={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(16).uint32(e.playerId),e.name!==""&&t.uint32(26).string(e.name),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseLobbyPlayer();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 2:n.playerId=r.uint32();break;case 3:n.name=r.string();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):""}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),t},fromPartial(e){var t,r;const i=createBaseLobbyPlayer();return i.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,i.name=(r=e.name)!==null&&r!==void 0?r:"",i}};function createBaseLobbyState(){return{games:[],players:[]}}const LobbyState={encode(e,t=minimal$1.exports.Writer.create()){for(const r of e.games)LobbyGame.encode(r,t.uint32(10).fork()).ldelim();for(const r of e.players)LobbyPlayer.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseLobbyState();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.games.push(LobbyGame.decode(r,r.uint32()));break;case 2:n.players.push(LobbyPlayer.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{games:Array.isArray(e==null?void 0:e.games)?e.games.map(t=>LobbyGame.fromJSON(t)):[],players:Array.isArray(e==null?void 0:e.players)?e.players.map(t=>LobbyPlayer.fromJSON(t)):[]}},toJSON(e){const t={};return e.games?t.games=e.games.map(r=>r?LobbyGame.toJSON(r):void 0):t.games=[],e.players?t.players=e.players.map(r=>r?LobbyPlayer.toJSON(r):void 0):t.players=[],t},fromPartial(e){var t,r;const i=createBaseLobbyState();return i.games=((t=e.games)===null||t===void 0?void 0:t.map(n=>LobbyGame.fromPartial(n)))||[],i.players=((r=e.players)===null||r===void 0?void 0:r.map(n=>LobbyPlayer.fromPartial(n)))||[],i}};function createBaseGameStart(){return{gameId:"",players:[],balls:[],rects:[]}}const GameStart={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const r of e.players)Player.encode(r,t.uint32(18).fork()).ldelim();for(const r of e.balls)Ball.encode(r,t.uint32(26).fork()).ldelim();for(const r of e.rects)Rect.encode(r,t.uint32(34).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameStart();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.players.push(Player.decode(r,r.uint32()));break;case 3:n.balls.push(Ball.decode(r,r.uint32()));break;case 4:n.rects.push(Rect.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",players:Array.isArray(e==null?void 0:e.players)?e.players.map(t=>Player.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[],rects:Array.isArray(e==null?void 0:e.rects)?e.rects.map(t=>Rect.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.players?t.players=e.players.map(r=>r?Player.toJSON(r):void 0):t.players=[],e.balls?t.balls=e.balls.map(r=>r?Ball.toJSON(r):void 0):t.balls=[],e.rects?t.rects=e.rects.map(r=>r?Rect.toJSON(r):void 0):t.rects=[],t},fromPartial(e){var t,r,i,n;const a=createBaseGameStart();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",a.players=((r=e.players)===null||r===void 0?void 0:r.map(o=>Player.fromPartial(o)))||[],a.balls=((i=e.balls)===null||i===void 0?void 0:i.map(o=>Ball.fromPartial(o)))||[],a.rects=((n=e.rects)===null||n===void 0?void 0:n.map(o=>Rect.fromPartial(o)))||[],a}};function createBaseGameEnd(){return{gameId:"",result:0,winner:void 0}}const GameEnd={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.result!==0&&t.uint32(16).int32(e.result),e.winner!==void 0&&Player.encode(e.winner,t.uint32(26).fork()).ldelim(),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameEnd();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.result=r.int32();break;case 3:n.winner=Player.decode(r,r.uint32());break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",result:isSet(e.result)?gameStatusFromJSON(e.result):0,winner:isSet(e.winner)?Player.fromJSON(e.winner):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.result!==void 0&&(t.result=gameStatusToJSON(e.result)),e.winner!==void 0&&(t.winner=e.winner?Player.toJSON(e.winner):void 0),t},fromPartial(e){var t,r;const i=createBaseGameEnd();return i.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",i.result=(r=e.result)!==null&&r!==void 0?r:0,i.winner=e.winner!==void 0&&e.winner!==null?Player.fromPartial(e.winner):void 0,i}};function createBaseTick(){return{gameId:"",cursors:[],balls:[]}}const Tick={encode(e,t=minimal$1.exports.Writer.create()){e.gameId!==""&&t.uint32(10).string(e.gameId);for(const r of e.cursors)Cursor.encode(r,t.uint32(18).fork()).ldelim();for(const r of e.balls)Ball.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseTick();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.cursors.push(Cursor.decode(r,r.uint32()));break;case 3:n.balls.push(Ball.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",cursors:Array.isArray(e==null?void 0:e.cursors)?e.cursors.map(t=>Cursor.fromJSON(t)):[],balls:Array.isArray(e==null?void 0:e.balls)?e.balls.map(t=>Ball.fromJSON(t)):[]}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.cursors?t.cursors=e.cursors.map(r=>r?Cursor.toJSON(r):void 0):t.cursors=[],e.balls?t.balls=e.balls.map(r=>r?Ball.toJSON(r):void 0):t.balls=[],t},fromPartial(e){var t,r,i;const n=createBaseTick();return n.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",n.cursors=((r=e.cursors)===null||r===void 0?void 0:r.map(a=>Cursor.fromPartial(a)))||[],n.balls=((i=e.balls)===null||i===void 0?void 0:i.map(a=>Ball.fromPartial(a)))||[],n}};function createBaseGameOptions(){return{serverTickRate:0,liquidPerPlayer:0,cursorSpeed:0,players:0}}const GameOptions={encode(e,t=minimal$1.exports.Writer.create()){return e.serverTickRate!==0&&t.uint32(8).uint32(e.serverTickRate),e.liquidPerPlayer!==0&&t.uint32(16).uint32(e.liquidPerPlayer),e.cursorSpeed!==0&&t.uint32(24).uint32(e.cursorSpeed),e.players!==0&&t.uint32(32).uint32(e.players),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBaseGameOptions();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.serverTickRate=r.uint32();break;case 2:n.liquidPerPlayer=r.uint32();break;case 3:n.cursorSpeed=r.uint32();break;case 4:n.players=r.uint32();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{serverTickRate:isSet(e.serverTickRate)?Number(e.serverTickRate):0,liquidPerPlayer:isSet(e.liquidPerPlayer)?Number(e.liquidPerPlayer):0,cursorSpeed:isSet(e.cursorSpeed)?Number(e.cursorSpeed):0,players:isSet(e.players)?Number(e.players):0}},toJSON(e){const t={};return e.serverTickRate!==void 0&&(t.serverTickRate=Math.round(e.serverTickRate)),e.liquidPerPlayer!==void 0&&(t.liquidPerPlayer=Math.round(e.liquidPerPlayer)),e.cursorSpeed!==void 0&&(t.cursorSpeed=Math.round(e.cursorSpeed)),e.players!==void 0&&(t.players=Math.round(e.players)),t},fromPartial(e){var t,r,i,n;const a=createBaseGameOptions();return a.serverTickRate=(t=e.serverTickRate)!==null&&t!==void 0?t:0,a.liquidPerPlayer=(r=e.liquidPerPlayer)!==null&&r!==void 0?r:0,a.cursorSpeed=(i=e.cursorSpeed)!==null&&i!==void 0?i:0,a.players=(n=e.players)!==null&&n!==void 0?n:0,a}};function createBasePlayerJoinLobby(){return{playerId:0,name:""}}const PlayerJoinLobby={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(8).uint32(e.playerId),e.name!==""&&t.uint32(18).string(e.name),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerJoinLobby();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.playerId=r.uint32();break;case 2:n.name=r.string();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):""}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),t},fromPartial(e){var t,r;const i=createBasePlayerJoinLobby();return i.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,i.name=(r=e.name)!==null&&r!==void 0?r:"",i}};function createBasePlayerCreateGame(){return{playerId:0,name:"",color:"",options:void 0}}const PlayerCreateGame={encode(e,t=minimal$1.exports.Writer.create()){return e.playerId!==0&&t.uint32(8).uint32(e.playerId),e.name!==""&&t.uint32(18).string(e.name),e.color!==""&&t.uint32(26).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,t.uint32(34).fork()).ldelim(),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerCreateGame();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.playerId=r.uint32();break;case 2:n.name=r.string();break;case 3:n.color=r.string();break;case 4:n.options=GameOptions.decode(r,r.uint32());break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const t={};return e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=e.color),e.options!==void 0&&(t.options=e.options?GameOptions.toJSON(e.options):void 0),t},fromPartial(e){var t,r,i;const n=createBasePlayerCreateGame();return n.playerId=(t=e.playerId)!==null&&t!==void 0?t:0,n.name=(r=e.name)!==null&&r!==void 0?r:"",n.color=(i=e.color)!==null&&i!==void 0?i:"",n.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,n}};function createBasePlayerJoinGame(){return{gameId:void 0,playerId:0,name:"",color:"",options:void 0}}const PlayerJoinGame={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==void 0&&t.uint32(10).string(e.gameId),e.playerId!==0&&t.uint32(16).uint32(e.playerId),e.name!==""&&t.uint32(26).string(e.name),e.color!==""&&t.uint32(34).string(e.color),e.options!==void 0&&GameOptions.encode(e.options,t.uint32(42).fork()).ldelim(),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerJoinGame();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.playerId=r.uint32();break;case 3:n.name=r.string();break;case 4:n.color=r.string();break;case 5:n.options=GameOptions.decode(r,r.uint32());break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):void 0,playerId:isSet(e.playerId)?Number(e.playerId):0,name:isSet(e.name)?String(e.name):"",color:isSet(e.color)?String(e.color):"",options:isSet(e.options)?GameOptions.fromJSON(e.options):void 0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerId!==void 0&&(t.playerId=Math.round(e.playerId)),e.name!==void 0&&(t.name=e.name),e.color!==void 0&&(t.color=e.color),e.options!==void 0&&(t.options=e.options?GameOptions.toJSON(e.options):void 0),t},fromPartial(e){var t,r,i,n;const a=createBasePlayerJoinGame();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:void 0,a.playerId=(r=e.playerId)!==null&&r!==void 0?r:0,a.name=(i=e.name)!==null&&i!==void 0?i:"",a.color=(n=e.color)!==null&&n!==void 0?n:"",a.options=e.options!==void 0&&e.options!==null?GameOptions.fromPartial(e.options):void 0,a}};function createBasePlayerMove(){return{gameId:"",playerNumber:0,mouseX:0,mouseY:0}}const PlayerMove={encode(e,t=minimal$1.exports.Writer.create()){return e.gameId!==""&&t.uint32(10).string(e.gameId),e.playerNumber!==0&&t.uint32(16).uint32(e.playerNumber),e.mouseX!==0&&t.uint32(24).uint32(e.mouseX),e.mouseY!==0&&t.uint32(32).uint32(e.mouseY),t},decode(e,t){const r=e instanceof minimal$1.exports.Reader?e:new minimal$1.exports.Reader(e);let i=t===void 0?r.len:r.pos+t;const n=createBasePlayerMove();for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:n.gameId=r.string();break;case 2:n.playerNumber=r.uint32();break;case 3:n.mouseX=r.uint32();break;case 4:n.mouseY=r.uint32();break;default:r.skipType(a&7);break}}return n},fromJSON(e){return{gameId:isSet(e.gameId)?String(e.gameId):"",playerNumber:isSet(e.playerNumber)?Number(e.playerNumber):0,mouseX:isSet(e.mouseX)?Number(e.mouseX):0,mouseY:isSet(e.mouseY)?Number(e.mouseY):0}},toJSON(e){const t={};return e.gameId!==void 0&&(t.gameId=e.gameId),e.playerNumber!==void 0&&(t.playerNumber=Math.round(e.playerNumber)),e.mouseX!==void 0&&(t.mouseX=Math.round(e.mouseX)),e.mouseY!==void 0&&(t.mouseY=Math.round(e.mouseY)),t},fromPartial(e){var t,r,i,n;const a=createBasePlayerMove();return a.gameId=(t=e.gameId)!==null&&t!==void 0?t:"",a.playerNumber=(r=e.playerNumber)!==null&&r!==void 0?r:0,a.mouseX=(i=e.mouseX)!==null&&i!==void 0?i:0,a.mouseY=(n=e.mouseY)!==null&&n!==void 0?n:0,a}};function isSet(e){return e!=null}const getEnv=e=>{if(!e)throw new Error("Undefined environment variable!");return e},WS_URL=getEnv("wss://api.teemukoivisto.xyz/lw");var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,r=t*60,i=r*24,n=i*7,a=i*365.25;ms=function(c,d){d=d||{};var f=typeof c;if(f==="string"&&c.length>0)return o(c);if(f==="number"&&isFinite(c))return d.long?l(c):u(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(!!d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*i;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function u(c){var d=Math.abs(c);return d>=i?Math.round(c/i)+"d":d>=r?Math.round(c/r)+"h":d>=t?Math.round(c/t)+"m":d>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var d=Math.abs(c);return d>=i?s(c,d,i,"day"):d>=r?s(c,d,r,"hour"):d>=t?s(c,d,t,"minute"):d>=e?s(c,d,e,"second"):c+" ms"}function s(c,d,f,p){var m=d>=f*1.5;return Math.round(c/f)+" "+p+(m?"s":"")}return ms}function setup(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=n,r.enabled=o,r.humanize=requireMs(),r.destroy=s,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let d=0;for(let f=0;f<c.length;f++)d=(d<<5)-d+c.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(c){let d,f=null,p,m;function y(...g){if(!y.enabled)return;const _=y,C=Number(new Date),$=C-(d||C);_.diff=$,_.prev=d,_.curr=C,d=C,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let h=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(v,P)=>{if(v==="%%")return"%";h++;const N=r.formatters[P];if(typeof N=="function"){const x=g[h];v=N.call(_,x),g.splice(h,1),h--}return v}),r.formatArgs.call(_,g),(_.log||r.log).apply(_,g)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(c)),m),set:g=>{f=g}}),typeof r.init=="function"&&r.init(y),y}function i(c,d){const f=r(this.namespace+(typeof d>"u"?":":d)+c);return f.log=this.log,f}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d;const f=(typeof c=="string"?c:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(c=f[d].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function a(){const c=[...r.names.map(u),...r.skips.map(u).map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(c))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function l(c){return c instanceof Error?c.stack||c.message:c}function s(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common=setup;(function(e,t){t.formatArgs=i,t.save=n,t.load=a,t.useColors=r,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;l.splice(1,0,s,"color: inherit");let c=0,d=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(c++,f==="%c"&&(d=c))}),l.splice(d,0,s)}t.log=console.debug||console.log||(()=>{});function n(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function a(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=common(t);const{formatters:u}=e.exports;u.j=function(l){try{return JSON.stringify(l)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(browser,browser.exports);const debug=browser.exports,logger=debug("game"),log={print(e,t,r,i){const n=e==="info"?r:`%c ${e.toUpperCase()} -> ${r}`;i&&e==="info"?logger(n,i):i?logger(n,`color: ${t}`,i):e==="info"?logger(n):logger(n,`color: ${t}`)},debug(e,t){return this.print("debug","#c563ff",e,t)},info(e,t){return this.print("info","",e,t)},warn(e,t){return this.print("warn","#f3f32c",e,t)},error(e,t){return this.print("error","#ff4242",e,t)}},enableDebug=e=>{e?debug.enable("game"):debug.disable()};let socket=null;const socketActions={connect(e){socket=new WebSocket(WS_URL),socket.binaryType="arraybuffer",socket.onopen=()=>{console.log("Connected"),e({e:"connected"})},socket.onerror=t=>{console.debug("Socket error",t),e({e:"error",err:t})},socket.onclose=()=>{console.log("Disconnected"),socket=null,e({e:"disconnected"})},socket.onmessage=t=>{const{data:r}=t,i=new Uint8Array(r),n=i.slice(1),a=i[0];switch(a){case ServerMsgType.lobby_state:e({e:ServerMsgType.lobby_state,data:LobbyState.decode(n)});break;case ServerMsgType.player_msg:case ServerMsgType.player_join_lobby:case ServerMsgType.player_leave_lobby:case ServerMsgType.lobby_game_updated:case ServerMsgType.player_join:log.debug(`Read type ${a}`);break;case ServerMsgType.game_start:{e({e:ServerMsgType.game_start,data:GameStart.decode(n)});break}case ServerMsgType.game_end:{e({e:ServerMsgType.game_end,data:GameEnd.decode(n)});break}case ServerMsgType.tick:{e({e:ServerMsgType.tick,data:Tick.decode(n)});break}default:log.error(`Unknown message type: ${a}`)}}},emit(e,t){const r=new Uint8Array(t.length+1);r.set([e],0),r.set(t,1),socket==null||socket.send(r)},emitJoinLobby(e){const t=PlayerJoinLobby.encode(e).finish(),r=new Uint8Array(t.length+1);r.set([ClientMsgType.join_lobby],0),r.set(t,1),socket==null||socket.send(r)},emitJoinGame(e){const t=PlayerJoinGame.encode(e).finish(),r=new Uint8Array(t.length+1);r.set([ClientMsgType.join_lobby_game],0),r.set(t,1),socket==null||socket.send(r)},emitMove(e){const t=PlayerMove.encode(e).finish(),r=new Uint8Array(t.length+1);r.set([ClientMsgType.player_move],0),r.set(t,1),socket==null||socket.send(r)}},lobbyGames=writable([]),lobbyPlayers=writable([]),playerName=writable("unknown"),gameState=writable("connecting"),gameEnd=writable(void 0),gameId=writable(""),players=writable([]),balls$1=writable([]),playerId=Math.ceil(Math.random()*1e5),localPlayer=writable(void 0),retryConnectTimeout=writable();function handleMessages(e){var t;switch(log.debug("Event:",e),e.e){case"connected":socketActions.emitJoinLobby({playerId,name:get_store_value(playerName)}),gameState.set("lobby");break;case"disconnected":gameState.set("connecting"),retryConnectTimeout.set(setTimeout(()=>{socketActions.connect(handleMessages)},1e3));break;case ServerMsgType.lobby_state:lobbyGames.set(e.data.games),lobbyPlayers.set(e.data.players);break;case ServerMsgType.game_start:gameId.set(e.data.gameId),players.set(e.data.players),balls$1.set(e.data.balls),localPlayer.set(e.data.players.find(n=>n.id===playerId)),gfxActions.initGame(e.data.players,e.data.balls,e.data.rects),gameState.set("game-running");break;case ServerMsgType.game_end:gameEnd.set(e.data),gfxActions.destroy(),gameState.set("game-ended");break;case ServerMsgType.tick:const r=e.data;players.update(n=>(r.cursors.forEach((a,o)=>{n[o].cursor=a}),n));const i=get_store_value(mouse);socketActions.emitMove({gameId:r.gameId,playerNumber:((t=get_store_value(localPlayer))==null?void 0:t.playerNumber)||0,mouseX:i.x,mouseY:i.y}),gfxActions.updateBalls(r.balls);break}}const gameActions={setPlayerName(e){playerName.set(e)},runGame(){gameState.set("connecting"),socketActions.connect(handleMessages)},joinLobby(){gameState.set("lobby"),socketActions.emit(ClientMsgType.join_lobby,PlayerJoinLobby.encode({playerId,name:get_store_value(playerName)}).finish())},createGame(e){const t={playerId,name:get_store_value(playerName),color:"poop",options:e};socketActions.emit(ClientMsgType.create_lobby_game,PlayerCreateGame.encode(t).finish()),gameState.set("waiting-game-start")},joinGame(e,t){const r={gameId:e.gameId,playerId,name:get_store_value(playerName),color:"poop",options:t};socketActions.emit(ClientMsgType.join_lobby_game,PlayerJoinGame.encode(r).finish()),gameState.set("waiting-game-start")}},vertexShaderSrc=`attribute vec2 position;

void main() {
    gl_Position = vec4(position, 0.0, 1.0);
}
`,fragmentShaderSrc=`precision highp float;

uniform vec2 metaballs[MAX_METABALLS];
uniform vec3 metaballColors[MAX_METABALLS];
uniform int metaballCount;

void main() {
    float sum = 0.0;
    float cutoff = 0.9;
    float radius = 8.0;
    float maxCloseness = 0.0;
    vec3 closestColor = vec3(0.0, 0.0, 0.0);

    for (int i = 0; i < MAX_METABALLS; i++) {
        if (i >= metaballCount) break;
        vec2 metaball = metaballs[i];
        float dist = distance(gl_FragCoord.xy, metaball);
        vec2 diff = gl_FragCoord.xy - metaball;
        float closeness = (radius * radius) / (diff.x * diff.x + diff.y * diff.y);
        sum += closeness;
        if (closeness > maxCloseness) {
            maxCloseness = closeness;
            closestColor = metaballColors[i];
        }
    }

    if (sum >= cutoff) {
        vec3 color = vec3(0.0, 0.0, 0.0);
        color = closestColor;
        bool first = true;

        for (int i = 0; i < MAX_METABALLS; i++) {
            vec2 metaball = metaballs[i];
            float dist = distance(gl_FragCoord.xy, metaball);
            vec2 diff = gl_FragCoord.xy - metaball;
            float closeness = (radius * radius) / (diff.x * diff.x + diff.y * diff.y);
            if (dist < radius * 3.0) {
                color = mix(color, metaballColors[i], closeness / maxCloseness);
            }
        }

        gl_FragColor = vec4(color, 1.0);
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    }
}
`,width=1920,height=1080,globalCursors=writable([]),balls=writable([]),mouse=writable({x:0,y:0});let canvas,wallCanvas;const gfxActions={initGame(e,t,r){canvas=document.createElement("canvas"),wallCanvas=document.createElement("canvas"),canvas.width=wallCanvas.width=width,canvas.height=wallCanvas.height=height;const i=wallCanvas.getContext("2d");if(!i)throw Error("2D canvas not supported");r.forEach(h=>{i.translate(h.x,h.y),i.rotate(h.rotation),i.fillStyle="#555",i.translate(-h.x,-h.y),i.fillRect(h.x,h.y,h.width,h.height)});const n=canvas.getContext("webgl");if(!n)throw Error("WebGL not supported");const a=300,o=y(vertexShaderSrc,n.VERTEX_SHADER),u=y(fragmentShaderSrc.replaceAll("MAX_METABALLS",a.toFixed()).replaceAll("WIDTH",width.toFixed(1)).replaceAll("HEIGHT",height.toFixed(1)),n.FRAGMENT_SHADER),l=n.createProgram();n.attachShader(l,o),n.attachShader(l,u),n.linkProgram(l),n.useProgram(l);const s=new Float32Array([-1,1,-1,-1,1,1,1,-1]),c=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,c),n.bufferData(n.ARRAY_BUFFER,s,n.STATIC_DRAW);const d=_(l,"position");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,2*4,0);const f=g(l,"metaballs"),p=g(l,"metaballColors"),m=g(l,"metaballCount");function y(h,k){const v=n.createShader(k);if(n.shaderSource(v,h),n.compileShader(v),!n.getShaderParameter(v,n.COMPILE_STATUS))throw"Shader compile failed with: "+n.getShaderInfoLog(v);return v}function g(h,k){const v=n.getUniformLocation(h,k);if(v===-1)throw"Can not find uniform "+k+".";return v}function _(h,k){const v=n.getAttribLocation(h,k);if(v===-1)throw"Can not find attribute "+k+".";return v}let C=performance.now();$();function $(){var F;const h=(F=get_store_value(localPlayer))==null?void 0:F.playerNumber;if(get_store_value(gameState)!=="game-running"){requestAnimationFrame($);return}else if(h===void 0){console.error("undefined playerNumber!"),requestAnimationFrame($);return}const k=performance.now()-C;C=performance.now();const v=.01*k,P=Math.min(1,.01*k);balls.update(w=>w.map(b=>(b.x+=(b.targetX-b.x)*v,b.y+=(b.targetY-b.y)*v,b))),globalCursors.update(w=>w.map(b=>(b.player==h?(b.x=get_store_value(mouse).x,b.y=get_store_value(mouse).y):(b.x+=(b.targetX-b.x)*P,b.y+=(b.targetY-b.y)*P),b)));const N=get_store_value(balls),x=N.length>0?N:t;if(x.length===0)throw Error("grow some balls");if(x.length>a)throw Error("too ballsy");const B=new Float32Array(2*a);for(let w=0;w<x.length;w++){const b=2*w,I=x[w];B[b+0]=I.x,B[b+1]=height-I.y}const O=new Float32Array(3*a);for(let w=0;w<x.length;w++){const b=3*w,I=x[w],L=(I.color&16711680)>>16,G=(I.color&65280)>>8,A=(I.color&255)>>0;O[b+0]=L/255,O[b+1]=G/255,O[b+2]=A/255}n.uniform2fv(f,B),n.uniform3fv(p,O),n.uniform1i(m,x.length),n.drawArrays(n.TRIANGLE_STRIP,0,4),requestAnimationFrame($)}globalCursors.set(e.map(h=>({...h.cursor,color:h.color,targetX:h.cursor.x,targetY:h.cursor.y}))),balls.set(t.map(h=>({...h,targetX:h.x,targetY:h.y})))},destroy(){globalCursors.set([]),balls.set([])},updateMouse(e,t){if(e<0||e>=width||t<0||t>=height){console.error("Invalid mouse position",e,t);return}mouse.set({x:e,y:t})},updateBalls(e){balls.update(t=>t.map((r,i)=>{const n=e[i];return{...r,color:n.color,targetX:n.x,targetY:n.y}}))}},Canvas_svelte_svelte_type_style_lang="";function create_fragment$2(e){let t,r,i=`${width} / ${height}`,n,a,o=`${width} / ${height}`;return{c(){t=element("div"),r=element("div"),n=space(),a=element("div"),attr(r,"class","canvas-wrapper blobs svelte-1pahjfo"),set_style(r,"aspect-ratio",i),attr(a,"class","canvas-wrapper walls svelte-1pahjfo"),set_style(a,"aspect-ratio",o),attr(t,"class","game svelte-1pahjfo")},m(u,l){insert(u,t,l),append(t,r),e[2](r),append(t,n),append(t,a),e[3](a)},p:noop$1,i:noop$1,o:noop$1,d(u){u&&detach(t),e[2](null),e[3](null)}}}function instance$2(e,t,r){let i,n;onMount(()=>{i.appendChild(canvas),n.appendChild(wallCanvas)});function a(u){binding_callbacks[u?"unshift":"push"](()=>{i=u,r(0,i)})}function o(u){binding_callbacks[u?"unshift":"push"](()=>{n=u,r(1,n)})}return[i,n,a,o]}class Canvas extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$2,safe_not_equal,{})}}const Lobby_svelte_svelte_type_style_lang="";function get_each_context(e,t,r){const i=e.slice();return i[14]=t[r],i[16]=r,i}function create_else_block(e){let t,r=e[4],i=[];for(let n=0;n<r.length;n+=1)i[n]=create_each_block(get_each_context(e,r,n));return{c(){t=element("ul");for(let n=0;n<i.length;n+=1)i[n].c();attr(t,"class","svelte-97n68")},m(n,a){insert(n,t,a);for(let o=0;o<i.length;o+=1)i[o].m(t,null)},p(n,a){if(a&272){r=n[4];let o;for(o=0;o<r.length;o+=1){const u=get_each_context(n,r,o);i[o]?i[o].p(u,a):(i[o]=create_each_block(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(n){n&&detach(t),destroy_each(i,n)}}}function create_if_block$1(e){let t;return{c(){t=element("h3"),t.textContent="No games",set_style(t,"margin-top","2rem")},m(r,i){insert(r,t,i)},p:noop$1,d(r){r&&detach(t)}}}function create_each_block(e){let t,r,i,n,a=e[14].players+"",o,u,l=e[14].maxPlayers+"",s,c,d,f;function p(){return e[13](e[16])}return{c(){t=element("li"),r=element("div"),i=element("button"),n=text("Players: "),o=text(a),u=text("/"),s=text(l),c=space(),attr(i,"class","svelte-97n68")},m(m,y){insert(m,t,y),append(t,r),append(r,i),append(i,n),append(i,o),append(i,u),append(i,s),append(t,c),d||(f=listen(i,"click",p),d=!0)},p(m,y){e=m,y&16&&a!==(a=e[14].players+"")&&set_data(o,a),y&16&&l!==(l=e[14].maxPlayers+"")&&set_data(s,l)},d(m){m&&detach(t),d=!1,f()}}}function create_fragment$1(e){let t,r,i,n,a,o,u,l,s,c,d,f,p,m,y,g,_,C,$,h,k,v,P,N,x,B,O,F,w,b,I,L,G,A,J,W,T,q;function D(S,R){return S[4].length===0?create_if_block$1:create_else_block}let M=D(e),E=M(e);return{c(){t=element("div"),r=element("h1"),r.textContent="Liquid War",i=space(),n=element("div"),a=element("form"),o=element("div"),u=element("label"),u.textContent="Name",l=space(),s=element("input"),c=space(),d=element("button"),d.textContent="Play",f=space(),p=element("details"),m=element("summary"),m.textContent="Custom game options",y=space(),g=element("div"),_=element("label"),_.textContent="Server tick rate",C=space(),$=element("input"),h=space(),k=element("div"),v=element("label"),v.textContent="Liquid per player",P=space(),N=element("input"),x=space(),B=element("div"),O=element("label"),O.textContent="Cursor speed",F=space(),w=element("input"),b=space(),I=element("div"),L=element("label"),L.textContent="Players",G=space(),A=element("input"),J=space(),W=element("div"),E.c(),attr(r,"class","svelte-97n68"),attr(u,"for","name"),attr(u,"class","svelte-97n68"),attr(s,"id","name"),s.value=e[5],attr(s,"class","svelte-97n68"),attr(o,"class","field svelte-97n68"),set_style(d,"background","var(--confirm-color)"),attr(d,"class","svelte-97n68"),attr(m,"class","svelte-97n68"),attr(_,"for","serverTickRate"),attr(_,"class","svelte-97n68"),attr($,"id","serverTickRate"),attr($,"class","svelte-97n68"),attr(g,"class","field svelte-97n68"),attr(v,"for","liquid"),attr(v,"class","svelte-97n68"),attr(N,"id","liquid"),attr(N,"class","svelte-97n68"),attr(k,"class","field svelte-97n68"),attr(O,"for","cursor"),attr(O,"class","svelte-97n68"),attr(w,"id","cursor"),attr(w,"class","svelte-97n68"),attr(B,"class","field svelte-97n68"),attr(L,"for","players"),attr(L,"class","svelte-97n68"),attr(A,"id","players"),attr(A,"class","svelte-97n68"),attr(I,"class","field svelte-97n68"),attr(p,"class","svelte-97n68"),attr(a,"class","svelte-97n68"),attr(W,"class","games svelte-97n68"),attr(n,"class","body svelte-97n68"),attr(t,"class","container svelte-97n68")},m(S,R){insert(S,t,R),append(t,r),append(t,i),append(t,n),append(n,a),append(a,o),append(o,u),append(o,l),append(o,s),append(a,c),append(a,d),append(a,f),append(a,p),append(p,m),append(p,y),append(p,g),append(g,_),append(g,C),append(g,$),set_input_value($,e[0]),append(p,h),append(p,k),append(k,v),append(k,P),append(k,N),set_input_value(N,e[1]),append(p,x),append(p,B),append(B,O),append(B,F),append(B,w),set_input_value(w,e[2]),append(p,b),append(p,I),append(I,L),append(I,G),append(I,A),set_input_value(A,e[3]),append(n,J),append(n,W),E.m(W,null),T||(q=[listen(s,"input",e[6]),listen($,"input",e[9]),listen(N,"input",e[10]),listen(w,"input",e[11]),listen(A,"input",e[12]),listen(a,"submit",prevent_default(e[7]))],T=!0)},p(S,[R]){R&32&&s.value!==S[5]&&(s.value=S[5]),R&1&&$.value!==S[0]&&set_input_value($,S[0]),R&2&&N.value!==S[1]&&set_input_value(N,S[1]),R&4&&w.value!==S[2]&&set_input_value(w,S[2]),R&8&&A.value!==S[3]&&set_input_value(A,S[3]),M===(M=D(S))&&E?E.p(S,R):(E.d(1),E=M(S),E&&(E.c(),E.m(W,null)))},i:noop$1,o:noop$1,d(S){S&&detach(t),E.d(),T=!1,run_all(q)}}}function instance$1(e,t,r){let i,n;component_subscribe(e,lobbyGames,_=>r(4,i=_)),component_subscribe(e,playerName,_=>r(5,n=_));let a,o,u,l=2;onMount(()=>{function _(C){C.data.type&&C.data.type==="play"&&(r(3,l=C.data.players),document.querySelector("button").click())}return window.addEventListener("message",_),()=>{window.removeEventListener("message",_)}});function s(_){gameActions.setPlayerName(_.currentTarget.value)}function c(){gameActions.createGame({serverTickRate:a||0,liquidPerPlayer:o||0,cursorSpeed:u||0,players:l})}function d(_){const C=i[_];gameActions.joinGame(C,{serverTickRate:a||0,liquidPerPlayer:o||0,cursorSpeed:u||0,players:l})}function f(){a=this.value,r(0,a)}function p(){o=this.value,r(1,o)}function m(){u=this.value,r(2,u)}function y(){l=this.value,r(3,l)}return[a,o,u,l,i,n,s,c,d,f,p,m,y,_=>d(_)]}class Lobby extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}function initializeAI(){balls.subscribe(e=>{const t=get_store_value(localPlayer);if(t){const r=e.find(i=>i.player!==t.playerNumber);gfxActions.updateMouse(r.x,r.y)}})}const App_svelte_svelte_type_style_lang="";function create_if_block_4(e){let t;return{c(){t=element("div"),t.innerHTML=`<h1 class="svelte-ge3aoc">Liquid War</h1> 
      <p>Connecting...</p>`,attr(t,"class","loading-menu svelte-ge3aoc")},m(r,i){insert(r,t,i)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(t)}}}function create_if_block_3(e){let t,r;return t=new Canvas({}),{c(){create_component(t.$$.fragment)},m(i,n){mount_component(t,i,n),r=!0},p:noop$1,i(i){r||(transition_in(t.$$.fragment,i),r=!0)},o(i){transition_out(t.$$.fragment,i),r=!1},d(i){destroy_component(t,i)}}}function create_if_block_2(e){let t,r,i,n,a,o,u,l,s;return{c(){t=element("div"),r=element("marquee"),r.textContent="Game ended",i=space(),n=element("p"),a=text(e[0]),o=space(),u=element("button"),u.textContent="Play again",attr(r,"class","title svelte-ge3aoc"),attr(r,"width","50%"),attr(n,"class","game-winner svelte-ge3aoc"),attr(u,"class","svelte-ge3aoc"),attr(t,"class","end-menu svelte-ge3aoc")},m(c,d){insert(c,t,d),append(t,r),append(t,i),append(t,n),append(n,a),append(t,o),append(t,u),l||(s=listen(u,"click",e[2]),l=!0)},p(c,d){d&1&&set_data(a,c[0])},i:noop$1,o:noop$1,d(c){c&&detach(t),l=!1,s()}}}function create_if_block_1(e){let t,r;return t=new Lobby({}),{c(){create_component(t.$$.fragment)},m(i,n){mount_component(t,i,n),r=!0},p:noop$1,i(i){r||(transition_in(t.$$.fragment,i),r=!0)},o(i){transition_out(t.$$.fragment,i),r=!1},d(i){destroy_component(t,i)}}}function create_if_block(e){let t;return{c(){t=element("div"),t.innerHTML="<h2>Waiting for players\u2026</h2>",attr(t,"class","loading-menu svelte-ge3aoc")},m(r,i){insert(r,t,i)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(t)}}}function create_fragment(e){let t,r,i,n;const a=[create_if_block,create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4],o=[];function u(l,s){return l[1]==="waiting-game-start"?0:l[1]==="lobby"?1:l[1]==="game-ended"?2:l[1]==="game-running"?3:l[1]==="connecting"?4:-1}return~(r=u(e))&&(i=o[r]=a[r](e)),{c(){t=element("main"),i&&i.c(),attr(t,"class","svelte-ge3aoc")},m(l,s){insert(l,t,s),~r&&o[r].m(t,null),n=!0},p(l,[s]){let c=r;r=u(l),r===c?~r&&o[r].p(l,s):(i&&(group_outros(),transition_out(o[c],1,1,()=>{o[c]=null}),check_outros()),~r?(i=o[r],i?i.p(l,s):(i=o[r]=a[r](l),i.c()),transition_in(i,1),i.m(t,null)):i=null)},i(l){n||(transition_in(i),n=!0)},o(l){transition_out(i),n=!1},d(l){l&&detach(t),~r&&o[r].d()}}}function instance(e,t,r){let i,n;component_subscribe(e,gameEnd,u=>r(3,i=u)),component_subscribe(e,gameState,u=>r(1,n=u));let a="";onMount(()=>{const u=new URLSearchParams(window.location.search);u.has("autoplay")&&window.addEventListener("load",()=>{document.querySelector("button").click()}),u.has("ai")&&initializeAI(),window.addEventListener("pointermove",function(l){let s=document.querySelector("canvas");if(!s)return;let c=s.getBoundingClientRect();if(l.clientX>=c.left&&l.clientX<c.right&&l.clientY>=c.top&&l.clientY<c.bottom){let d=s.width/c.width,f=s.height/c.height;gfxActions.updateMouse((l.clientX-c.left)*d,(l.clientY-c.top)*f)}},!1),gameActions.runGame()});function o(){gameActions.joinLobby()}return e.$$.update=()=>{var u,l;if(e.$$.dirty&8){const s=i;s&&(s.result===GameStatus.PLAYER_WON&&((u=s.winner)==null?void 0:u.id)===playerId?r(0,a="You won \u{1F3C6} :DD"):s.result===GameStatus.PLAYER_WON&&((l=s.winner)==null?void 0:l.id)!==playerId?r(0,a="You lost \u{1F635}"):s.result===GameStatus.TIE?r(0,a="Tie \u{1F926}\u200D\u2642\uFE0F"):s.result===GameStatus.AI_WON?r(0,a="Computer won \u{1F916}"):r(0,a=`Something weird happened: ${GameStatus}`))}},[a,n,o,i]}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}const index="";enableDebug(!1);const el=document.querySelector("#app");el&&new App({target:el});
